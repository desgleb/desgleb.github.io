"use strict";(self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[]).push([[156],{6284:function(e,l,t){t.d(l,{k:function(){return a}});const a=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},6838:function(e,l,t){t.d(l,{Z:function(){return y}});t(560);var a=t(3396),n=t(4870),o=t(7139),r=t(9242),i=t(9545),s=t(1020),c=t(3060);const u={class:"input-field"},d=["value"],v=(0,a._)("label",null,"Фильтрация по годам",-1);var m=(0,a.aZ)({__name:"YearSelectComponent",setup(e){const{transactions:l,transactionsYearFilter:t}=(0,s.Jk)((0,i.C)()),{isGlobalLoading:m}=(0,s.Jk)((0,c.e)());m.value=!0;const w=(0,n.iH)(),y=(0,n.iH)(),f=(0,a.Fl)((()=>{const e=[],t=new Set;t.add((new Date).getFullYear()),l.value.forEach((e=>{const l=new Date(e.date).getFullYear();t.add(l)}));const a=Math.max.apply(null,Array.from(t))+1;t.add(a);const n=Array.from(t).sort(((e,l)=>e-l));return n.forEach((l=>{const t={year:l,id:Math.floor(1e6*Math.random())};e.push(t)})),m.value=!1,e}));return(0,a.bv)((()=>{y.value=M.FormSelect.init(w.value)})),(0,a.ic)((()=>{y.value=M.FormSelect.init(w.value)})),(e,l)=>((0,a.wg)(),(0,a.iD)("div",u,[(0,a.wy)((0,a._)("select",{ref_key:"yearSelect",ref:w,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.dq)(t)?t.value=e:null)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.value,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.year},(0,o.zw)(e.year),9,d)))),128))],512),[[r.bM,(0,n.SU)(t),void 0,{number:!0}]]),v]))}});const w=m;var y=w},8156:function(e,l,t){t.r(l),t.d(l,{default:function(){return C}});var a=t(3396),n=t(7139),o=t(4870),r=t(6838),i=t(1020),s=t(9545),c=t(3256);const u={class:"collection"};var d=(0,a.aZ)({__name:"OverspendRowCollectionComponent",props:{month:{},year:{}},setup(e){const l=e,{transactions:t}=(0,i.Jk)((0,s.C)()),{currencyFilter:r}=(0,c.y)(),d=(0,a.Fl)((()=>t.value.filter((e=>new Date(e.date).getFullYear()===l.year)).filter((e=>new Date(e.date).getMonth()===l.month)).filter((e=>e.isNotPlanned)).sort(((e,l)=>e.date-l.date)).sort(((e,l)=>e.category>l.category?1:e.category<l.category?-1:0))));return(e,l)=>((0,a.wg)(),(0,a.iD)("ul",u,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.value,((e,l)=>((0,a.wg)(),(0,a.iD)("li",{key:e.id,class:"collection-item"},(0,n.zw)(l+1)+". "+(0,n.zw)(e.category)+" = "+(0,n.zw)((0,o.SU)(r)(e.amount))+" || "+(0,n.zw)(e.description),1)))),128))]))}});const v=d;var m=v,w=t(6284);const y=(0,a._)("h3",null,"Сводка",-1),f=(0,a._)("hr",null,null,-1),_={class:"row"},h={class:"col s12 m9"},p={class:"col s12 m2 offset-m1"},g={class:"row"},F={class:"col s12"},b={class:"collapsible-header"},k=(0,a._)("i",{class:"material-icons"},"view_headline",-1),D={class:"collapsible-body"};var S=(0,a.aZ)({__name:"HomeView",setup(e){const l=(0,o.iH)(),t=(0,o.iH)(),{transactionsYearFilter:u,transactionsMonthFilter:d,transactions:v}=(0,i.Jk)((0,s.C)()),{currencyFilter:S}=(0,c.y)(),Y=(0,a.Fl)((()=>v.value.filter((e=>e.isNotPlanned)))),C=(0,a.Fl)((()=>Y.value.filter((e=>new Date(e.date).getFullYear()===u.value)).reduce(((e,l)=>Number((e+l.amount).toFixed(2))),0)));function H(e){return Y.value.filter((e=>new Date(e.date).getFullYear()===u.value)).filter((l=>new Date(l.date).getMonth()===e)).reduce(((e,l)=>Number((e+l.amount).toFixed(2))),0)}return(0,a.bv)((()=>{t.value=M.Collapsible.init(l.value)})),(0,a.Ah)((()=>{t.value.$el.length>0&&t.value.destroy()})),(e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[y,f,(0,a._)("section",null,[(0,a._)("div",_,[(0,a._)("div",h,[(0,a._)("h5",null,"Незапланированные траты за год: "+(0,n.zw)((0,o.SU)(S)(C.value)),1)]),(0,a._)("div",p,[(0,a.Wm)(r.Z)])]),(0,a._)("div",g,[(0,a._)("div",F,[(0,a._)("ul",{ref_key:"monthCollapsible",ref:l,class:"collapsible popout"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(w.k),((e,l)=>((0,a.wg)(),(0,a.iD)("li",{key:l,class:(0,n.C_)({active:(0,o.SU)(d)===l})},[(0,a._)("div",b,[k,(0,a.Uk)((0,n.zw)(e)+" = "+(0,n.zw)((0,o.SU)(S)(H(l))),1)]),(0,a._)("div",D,[(0,a.Wm)(m,{month:l,year:(0,o.SU)(u)},null,8,["month","year"])])],2)))),128))],512)])])])],64))}});const Y=S;var C=Y}}]);