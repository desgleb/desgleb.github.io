(function(){var e={4748:function(e,a,t){"use strict";var n=t(5484),l=t(9242),o=t(3396),c=t(4870),i=t(7139),s=t(4219),r=t(5420),u=t(8263);const d=e=>((0,o.dD)("data-v-7be3bf0b"),e=e(),(0,o.Cn)(),e),m={class:"modal-content"},v=d((()=>(0,o._)("h4",null,"Добавление нового счёта",-1))),b=d((()=>(0,o._)("p",null,"Добавьте новый счёт для Вашей базы. Он понадобиться Вам для создания операция дохода и расхода.",-1))),p=d((()=>(0,o._)("p",null,"Введите название Вашего нового счёта.",-1))),f=d((()=>(0,o._)("button",{class:"btn modal-close-btn modal-close red"},[(0,o._)("i",{class:"large material-icons"},"close")],-1))),y={class:"mc-form-category"},_={class:"row"},w={class:"input-field col s12"},g=d((()=>(0,o._)("i",{class:"material-icons prefix"},"mode_edit",-1))),h=d((()=>(0,o._)("label",{for:"accountNameNew"},"Название нового счёта",-1))),k={key:0,class:"helper-text red-text"},$={key:1,class:"helper-text red-text"},U={class:"row"},D={class:"input-field col s12 m6"},N=d((()=>(0,o._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),F=d((()=>(0,o._)("label",{for:"amount"},"Баланс счёта",-1))),A={class:"col s12 m6"},x=d((()=>(0,o._)("span",null,"Учитывать в общем балансе",-1))),I=d((()=>(0,o._)("i",{class:"material-icons right"},"add_circle_outline",-1)));var C=(0,o.aZ)({__name:"AddAccountComponent",setup(e){const a=(0,c.iH)(null),t=(0,c.iH)(),{pushNewAccount:n}=(0,u.o)(),d=(0,c.iH)(2),C=(0,c.qj)({accountName:"",balance:0,isCountable:!0}),H={accountName:{required:r.BM.withMessage("Поле НАЗВАНИЕ СЧЁТА является обязательным.",r.C1),minLength:r.BM.withMessage((({$params:e})=>`Длина названия счёта должна быть не менее, чем ${e.min} символа.`),(0,r.Ei)(d))}},S=(0,s.Xw)(H,C),T=(0,o.Fl)((()=>S.value.accountName.$dirty&&S.value.accountName.required.$invalid)),q=(0,o.Fl)((()=>S.value.accountName.$dirty&&S.value.accountName.minLength.$invalid)),J=async()=>{if(S.value.$invalid)return void S.value.$touch();const e={accountName:C.accountName,balance:Number(C.balance.toFixed(2)),isCountable:C.isCountable};try{await n(e)}catch(a){}finally{C.accountName="",C.balance=0,C.isCountable=!0,t.value.close()}};return(0,o.bv)((()=>{t.value=M.Modal.init(a.value)})),(0,o.Jd)((()=>{t.value.destroy()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",{id:"modalAddAccount",ref_key:"addAccountModal",ref:a,class:"modal"},[(0,o._)("div",m,[v,b,p,f,(0,o._)("form",y,[(0,o._)("div",_,[(0,o._)("div",w,[g,(0,o.wy)((0,o._)("input",{id:"accountNameNew","onUpdate:modelValue":t[0]||(t[0]=e=>C.accountName=e),class:(0,i.C_)({invalid:T.value||q.value}),type:"text"},null,2),[[l.nr,C.accountName,void 0,{trim:!0}]]),h,T.value?((0,o.wg)(),(0,o.iD)("small",k,(0,i.zw)((0,c.SU)(S).accountName.required.$message),1)):q.value?((0,o.wg)(),(0,o.iD)("small",$,(0,i.zw)((0,c.SU)(S).accountName.minLength.$message),1)):(0,o.kq)("",!0)])]),(0,o._)("div",U,[(0,o._)("div",D,[N,(0,o.wy)((0,o._)("input",{id:"amount","onUpdate:modelValue":t[1]||(t[1]=e=>C.balance=e),step:"0.01",type:"number"},null,512),[[l.nr,C.balance,void 0,{number:!0}]]),F]),(0,o._)("div",A,[(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>C.isCountable=e),class:"filled-in",type:"checkbox"},null,512),[[l.e8,C.isCountable]]),x])])]),(0,o._)("button",{class:"mc-button-submit btn",name:"action",type:"submit",onClick:(0,l.iM)(J,["prevent"])},[(0,o.Uk)("Добавить "),I])])])],512))}}),H=t(89);const S=(0,H.Z)(C,[["__scopeId","data-v-7be3bf0b"]]);var T=S,q=t(9545),J=t(3256),V=t(1020);const z=e=>((0,o.dD)("data-v-c69e2fc4"),e=e(),(0,o.Cn)(),e),E={class:"modal-content"},Z=z((()=>(0,o._)("h4",null,"Удаление счёта:",-1))),L={key:0,class:"red-text"},j={key:1},B=z((()=>(0,o._)("li",null,"Операции по этому счёту:",-1))),O=z((()=>(0,o._)("p",null,"Для удаления счёт введите его название в поле ниже.",-1))),P=z((()=>(0,o._)("button",{class:"btn modal-close-btn modal-close"},[(0,o._)("i",{class:"large material-icons"},"close")],-1))),W={class:"mc-form-category"},Y={class:"row"},K={class:"input-field col s12"},R=z((()=>(0,o._)("i",{class:"material-icons prefix"},"mode_edit",-1))),X=z((()=>(0,o._)("label",{for:"deleteAccountNameField"},"Название нового счёта",-1))),Q={key:0,class:"helper-text red-text"},G=["disabled"],ee=z((()=>(0,o._)("i",{class:"material-icons right"},"delete_forever",-1)));var ae=(0,o.aZ)({__name:"DeleteAccountComponent",setup(e){const a=(0,c.iH)(!1),t=(0,c.iH)(null),n=(0,c.iH)(),{deleteAccount:d}=(0,u.o)(),{selectedAccountId:m,selectedAccountName:v}=(0,V.Jk)((0,u.o)()),{transactionsSortedByDate:b}=(0,V.Jk)((0,q.C)()),{currencyFilter:p,dateFilter:f}=(0,J.y)(),y=(0,o.Fl)((()=>b.value.filter((e=>e.accountId===m.value)))),_=()=>{a.value=g.deleteAccount===v.value},w=()=>{d(),n.value.close()},g=(0,c.qj)({deleteAccount:""}),h={deleteAccount:{required:r.BM.withMessage("Для удаления необходимо ввести НАИМЕНОВАНИЕ удаляемого счёта",r.C1)}},k=(0,s.Xw)(h,g),$=(0,o.Fl)((()=>k.value.deleteAccount.$dirty&&k.value.deleteAccount.required.$invalid));return(0,o.bv)((()=>{n.value=M.Modal.init(t.value)})),(0,o.Jd)((()=>{n.value.destroy()})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{id:"modalDeleteAccount",ref_key:"deleteAccountModal",ref:t,class:"modal"},[(0,o._)("div",E,[Z,(0,o._)("h4",null,(0,i.zw)((0,c.SU)(v)),1),(0,o._)("h6",{class:(0,i.C_)({"red-text":y.value.length>0})},"Вы действительно хотите удалить этот счёт?",2),y.value.length>5?((0,o.wg)(),(0,o.iD)("h6",L,"С этим счётом связано "+(0,i.zw)(y.value.length)+" операций! ",1)):y.value.length>0?((0,o.wg)(),(0,o.iD)("ul",j,[B,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(y.value,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e.id},(0,i.zw)((0,c.SU)(f)(e.date))+" - "+(0,i.zw)((0,c.SU)(p)(e.amount)),1)))),128))])):(0,o.kq)("",!0),O,P,(0,o._)("form",W,[(0,o._)("div",Y,[(0,o._)("div",K,[R,(0,o.wy)((0,o._)("input",{id:"deleteAccountNameField","onUpdate:modelValue":n[0]||(n[0]=e=>g.deleteAccount=e),class:(0,i.C_)({invalid:$.value}),type:"text",onInput:_},null,34),[[l.nr,g.deleteAccount,void 0,{trim:!0}]]),X,$.value?((0,o.wg)(),(0,o.iD)("small",Q,(0,i.zw)((0,c.SU)(k).deleteAccount.required.$message),1)):(0,o.kq)("",!0)])]),(0,o._)("button",{disabled:!a.value,class:"mc-button-submit btn red",name:"action",type:"submit",onClick:(0,l.iM)(w,["prevent"])},[(0,o.Uk)("Удалить счет "),ee],8,G)])])],512))}});const te=(0,H.Z)(ae,[["__scopeId","data-v-c69e2fc4"]]);var ne=te;const le=e=>((0,o.dD)("data-v-741e10aa"),e=e(),(0,o.Cn)(),e),oe={class:"modal-content"},ce=le((()=>(0,o._)("p",null,"Тут Вы можете изменить наименование Вашего счёта",-1))),ie=le((()=>(0,o._)("p",null,"Введите новое наименование Вашего счёта.",-1))),se=le((()=>(0,o._)("button",{class:"btn modal-close-btn modal-close"},[(0,o._)("i",{class:"large material-icons"},"close")],-1))),re={class:"mc-form-category"},ue={class:"row"},de={class:"input-field col s12"},me=le((()=>(0,o._)("i",{class:"material-icons prefix"},"mode_edit",-1))),ve=le((()=>(0,o._)("label",{for:"accountNameEdit"},"Новое наименование счёта",-1))),be={key:0,class:"helper-text red-text"},pe={key:1,class:"helper-text red-text"},fe={class:"row"},ye={class:"input-field col s12"},_e=le((()=>(0,o._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),we=le((()=>(0,o._)("label",{for:"amount"},"Сумма",-1))),ge={class:"col s12 m6"},he=le((()=>(0,o._)("span",null,"Учитывать в общем балансе",-1))),ke=le((()=>(0,o._)("i",{class:"material-icons right"},"publish",-1)));var $e=(0,o.aZ)({__name:"EditAccountComponent",setup(e){const a=(0,c.iH)(null),t=(0,c.iH)(),{selectedAccountName:n,selectedAccountBalance:d}=(0,V.Jk)((0,u.o)()),{changeAccount:m}=(0,u.o)(),v=(0,c.iH)(2),b=(0,c.qj)({accountName:"",balance:0,isCountable:!0}),p={accountName:{required:r.BM.withMessage("Поле НАЗВАНИЕ СЧЁТА является обязательным.",r.C1),minLength:r.BM.withMessage((({$params:e})=>`Длина названия счёта должна быть не менее, чем ${e.min} символа.`),(0,r.Ei)(v))}},f=(0,s.Xw)(p,b),y=(0,o.Fl)((()=>f.value.accountName.$dirty&&f.value.accountName.required.$invalid)),_=(0,o.Fl)((()=>f.value.accountName.$dirty&&f.value.accountName.minLength.$invalid)),w=async()=>{if(f.value.$invalid)return void f.value.$touch();const e={accountName:b.accountName,balance:Number(b.balance.toFixed(2)),isCountable:b.isCountable};try{await m(e)}catch(a){console.error(a)}finally{b.accountName="",t.value.close()}},g={onOpenStart:()=>{b.accountName=n.value,b.balance=d.value},onOpenEnd:()=>M.updateTextFields()};return(0,o.bv)((()=>{t.value=M.Modal.init(a.value,g)})),(0,o.Jd)((()=>{t.value.destroy()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",{id:"modalEditAccount",ref_key:"editAccountModal",ref:a,class:"modal"},[(0,o._)("div",oe,[(0,o._)("h4",null,[(0,o.Uk)("Изменение счёта "),(0,o._)("strong",null,(0,i.zw)((0,c.SU)(n)),1)]),ce,ie,se,(0,o._)("form",re,[(0,o._)("div",ue,[(0,o._)("div",de,[me,(0,o.wy)((0,o._)("input",{id:"accountNameEdit","onUpdate:modelValue":t[0]||(t[0]=e=>b.accountName=e),class:(0,i.C_)({invalid:y.value||_.value}),type:"text"},null,2),[[l.nr,b.accountName,void 0,{trim:!0}]]),ve,y.value?((0,o.wg)(),(0,o.iD)("small",be,(0,i.zw)((0,c.SU)(f).accountName.required.$message),1)):_.value?((0,o.wg)(),(0,o.iD)("small",pe,(0,i.zw)((0,c.SU)(f).accountName.minLength.$message),1)):(0,o.kq)("",!0)])]),(0,o._)("div",fe,[(0,o._)("div",ye,[_e,(0,o.wy)((0,o._)("input",{id:"amount","onUpdate:modelValue":t[1]||(t[1]=e=>b.balance=e),step:"0.01",type:"number"},null,512),[[l.nr,b.balance,void 0,{number:!0}]]),we]),(0,o._)("div",ge,[(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>b.isCountable=e),class:"filled-in",type:"checkbox"},null,512),[[l.e8,b.isCountable]]),he])])]),(0,o._)("button",{class:"mc-button-submit btn",name:"action",type:"submit",onClick:(0,l.iM)(w,["prevent"])},[(0,o.Uk)("Изменить "),ke])])])],512))}});const Ue=(0,H.Z)($e,[["__scopeId","data-v-741e10aa"]]);var De=Ue,Ne=t(5797),Fe=t.n(Ne),Ae=t(1520);const{getNewDate:xe}=(0,q.C)(n.Z),Ie={format:"d mmmm yyyy",autoClose:!0,defaultDate:new Date,firstDay:1,i18n:{cancel:"Отмена",clear:"Очистить",done:"Выбрать",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekdaysAbbrev:["В","П","Вт","С","Ч","Пт","Сб"]},onSelect:xe},Ce=e=>((0,o.dD)("data-v-3fe50110"),e=e(),(0,o.Cn)(),e),He=Ce((()=>(0,o._)("h4",{class:"center-align"},"Добавление новой записи",-1))),Se=Ce((()=>(0,o._)("button",{class:"btn modal-close-btn modal-close red"},[(0,o._)("i",{class:"large material-icons"},"close")],-1))),Te={class:"row"},Me={class:"row"},qe={class:"input-field col s12"},Je=["value"],Ve=Ce((()=>(0,o._)("label",null,"Счёт",-1))),ze={class:"row"},Ee={class:"input-field col s12"},Ze=["value"],Le=Ce((()=>(0,o._)("label",null,"Категория",-1))),je={class:"row"},Be={class:"input-field col s12"},Oe=Ce((()=>(0,o._)("i",{class:"material-icons prefix"},"calendar_month",-1))),Pe=Ce((()=>(0,o._)("label",{for:"recordDate"},"Дата",-1))),We={class:"row"},Ye={class:"input-field col s12"},Ke=Ce((()=>(0,o._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),Re=Ce((()=>(0,o._)("label",{for:"amount"},"Сумма",-1))),Xe={key:0,class:"helper-text red-text"},Qe={key:1,class:"helper-text red-text"},Ge={class:"row"},ea={class:"input-field col s12"},aa=Ce((()=>(0,o._)("i",{class:"material-icons prefix"},"edit",-1))),ta=Ce((()=>(0,o._)("label",{for:"description"},"Комментарий",-1))),na={class:"row valign-wrapper"},la={class:"col s12 m4"},oa=["disabled"],ca=Ce((()=>(0,o._)("i",{class:"material-icons right"},"add",-1))),ia={class:"col s12 m8"},sa=["disabled"],ra=Ce((()=>(0,o._)("span",{class:"red-text"},"Незапланированный расход?",-1)));var ua=(0,o.aZ)({__name:"AddRecordComponent",setup(e){const{pushNewTransaction:a}=(0,q.C)(),{transactionDate:t}=(0,V.Jk)((0,q.C)()),{accounts:n,selectedAccountId:d,selectedAccountName:m}=(0,V.Jk)((0,u.o)()),{categories:v,selectedCategoryId:b,selectedCategory:p}=(0,V.Jk)((0,Ae.x)()),{currencyFilter:f}=(0,J.y)(),y=(0,c.iH)(),_=(0,c.iH)(null),w=(0,c.iH)(),g=(0,c.iH)(),h=(0,c.iH)(),k=(0,c.iH)(.01),$=(0,c.qj)({transactionAmount:0,transactionDescription:"",isNotPlanned:!1}),U={transactionAmount:{required:r.BM.withMessage("Поле СУММА является обязательным.",r.C1),minValue:r.BM.withMessage((({$params:e})=>`Сумма должна быть не менее, чем ${e.min} рублей.`),(0,r.uv)(k))}},D=(0,s.Xw)(U,$),N=(0,o.Fl)((()=>D.value.transactionAmount.$dirty&&D.value.transactionAmount.required.$invalid)),F=(0,o.Fl)((()=>D.value.transactionAmount.$dirty&&D.value.transactionAmount.minValue.$invalid)),A=(0,o.Fl)((()=>!(!p.value||!m||D.value.transactionAmount.$invalid))),x=async()=>{if(D.value.$invalid)return void D.value.$touch();const e={category:p.value?.name,categoryId:b.value,account:m.value,accountId:d.value,type:p.value?.type,amount:Number($.transactionAmount.toFixed(2)),description:$.transactionDescription,date:t.value,isNotPlanned:$.isNotPlanned,readonly:!1};try{await a(e)}catch(n){console.error(n)}finally{$.transactionDescription="",$.transactionAmount=0,$.isNotPlanned=!1,d.value="",b.value="",w.value.close()}};return(0,o.ic)((()=>{y.value=document.querySelectorAll("select"),Fe().FormSelect.init(y.value),Fe().updateTextFields()})),(0,o.bv)((()=>{w.value=Fe().Modal.init(_.value),Fe().FormSelect.init(y.value),Fe().updateTextFields(),h.value=Fe().Datepicker.init(g.value,Ie)})),(0,o.Jd)((()=>{w.value.destroy(),h.value.destroy()})),(e,a)=>((0,o.wg)(),(0,o.iD)("div",{id:"modalAddTransaction",ref_key:"addTransactionModal",ref:_,class:"modal p-24"},[He,Se,(0,o._)("div",Te,[(0,o._)("form",{class:"col s12",onSubmit:(0,l.iM)(x,["prevent"])},[(0,o._)("div",Me,[(0,o._)("div",qe,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>(0,c.dq)(d)?d.value=e:null)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,c.SU)(n),(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(f)(e["balance"])),9,Je)))),128))],512),[[l.bM,(0,c.SU)(d)]]),Ve])]),(0,o._)("div",ze,[(0,o._)("div",Ee,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>(0,c.dq)(b)?b.value=e:null)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,c.SU)(v),(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)("outcome"===e.type?"Расход":"Доход"),9,Ze)))),128))],512),[[l.bM,(0,c.SU)(b)]]),Le])]),(0,o._)("div",je,[(0,o._)("div",Be,[Oe,(0,o._)("input",{id:"recordDate",ref_key:"datepicker",ref:g,class:"datepicker",name:"recordDate",type:"text"},null,512),Pe])]),(0,o._)("div",We,[(0,o._)("div",Ye,[Ke,(0,o.wy)((0,o._)("input",{id:"amount","onUpdate:modelValue":a[2]||(a[2]=e=>$.transactionAmount=e),class:(0,i.C_)({invalid:N.value||F.value}),step:"0.01",type:"number"},null,2),[[l.nr,$.transactionAmount,void 0,{number:!0}]]),Re,N.value?((0,o.wg)(),(0,o.iD)("small",Xe,(0,i.zw)((0,c.SU)(D).transactionAmount.required.$message),1)):F.value?((0,o.wg)(),(0,o.iD)("small",Qe,(0,i.zw)((0,c.SU)(D).transactionAmount.minValue.$message),1)):(0,o.kq)("",!0)])]),(0,o._)("div",Ge,[(0,o._)("div",ea,[aa,(0,o.wy)((0,o._)("input",{id:"description","onUpdate:modelValue":a[3]||(a[3]=e=>$.transactionDescription=e),type:"text"},null,512),[[l.nr,$.transactionDescription]]),ta])]),(0,o._)("div",na,[(0,o._)("div",la,[(0,o._)("button",{disabled:!A.value,class:"mc-button-submit btn light-green darken-4",name:"action",type:"submit"},[(0,o.Uk)(" Добавить "),ca],8,oa)]),(0,o._)("div",ia,[(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{disabled:"income"===(0,c.SU)(p)?.type,"onUpdate:modelValue":a[4]||(a[4]=e=>$.isNotPlanned=e),class:"filled-in",type:"checkbox"},null,8,sa),[[l.e8,$.isNotPlanned]]),ra])])])],32)])],512))}});const da=(0,H.Z)(ua,[["__scopeId","data-v-3fe50110"]]);var ma=da;const va=e=>((0,o.dD)("data-v-9c53af5c"),e=e(),(0,o.Cn)(),e),ba={class:"modal-content"},pa=va((()=>(0,o._)("h4",null,"Перевод средств со счёта на счёт",-1))),fa=va((()=>(0,o._)("button",{class:"btn modal-close-btn modal-close red"},[(0,o._)("i",{class:"large material-icons"},"close")],-1))),ya={class:"mc-form-category"},_a={class:"row"},wa={class:"input-field col s12"},ga=["value"],ha=va((()=>(0,o._)("label",null,"Выберите счёт-отправитель",-1))),ka={class:"row"},$a={class:"input-field col s12"},Ua=["value"],Da=va((()=>(0,o._)("label",null,"Выберите счёт-получатель",-1))),Na={class:"row"},Fa={class:"input-field col s12"},Aa=va((()=>(0,o._)("i",{class:"material-icons prefix"},"calendar_month",-1))),xa=va((()=>(0,o._)("label",{for:"transferDate"},"Дата",-1))),Ia={class:"row"},Ca={class:"input-field col s12"},Ha=va((()=>(0,o._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),Sa=va((()=>(0,o._)("label",{for:"amount"},"Сумма перевода",-1))),Ta={class:"row"},Ma={class:"col"},qa={key:0,class:"red-text"},Ja={key:1,class:"red-text"},Va={key:2,class:"red-text"},za={key:3,class:"red-text"},Ea={class:"row"},Za={class:"col"},La=["disabled"],ja=va((()=>(0,o._)("i",{class:"material-icons right"},"forward",-1)));var Ba=(0,o.aZ)({__name:"AccountsTransferComponent",setup(e){const{accounts:a,selectedAccountId:t,selectedAccountName:n,destinationAccountId:s,destinationAccountName:r,transferAmount:d,requiredAmountForTransfer:m,isSourceAccountBalanceNotEnough:v}=(0,V.Jk)((0,u.o)()),{pushNewTransaction:b}=(0,q.C)(),{transactionDate:p}=(0,V.Jk)((0,q.C)()),{currencyFilter:f}=(0,J.y)(),y=(0,c.iH)(),_=(0,c.iH)(),w=(0,c.iH)(),g=(0,c.iH)(),h=(0,c.iH)(),k=(0,o.Fl)((()=>t.value===s.value||!t.value||!s.value)),$=(0,o.Fl)((()=>k.value||v.value||d.value<=0)),U=async()=>{if($.value)return;const e={account:n.value,accountId:t.value,amount:d.value,category:r.value,categoryId:s.value,date:p.value,description:`Перевод из ${n.value} на ${r.value}`,type:"transfer",isNotPlanned:!1,readonly:!1};await b(e),_.value.close()};return(0,o.bv)((()=>{_.value=Fe().Modal.init(y.value),w.value=document.querySelectorAll("select"),Fe().FormSelect.init(w.value),Fe().updateTextFields(),h.value=Fe().Datepicker.init(g.value,Ie)})),(0,o.Jd)((()=>{_.value.destroy()})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{id:"modalTransferBetweenAccounts",ref_key:"modalTransfer",ref:y,class:"modal"},[(0,o._)("div",ba,[pa,fa,(0,o._)("form",ya,[(0,o._)("div",_a,[(0,o._)("div",wa,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>(0,c.dq)(t)?t.value=e:null)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,c.SU)(a),(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(f)(e.balance)),9,ga)))),128))],512),[[l.bM,(0,c.SU)(t)]]),ha])]),(0,o._)("div",ka,[(0,o._)("div",$a,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>(0,c.dq)(s)?s.value=e:null)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,c.SU)(a),(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(f)(e.balance)),9,Ua)))),128))],512),[[l.bM,(0,c.SU)(s)]]),Da])]),(0,o._)("div",Na,[(0,o._)("div",Fa,[Aa,(0,o._)("input",{id:"transferDate",ref_key:"datepicker",ref:g,class:"datepicker",name:"transferDate",type:"text"},null,512),xa])]),(0,o._)("div",Ia,[(0,o._)("div",Ca,[Ha,(0,o.wy)((0,o._)("input",{id:"amount","onUpdate:modelValue":n[2]||(n[2]=e=>(0,c.dq)(d)?d.value=e:null),step:"0.01",type:"number"},null,512),[[l.nr,(0,c.SU)(d)]]),Sa])]),(0,o._)("div",Ta,[(0,o._)("div",Ma,[(0,c.SU)(t)?(0,c.SU)(s)?k.value?((0,o.wg)(),(0,o.iD)("small",Va," Счёт-отправитель и счёт-получатель должны быть разными ")):(0,c.SU)(v)?((0,o.wg)(),(0,o.iD)("small",za,[(0,o.Uk)(" На счете-отправителе не хватает "),(0,o._)("strong",null,(0,i.zw)((0,c.SU)(f)((0,c.SU)(m).toString())),1)])):(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("small",Ja," Необходимо выбрать счёт-получатель ")):((0,o.wg)(),(0,o.iD)("small",qa," Необходимо выбрать счёт-отправитель "))])]),(0,o._)("div",Ea,[(0,o._)("div",Za,[(0,o._)("button",{disabled:$.value,class:"mc-button-submit btn blue",name:"action",type:"submit",onClick:(0,l.iM)(U,["prevent"])},[(0,o.Uk)("Перевести "),ja],8,La)])])])])],512))}});const Oa=(0,H.Z)(Ba,[["__scopeId","data-v-9c53af5c"]]);var Pa=Oa,Wa=t(6135);const Ya=e=>((0,o.dD)("data-v-40bdbed1"),e=e(),(0,o.Cn)(),e),Ka={class:"modal-content"},Ra=Ya((()=>(0,o._)("h4",null,"Установка лимита",-1))),Xa=Ya((()=>(0,o._)("button",{class:"btn modal-close-btn modal-close red"},[(0,o._)("i",{class:"large material-icons"},"close")],-1))),Qa={class:"row"},Ga={class:"col s12"},et={class:"input-field col s12"},at=["value"],tt=Ya((()=>(0,o._)("label",null,"На какую категорию установить лимит?",-1))),nt={class:"row"},lt={class:"input-field col s12"},ot=Ya((()=>(0,o._)("label",{for:"limitAmount"},"Сумма лимита (введите 0, чтобы убрать лимит)",-1))),ct=Ya((()=>(0,o._)("div",{class:"row"},[(0,o._)("div",{class:"col"},[(0,o._)("button",{class:"mc-button-submit btn",name:"action",type:"submit"},[(0,o.Uk)(" Установить лимит "),(0,o._)("i",{class:"material-icons right"},"upload")])])],-1)));var it=(0,o.aZ)({__name:"SetLimitToCategory",setup(e){const a=(0,c.iH)(),t=(0,c.iH)(),{selectedCategoryId:n,categoriesAvailableForLimitation:s}=(0,V.Jk)((0,Ae.x)()),{transactionsYearFilter:r,transactionsMonthFilter:u}=(0,V.Jk)((0,q.C)()),{setLimitValue:d}=(0,V.Jk)((0,Wa.L)()),{pushNewLimit:m}=(0,Wa.L)(),v=async()=>{const e={month:u.value,year:r.value,categoryId:n.value,limit:d.value,id:""};try{await m(e)}catch(a){console.log(a)}finally{n.value="",d.value=0,t.value.close()}};return(0,o.bv)((()=>{t.value=Fe().Modal.init(a.value),Fe().updateTextFields()})),(0,o.Jd)((()=>{t.value.destroy()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",{id:"modalSetLimit",ref_key:"setLimitModal",ref:a,class:"modal"},[(0,o._)("div",Ka,[Ra,Xa,(0,o._)("form",{class:"mc-form-category",onSubmit:(0,l.iM)(v,["prevent"])},[(0,o._)("div",Qa,[(0,o._)("div",Ga,[(0,o._)("div",et,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>(0,c.dq)(n)?n.value=e:null)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,c.SU)(s),(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name),9,at)))),128))],512),[[l.bM,(0,c.SU)(n)]]),tt])])]),(0,o._)("div",nt,[(0,o._)("div",lt,[(0,o.wy)((0,o._)("input",{id:"limitAmount","onUpdate:modelValue":t[1]||(t[1]=e=>(0,c.dq)(d)?d.value=e:null),type:"number"},null,512),[[l.nr,(0,c.SU)(d),void 0,{number:!0}]]),ot])]),ct],32)])],512))}});const st=(0,H.Z)(it,[["__scopeId","data-v-40bdbed1"]]);var rt=st;const ut=e=>((0,o.dD)("data-v-9694da70"),e=e(),(0,o.Cn)(),e),dt={class:"modal-content"},mt=ut((()=>(0,o._)("h4",null,"Изменить данные",-1))),vt=ut((()=>(0,o._)("button",{class:"btn modal-close-btn modal-close red"},[(0,o._)("i",{class:"large material-icons"},"close")],-1))),bt={class:"row"},pt={class:"row"},ft={class:"input-field col s12"},yt=["value"],_t=ut((()=>(0,o._)("label",null,"Счёт",-1))),wt={class:"row"},gt={class:"input-field col s12"},ht=["value"],kt=ut((()=>(0,o._)("label",null,"Категория",-1))),$t={class:"row"},Ut={class:"input-field col s12"},Dt=ut((()=>(0,o._)("i",{class:"material-icons prefix"},"calendar_month",-1))),Nt=ut((()=>(0,o._)("label",{for:"recordDateEdit"},"Дата",-1))),Ft={class:"row"},At={class:"input-field col s12"},xt=ut((()=>(0,o._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),It=ut((()=>(0,o._)("label",{for:"amount"},"Сумма",-1))),Ct={key:0,class:"helper-text red-text"},Ht={key:1,class:"helper-text red-text"},St={class:"row"},Tt={class:"input-field col s12"},Mt=ut((()=>(0,o._)("i",{class:"material-icons prefix"},"edit",-1))),qt=ut((()=>(0,o._)("label",{for:"description"},"Комментарий",-1))),Jt={class:"row valign-wrapper"},Vt={class:"col s12 m4"},zt=["disabled"],Et=ut((()=>(0,o._)("i",{class:"material-icons right"},"upload",-1))),Zt={class:"col s12 m8"},Lt=ut((()=>(0,o._)("span",{class:"red-text"},"Незапланированный расход?",-1)));var jt=(0,o.aZ)({__name:"EditTransactionComponent",setup(e){const{accounts:a,selectedAccountId:t,selectedAccountName:n}=(0,V.Jk)((0,u.o)()),{categories:d,selectedCategoryId:m,selectedCategory:v}=(0,V.Jk)((0,Ae.x)()),{selectedTransaction:b,transactionDate:p}=(0,V.Jk)((0,q.C)()),{editTransaction:f}=(0,q.C)(),{currencyFilter:y}=(0,J.y)(),_=(0,c.iH)(),w=(0,c.iH)(),g=(0,c.iH)(),h=(0,c.iH)(),k=(0,c.iH)(),$=(0,c.iH)(.01),U=(0,c.qj)({transactionAmount:0,transactionDescription:"",isNotPlanned:!1}),D={transactionAmount:{required:r.BM.withMessage("Поле СУММА является обязательным.",r.C1),minValue:r.BM.withMessage((({$params:e})=>`Сумма должна быть не менее, чем ${e.min} рублей.`),(0,r.uv)($))}},N=(0,s.Xw)(D,U),F=(0,o.Fl)((()=>N.value.transactionAmount.$dirty&&N.value.transactionAmount.required.$invalid)),A=(0,o.Fl)((()=>N.value.transactionAmount.$dirty&&N.value.transactionAmount.minValue.$invalid)),x=(0,o.Fl)((()=>!(!v.value||!n||N.value.transactionAmount.$invalid))),I=async()=>{const e={account:n.value,accountId:t.value,amount:Number(U.transactionAmount.toFixed(2)),category:v.value?.name,categoryId:m.value,date:p.value,description:U.transactionDescription,isNotPlanned:U.isNotPlanned,type:v.value?.type};await f(e),w.value.close()},C={onOpenStart:()=>{t.value=b.value?.accountId,m.value=b.value?.categoryId,U.transactionAmount=b.value?.amount,U.transactionDescription=b.value?.description,U.isNotPlanned=b.value?.isNotPlanned},onOpenEnd:()=>{Fe().updateTextFields()},onCloseEnd:()=>{t.value="",m.value=""}};return(0,o.ic)((()=>{k.value=document.querySelectorAll("select"),Fe().FormSelect.init(k.value),Fe().updateTextFields()})),(0,o.bv)((()=>{w.value=Fe().Modal.init(_.value,C),Fe().FormSelect.init(k.value),Fe().updateTextFields(),h.value=Fe().Datepicker.init(g.value,Ie)})),(0,o.Jd)((()=>{w.value.destroy(),h.value.destroy()})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{id:"modalEditTransaction",ref_key:"editTransactionModal",ref:_,class:"modal"},[(0,o._)("div",dt,[mt,vt,(0,o._)("div",bt,[(0,o._)("form",{class:"col s12",onSubmit:(0,l.iM)(I,["prevent"])},[(0,o._)("div",pt,[(0,o._)("div",ft,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>(0,c.dq)(t)?t.value=e:null)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,c.SU)(a),(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(y)(e.balance)),9,yt)))),128))],512),[[l.bM,(0,c.SU)(t)]]),_t])]),(0,o._)("div",wt,[(0,o._)("div",gt,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>(0,c.dq)(m)?m.value=e:null)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,c.SU)(d),(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)("outcome"===e.type?"Расход":"Доход"),9,ht)))),128))],512),[[l.bM,(0,c.SU)(m)]]),kt])]),(0,o._)("div",$t,[(0,o._)("div",Ut,[Dt,(0,o._)("input",{id:"recordDateEdit",ref_key:"datepicker",ref:g,class:"datepicker",name:"recordDateEdit",type:"text"},null,512),Nt])]),(0,o._)("div",Ft,[(0,o._)("div",At,[xt,(0,o.wy)((0,o._)("input",{id:"amount","onUpdate:modelValue":n[2]||(n[2]=e=>U.transactionAmount=e),class:(0,i.C_)({invalid:F.value||A.value}),step:"0.01",type:"number"},null,2),[[l.nr,U.transactionAmount,void 0,{number:!0}]]),It,F.value?((0,o.wg)(),(0,o.iD)("small",Ct,(0,i.zw)((0,c.SU)(N).transactionAmount.required.$message),1)):A.value?((0,o.wg)(),(0,o.iD)("small",Ht,(0,i.zw)((0,c.SU)(N).transactionAmount.minValue.$message),1)):(0,o.kq)("",!0)])]),(0,o._)("div",St,[(0,o._)("div",Tt,[Mt,(0,o.wy)((0,o._)("input",{id:"description","onUpdate:modelValue":n[3]||(n[3]=e=>U.transactionDescription=e),type:"text"},null,512),[[l.nr,U.transactionDescription]]),qt])]),(0,o._)("div",Jt,[(0,o._)("div",Vt,[(0,o._)("button",{disabled:!x.value,class:"mc-button-submit btn light-green darken-4",name:"action",type:"submit"},[(0,o.Uk)(" Обновить "),Et],8,zt)]),(0,o._)("div",Zt,[(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":n[4]||(n[4]=e=>U.isNotPlanned=e),class:"filled-in",type:"checkbox"},null,512),[[l.e8,U.isNotPlanned]]),Lt])])])],32)])])],512))}});const Bt=(0,H.Z)(jt,[["__scopeId","data-v-9694da70"]]);var Ot=Bt;const Pt=e=>((0,o.dD)("data-v-ca22a03c"),e=e(),(0,o.Cn)(),e),Wt={class:"modal-content"},Yt=Pt((()=>(0,o._)("h4",null,"Удаление операции",-1))),Kt={class:"row"},Rt={class:"col"},Xt=(0,o.uE)('<div class="row" data-v-ca22a03c><div class="col" data-v-ca22a03c><p class="red-text" data-v-ca22a03c>Это действие необратимо</p></div></div><button class="btn modal-close-btn modal-close" data-v-ca22a03c><i class="large material-icons" data-v-ca22a03c>close</i></button>',2),Qt={class:"row"},Gt={class:"col"},en=Pt((()=>(0,o._)("i",{class:"material-icons right"},"delete_forever",-1))),an=Pt((()=>(0,o._)("div",{class:"col"},[(0,o._)("button",{class:"btn modal-close","data-target":"modalAddAccount"},[(0,o._)("i",{class:"material-icons right"},"cancel"),(0,o.Uk)(" Отменить удаление ")])],-1)));var tn=(0,o.aZ)({__name:"DeleteTransactionComponent",setup(e){const{deleteTransaction:a}=(0,q.C)(),{selectedTransaction:t}=(0,V.Jk)((0,q.C)()),{dateFilter:n,currencyFilter:s}=(0,J.y)(),r=(0,c.iH)(),u=(0,c.iH)(),d=()=>{a(),u.value.close()};let m;return(0,o.bv)((()=>{u.value=M.Modal.init(r.value)})),(0,o.Xn)((()=>{m=t.value?n(t.value.date):""})),(0,o.Jd)((()=>{u.value.destroy()})),(e,a)=>((0,o.wg)(),(0,o.iD)("div",{id:"modalDeleteTransaction",ref_key:"deleteTransactionModal",ref:r,class:"modal"},[(0,o._)("div",Wt,[Yt,(0,o._)("div",Kt,[(0,o._)("div",Rt,[(0,o._)("p",null,(0,i.zw)("income"===(0,c.SU)(t)?.type?"Доход":"outcome"===(0,c.SU)(t)?.type?"Расход":"Перевод")+" на сумму: "+(0,i.zw)((0,c.SU)(s)((0,c.SU)(t)?.amount)),1),(0,o._)("p",null,"Дата: "+(0,i.zw)((0,c.SU)(m)),1),(0,o._)("p",null,(0,i.zw)("transfer"===(0,c.SU)(t)?.type?"Счёт-отправитель":"Счёт")+": "+(0,i.zw)((0,c.SU)(t)?.account),1),(0,o._)("p",null,(0,i.zw)("transfer"===(0,c.SU)(t)?.type?"Счёт-получатель":"Категория")+": "+(0,i.zw)((0,c.SU)(t)?.category),1),(0,o._)("p",null,"Операция создана: "+(0,i.zw)((0,c.SU)(t)?.author),1)])]),Xt,(0,o._)("div",Qt,[(0,o._)("div",Gt,[(0,o._)("button",{class:"btn red","data-target":"modalAddAccount",onClick:(0,l.iM)(d,["prevent"])},[en,(0,o.Uk)(" Удалить навсегда ")])]),an])])],512))}});const nn=(0,H.Z)(tn,[["__scopeId","data-v-ca22a03c"]]);var ln=nn;const on=e=>((0,o.dD)("data-v-6fbd76bb"),e=e(),(0,o.Cn)(),e),cn={class:"modal-content"},sn=on((()=>(0,o._)("h4",null,"Перевод средств со счёта на счёт",-1))),rn=on((()=>(0,o._)("button",{class:"btn modal-close-btn modal-close red"},[(0,o._)("i",{class:"large material-icons"},"close")],-1))),un={class:"mc-form-category"},dn={class:"row"},mn={class:"input-field col s12"},vn=["value"],bn=on((()=>(0,o._)("label",null,"Выберите счёт-отправитель",-1))),pn={class:"row"},fn={class:"input-field col s12"},yn=["value"],_n=on((()=>(0,o._)("label",null,"Выберите счёт-получатель",-1))),wn={class:"row"},gn={class:"input-field col s12"},hn=on((()=>(0,o._)("i",{class:"material-icons prefix"},"calendar_month",-1))),kn=on((()=>(0,o._)("label",{for:"transferDate"},"Дата",-1))),$n={class:"row"},Un={class:"input-field col s12"},Dn=on((()=>(0,o._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),Nn=on((()=>(0,o._)("label",{for:"amount"},"Сумма перевода",-1))),Fn={class:"row"},An={class:"col"},xn={key:0,class:"red-text"},In={key:1,class:"red-text"},Cn={key:2,class:"red-text"},Hn={key:3,class:"red-text"},Sn={class:"row"},Tn={class:"col"},Mn=["disabled"],qn=on((()=>(0,o._)("i",{class:"material-icons right"},"forward",-1)));var Jn=(0,o.aZ)({__name:"EditAccountsTransferComponent",setup(e){const{accounts:a,selectedAccountId:t,selectedAccountName:n,destinationAccountId:s,destinationAccountName:r,transferAmount:d,requiredAmountForTransfer:m,isSourceAccountBalanceNotEnough:v}=(0,V.Jk)((0,u.o)()),{editTransaction:b}=(0,q.C)(),{selectedTransaction:p,transactionDate:f}=(0,V.Jk)((0,q.C)()),{selectedCategoryId:y}=(0,V.Jk)((0,Ae.x)()),{currencyFilter:_}=(0,J.y)(),w=(0,c.iH)(),g=(0,c.iH)(),h=(0,c.iH)(),k=(0,c.iH)(),$=(0,c.iH)(),U=(0,o.Fl)((()=>t.value===s.value||!t.value||!s.value)),D=(0,o.Fl)((()=>U.value||v.value||d.value<=0)),N=async()=>{if(D.value)return;const e={account:n.value,accountId:t.value,amount:d.value,category:r.value,categoryId:s.value,date:f.value,description:`Перевод из ${n.value} на ${r.value}`,type:"transfer"};await b(e),g.value.close()},F={onOpenStart:()=>{t.value=p.value?.accountId,s.value=p.value?.categoryId,d.value=p.value?.amount},onOpenEnd:()=>{Fe().updateTextFields()},onCloseEnd:()=>{t.value="",y.value=""}};return(0,o.ic)((()=>{h.value=document.querySelectorAll("select"),Fe().FormSelect.init(h.value),Fe().updateTextFields()})),(0,o.bv)((()=>{g.value=Fe().Modal.init(w.value,F),h.value=document.querySelectorAll("select"),Fe().FormSelect.init(h.value),Fe().updateTextFields(),$.value=Fe().Datepicker.init(k.value,Ie)})),(0,o.Jd)((()=>{g.value.destroy()})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{id:"modalEditTransfer",ref_key:"modalTransfer",ref:w,class:"modal"},[(0,o._)("div",cn,[sn,rn,(0,o._)("form",un,[(0,o._)("div",dn,[(0,o._)("div",mn,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>(0,c.dq)(t)?t.value=e:null)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,c.SU)(a),(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(_)(e.balance)),9,vn)))),128))],512),[[l.bM,(0,c.SU)(t)]]),bn])]),(0,o._)("div",pn,[(0,o._)("div",fn,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>(0,c.dq)(s)?s.value=e:null)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,c.SU)(a),(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(_)(e.balance)),9,yn)))),128))],512),[[l.bM,(0,c.SU)(s)]]),_n])]),(0,o._)("div",wn,[(0,o._)("div",gn,[hn,(0,o._)("input",{id:"transferDate",ref_key:"datepicker",ref:k,class:"datepicker",name:"transferDate",type:"text"},null,512),kn])]),(0,o._)("div",$n,[(0,o._)("div",Un,[Dn,(0,o.wy)((0,o._)("input",{id:"amount","onUpdate:modelValue":n[2]||(n[2]=e=>(0,c.dq)(d)?d.value=e:null),step:"0.01",type:"number"},null,512),[[l.nr,(0,c.SU)(d)]]),Nn])]),(0,o._)("div",Fn,[(0,o._)("div",An,[(0,c.SU)(t)?(0,c.SU)(s)?U.value?((0,o.wg)(),(0,o.iD)("small",Cn," Счёт-отправитель и счёт-получатель должны быть разными ")):(0,c.SU)(v)?((0,o.wg)(),(0,o.iD)("small",Hn,[(0,o.Uk)(" На счете-отправителе не хватает "),(0,o._)("strong",null,(0,i.zw)((0,c.SU)(_)((0,c.SU)(m).toString())),1)])):(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("small",In," Необходимо выбрать счёт-получатель ")):((0,o.wg)(),(0,o.iD)("small",xn," Необходимо выбрать счёт-отправитель "))])]),(0,o._)("div",Sn,[(0,o._)("div",Tn,[(0,o._)("button",{disabled:D.value,class:"mc-button-submit btn blue",name:"action",type:"submit",onClick:(0,l.iM)(N,["prevent"])},[(0,o.Uk)("Перевести "),qn],8,Mn)])])])])],512))}});const Vn=(0,H.Z)(Jn,[["__scopeId","data-v-6fbd76bb"]]);var zn=Vn,En=(0,o.aZ)({__name:"ModalComponent",setup(e){return(e,a)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(l.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.Wm)(T)])),_:1}),(0,o.Wm)(l.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.Wm)(De)])),_:1}),(0,o.Wm)(l.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.Wm)(ne)])),_:1}),(0,o.Wm)(l.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.Wm)(ma)])),_:1}),(0,o.Wm)(l.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.Wm)(Pa)])),_:1}),(0,o.Wm)(l.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.Wm)(rt)])),_:1}),(0,o.Wm)(l.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ot)])),_:1}),(0,o.Wm)(l.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.Wm)(ln)])),_:1}),(0,o.Wm)(l.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.Wm)(zn)])),_:1})],64))}});const Zn=En;var Ln=Zn,jn=t(8834),Bn=t(123),On=t(3060),Pn=t(2483);const Wn={class:"mc-main-background green lighten-5"},Yn={key:0,class:"fixed-action-btn"},Kn=(0,o._)("i",{class:"material-icons"},"add",-1),Rn=[Kn];var Xn=(0,o.aZ)({__name:"App",setup(e){const{isDataNeeded:a,areBaseAndCategoriesReady:n}=(0,V.Jk)((0,On.e)()),{fetchUserInfo:l}=(0,Bn.m)(),{subscribeToAccounts:i}=(0,u.o)(),s=(0,Pn.yj)(),r=(0,c.XI)(),d=(0,c.iH)();return(0,o.YP)((()=>s.meta.layout??"MainLayout"),(e=>{r.value=(0,o.RC)((()=>t(2115)(`./${e}.vue`)))}),{immediate:!0}),(0,o.wF)((async()=>{jn.I.currentUser&&a.value&&(await l(),await i(),a.value=!1)})),(0,o.bv)((()=>{d.value&&M.FloatingActionButton.init(d.value,{direction:"right"})})),(e,a)=>{const t=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Wn,[((0,o.wg)(),(0,o.j4)((0,o.LL)(r.value),null,{default:(0,o.w5)((()=>[(0,o.Wm)(t)])),_:1}))]),(0,c.SU)(n)?((0,o.wg)(),(0,o.iD)("div",Yn,[(0,o._)("button",{ref_key:"addTransaction",ref:d,class:"btn-floating btn-large red modal-trigger","data-target":"modalAddTransaction"},Rn,512)])):(0,o.kq)("",!0),((0,o.wg)(),(0,o.j4)(o.lR,{to:"body"},[(0,o.Wm)(Ln)]))],64)}}});const Qn=Xn;var Gn=Qn,el=t(5431);(0,el.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh."),alert("Обнаружена новая версия. Приложение будет перезагружено."),window.location.replace("/")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var al=t(3824);t(5778);let tl;jn.I.onAuthStateChanged((()=>{tl||(tl=(0,l.ri)(Gn),tl.use(n.Z),tl.use(al.Z),tl.mount("#app"))}))},3824:function(e,a,t){"use strict";var n=t(2483),l=t(8834);const o=[{name:"login",path:"/login",meta:{auth:!1},component:()=>t.e(772).then(t.bind(t,8772))},{name:"register",path:"/register",meta:{auth:!1},component:()=>t.e(478).then(t.bind(t,2478))},{name:"profile",path:"/profile",meta:{auth:!0},component:()=>t.e(177).then(t.bind(t,3177))},{name:"accounts",path:"/accounts",meta:{auth:!0},component:()=>t.e(212).then(t.bind(t,6212))},{name:"records",path:"/records",meta:{auth:!0,layout:"WideLayout"},component:()=>t.e(442).then(t.bind(t,442))},{name:"planning",path:"/planning",meta:{auth:!0},component:()=>t.e(655).then(t.bind(t,1143))},{name:"calendar",path:"/calendar",meta:{auth:!0,layout:"WideLayout"},component:()=>t.e(685).then(t.bind(t,2685))},{name:"categories",path:"/categories",meta:{auth:!0},component:()=>t.e(944).then(t.bind(t,1944))},{name:"home",path:"/",meta:{auth:!0},component:()=>t.e(156).then(t.bind(t,8156))}],c=(0,n.p7)({history:(0,n.PO)("/"),routes:o});c.beforeEach((e=>{const a=!!l.I.currentUser,t=e.matched.some((e=>e.meta.auth));if(!e.name)return{name:"home"};if(t){if(a)return;if("login"!==e.name&&"register"!==e.name)return{name:"login"}}})),a.Z=c},8263:function(e,a,t){"use strict";t.d(a,{o:function(){return v}});var n=t(1020),l=t(123),o=t(1520),c=t(9545),i=t(6135),s=t(4870),r=t(3396),u=t(8834),d=t(2114),m=t(5484);const v=(0,n.Q_)("accounts",(()=>{const e=(0,s.iH)([]),a=(0,s.iH)(0),t=(0,s.iH)(""),v=(0,s.iH)(""),b=(0,s.iH)(0),p=(0,s.iH)(0),{pushNewTransaction:f}=(0,c.C)(),y=(0,r.Fl)((()=>Object.values(e.value).sort(((e,a)=>e.name>a.name?1:e.name<a.name?-1:0)).sort(((e,a)=>e.isCountable&&!a.isCountable?-1:!e.isCountable&&a.isCountable?1:0)))),_=(0,r.Fl)((()=>{const e=y.value.find((e=>e.id===t.value));return e?e.name:""})),w=(0,r.Fl)((()=>{const e=y.value.find((e=>e.id===t.value));return e?e.balance:0})),g=(0,r.Fl)((()=>y.value.find((e=>e.id===v.value))?.name||"")),h=(0,r.Fl)((()=>{if(t.value){const e=y.value.find((e=>e.id===t.value))?.balance||0;return p.value=e-b.value,e<b.value}return!0})),k=(0,r.Fl)((()=>y.value.reduce(((e,a)=>a.isCountable?e+a.balance:e),0))),$=async e=>{const{baseId:a}=(0,n.Jk)((0,l.m)(m.Z)),t={name:e.accountName,balance:e.balance,id:"",isCountable:e.isCountable,initialBalance:e.balance};try{const e=(0,d.VF)((0,d.iH)(u.db,`bases/${a.value}/accounts/`));"string"===typeof e.key&&(t.id=e.key),await(0,d.t8)(e,t)}catch(o){console.error(o)}finally{await N()}},U=async e=>{try{const a={},{baseId:o}=(0,n.Jk)((0,l.m)()),c=(0,d.iH)(u.db,`bases/${o.value}/accounts/${t.value}`),i=await(await(0,d.U2)(c)).val(),s=i.balance>e.balance?"outcome":"income",r=Number(Math.abs(i.balance-e.balance).toFixed(2));i.name=e.accountName,i.balance=e.balance,i.isCountable=e.isCountable,a[`bases/${o.value}/accounts/${t.value}`]=i,t.value="";const m=(new Date).getFullYear(),v=(new Date).getMonth(),b=(new Date).getDate(),p={account:i.name,accountId:i.id,amount:r,category:i.name,categoryId:i.id,date:new Date(m,v,b).getTime(),description:`Корректировка (${"income"===s?"рост":"понижение"}) баланса счёта ${i.name.toUpperCase()} на сумму ${Math.abs(r)}`,isNotPlanned:!1,readonly:!0,type:s};return await f(p),(0,d.Vx)((0,d.iH)(u.db),a)}catch(a){console.error(a)}},D=async()=>{try{const{baseId:e}=(0,n.Jk)((0,l.m)()),a=(0,d.iH)(u.db,`bases/${e.value}/accounts/${t.value}`);t.value="",await(0,d.t8)(a,null)}catch(e){console.error(e)}},N=async()=>{const{subscribeToCategories:t}=(0,o.x)(),{subscribeToTransactions:s}=(0,c.C)(),{subscribeToLimits:r}=(0,i.L)();try{const{baseId:o}=(0,n.Jk)((0,l.m)());if(o.value){const n=(0,d.iH)(u.db,`bases/${o.value}/accounts/`);(0,d.jM)(n,(async n=>{n.exists()?(e.value=n.val(),await t(),await s(),await r()):a.value<5?setTimeout((()=>{a.value++,N()}),100*(a.value+1)):(e.value=[],console.error("Не существует пути до СЧЕТОВ"))}))}else console.error("BaseID is empty or null")}catch(m){console.error(m)}};return{accounts:y,selectedAccountId:t,destinationAccountId:v,destinationAccountName:g,transferAmount:b,requiredAmountForTransfer:p,isSourceAccountBalanceNotEnough:h,selectedAccountName:_,selectedAccountBalance:w,allAccountsSum:k,subscribeToAccounts:N,pushNewAccount:$,changeAccount:U,deleteAccount:D}}))},6252:function(e,a,t){"use strict";t.d(a,{t:function(){return v}});t(560);var n=t(1020),l=t(5484),o=t(8834),c=t(2114),i=t(4690),s=t(3824),r=t(4870),u=t(8263),d=t(123),m=t(3060);const v=(0,n.Q_)("auth",(()=>{const e=(0,r.iH)(0);function a(){e.value+=1}async function t({email:e,password:t}){const{subscribeToAccounts:c}=(0,u.o)(l.Z),{fetchUserInfo:r}=(0,d.m)(l.Z),{isGlobalLoading:v}=(0,n.Jk)((0,m.e)(l.Z));try{v.value=!0,await(0,i.e5)(o.I,e,t),await r(),await c(),await s.Z.push("/profile"),a()}catch(b){console.error(b)}finally{v.value=!1}}async function v({firstName:e,lastName:t,email:r,password:v}){const{subscribeToAccounts:b}=(0,u.o)(l.Z),{fetchUserInfo:f}=(0,d.m)(l.Z),{isGlobalLoading:y}=(0,n.Jk)((0,m.e)(l.Z));try{y.value=!0,await(0,i.Xb)(o.I,r,v);const n=p();n?await(0,c.t8)((0,c.iH)(o.db,`/users/${n}/`),{firstName:e,lastName:t,email:r,id:n,recordsId:""}):console.error("UID is null or empty"),await f(),await b(),await s.Z.push("/profile"),a()}catch(_){console.error(_)}finally{y.value=!1}}async function b(){try{await(0,i.w7)(o.I),await s.Z.push("/"),a()}catch(e){}}function p(){const e=o.I.currentUser;return e?e.uid:null}return{register:v,getUid:p,login:t,logout:b,componentKey:e}}))},1520:function(e,a,t){"use strict";t.d(a,{x:function(){return r}});var n=t(1020),l=t(2114),o=t(8834),c=t(4870),i=t(3396),s=t(123);const r=(0,n.Q_)("categories",(()=>{const e=(0,c.iH)([]),a=(0,c.iH)(""),t=(0,c.iH)(0),r=(0,i.Fl)((()=>Object.values(e.value).sort(((e,a)=>e.name>a.name?1:e.name<a.name?-1:0)))),u=(0,i.Fl)((()=>r.value.filter((e=>"outcome"===e.type)))),d=(0,i.Fl)((()=>r.value.find((e=>e.id===a.value)))),m=async e=>{const{baseId:a,userFullName:t}=(0,n.Jk)((0,s.m)()),c={name:e["categoryName"],type:e["categoryType"],id:"",author:t.value,description:e["categoryDescription"]};try{const e=(0,l.VF)((0,l.iH)(o.db,`bases/${a.value}/categories/`));"string"===typeof e.key&&(c.id=e.key),await(0,l.t8)(e,c)}catch(i){console.error(i)}},v=async e=>{const{baseId:t,userFullName:c}=(0,n.Jk)((0,s.m)());e.categoryAuthor=c.value;const i={name:e.categoryName,type:e.categoryType,id:e.categoryId,author:e.categoryAuthor,description:e.categoryDescription};try{const e={};return e[`bases/${t.value}/categories/${a.value}`]=i,a.value="",(0,l.Vx)((0,l.iH)(o.db),e)}catch(r){console.error(r)}},b=async()=>{try{const{baseId:e}=(0,n.Jk)((0,s.m)()),t=(0,l.iH)(o.db,`bases/${e.value}/categories/${a.value}`);a.value="",await(0,l.t8)(t,null)}catch(e){console.error(e)}},p=async()=>{try{const{baseId:a}=(0,n.Jk)((0,s.m)()),c=(0,l.iH)(o.db,`bases/${a.value}/categories/`);(0,l.jM)(c,(async a=>{a.exists()?e.value=a.val():t.value<5?setTimeout((()=>{t.value++,p()}),100*(t.value+1)):(e.value=[],console.error("Не существует пути до КАТЕГОРИЙ"))}))}catch(a){console.error(a)}};return{categories:r,categoriesAvailableForLimitation:u,selectedCategoryId:a,selectedCategory:d,pushNewCategory:m,changeCategory:v,deleteCategory:b,subscribeToCategories:p}}))},123:function(e,a,t){"use strict";t.d(a,{m:function(){return d}});var n=t(5484),l=t(1020),o=t(6252),c=t(8263),i=t(2114),s=t(8834),r=t(4870),u=t(3396);const d=(0,l.Q_)("database",(()=>{const{getUid:e}=(0,o.t)(n.Z),{subscribeToAccounts:a}=(0,c.o)(n.Z),t=(0,r.qj)({firstName:"",lastName:"",email:"",id:"",recordsId:""}),l=(0,r.iH)(""),d=(0,u.Fl)((()=>t.recordsId)),m=(0,u.Fl)((()=>`${t.firstName} ${t.lastName}`));async function v(){try{const a=e();if(a){await(0,i.t8)((0,i.iH)(s.db,`/bases/${a}/info/`),{createdAt:(new Date).getTime()}),t.recordsId=a;const e={};return e[`/users/${a}/`]=t,(0,i.Vx)((0,i.iH)(s.db),e)}console.error("UID is empty or null")}catch(n){console.error(n)}finally{await a()}}async function b(){try{const a=e();if(a){t.recordsId=l.value;const e={};return e[`/users/${a}/`]=t,(0,i.Vx)((0,i.iH)(s.db),e)}console.error("UID is empty or null")}catch(n){console.error(n)}finally{await a()}}async function p(){try{const a=e(),n=await(await(0,i.U2)((0,i.iU)((0,i.iH)(s.db),`users/${a}/`))).val();n&&""!==n.id?(t.firstName=n.firstName,t.id=n.id,t.lastName=n.lastName,t.email=n.email,t.recordsId=n.recordsId):console.error("You are not logged in")}catch(a){console.error(a)}}return{userInfo:t,recordsIdAttach:l,baseId:d,userFullName:m,fetchUserInfo:p,attachUserBase:b,createNewUserBase:v}}))},3256:function(e,a,t){"use strict";t.d(a,{y:function(){return l}});var n=t(1020);const l=(0,n.Q_)("filters",(()=>{const e=(e,a="RUB")=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:a}).format(e),a=(e,a="date")=>{const t={};return a.includes("date")&&(t.day="2-digit",t.month="long",t.year="numeric"),a.includes("time")&&(t.hour="2-digit",t.minute="2-digit",t.second="2-digit"),new Intl.DateTimeFormat("ru-RU",t).format(new Date(e))};return{currencyFilter:e,dateFilter:a}}))},5484:function(e,a,t){"use strict";var n=t(1020);const l=(0,n.WB)();a.Z=l},6135:function(e,a,t){"use strict";t.d(a,{L:function(){return m}});var n=t(1020),l=t(4870),o=t(3396),c=t(123),i=t(2114),s=t(7509),r=t(8834),u=t(5484),d=t(9545);const m=(0,n.Q_)("limits",(()=>{const{transactionsYearFilter:e,transactionsMonthFilter:a}=(0,n.Jk)((0,d.C)(u.Z)),t=(0,l.iH)([]),m=(0,l.iH)(new Date),v=(0,l.iH)(0),b=(0,l.iH)(0),p=(0,o.Fl)((()=>0===t.value.length?[]:t.value[e.value]&&t.value[e.value][a.value]?Object.values(t.value[e.value][a.value]):[])),f=(0,o.Fl)((()=>Object.values(t.value))),y=async e=>{const a={},{baseId:l}=(0,n.Jk)((0,c.m)(u.Z)),o=Object.values(t.value[e.year][e.month]),d=o.find((a=>a.categoryId===e.categoryId)),m=0===e.limit;let v;try{return m&&d?(a[`bases/${l.value}/limits/${e.year}/${e.month}/${d.id}`]=null,(0,i.Vx)((0,s.iH)(r.db),a)):(d?(e.id=d.id,a[`bases/${l.value}/limits/${e.year}/${e.month}/${d.id}`]=e):(v=(0,i.VF)((0,s.iH)(r.db,`bases/${l.value}/limits/${e.year}/${e.month}/`)),"string"===typeof v.key&&(e.id=v.key),a[`bases/${l.value}/limits/${e.year}/${e.month}/${e.id}`]=e),(0,i.Vx)((0,s.iH)(r.db),a))}catch(b){console.error(b)}},_=async()=>{try{const{baseId:e}=(0,n.Jk)((0,c.m)(u.Z)),a=(0,s.iH)(r.db,`bases/${e.value}/limits/`);(0,i.jM)(a,(async e=>{e.exists()?t.value=e.val():b.value<5?setTimeout((()=>{b.value++,_()}),100*(b.value+1)):(t.value=[],console.error("Не существует пути до ЛИМИТОВ"))}))}catch(e){console.error(e)}};return{limitsYearMonth:p,setLimitValue:v,today:m,limits:f,pushNewLimit:y,subscribeToLimits:_}}))},3060:function(e,a,t){"use strict";t.d(a,{e:function(){return u}});var n=t(1020),l=t(4870),o=t(3396),c=t(123),i=t(8263),s=t(1520),r=t(9545);const u=(0,n.Q_)("status",(()=>{const e=(0,l.iH)(!1),a=(0,l.iH)(!0),t=(0,o.Fl)((()=>{const{userInfo:e}=(0,n.Jk)((0,c.m)());return""!==e.value.recordsId})),u=(0,o.Fl)((()=>{const{accounts:e}=(0,n.Jk)((0,i.o)());return e.value.length>0})),d=(0,o.Fl)((()=>{const{categories:e}=(0,n.Jk)((0,s.x)());return e.value.length>0})),m=(0,o.Fl)((()=>{const{transactions:e}=(0,n.Jk)((0,r.C)());return e.value.length>0})),v=(0,o.Fl)((()=>t.value&&u.value&&d.value));return{isGlobalLoading:e,isDataNeeded:a,areBaseAndCategoriesReady:v,isBaseReady:t,isAccountExist:u,isCategoryExist:d,isTransactionExist:m}}))},9545:function(e,a,t){"use strict";t.d(a,{C:function(){return u}});var n=t(1020),l=t(4870),o=t(3396),c=t(123),i=t(7509),s=t(8834),r=t(2114);const u=(0,n.Q_)("transactions",(()=>{const e=(0,l.iH)([]),a=(0,l.iH)(""),t=(0,l.iH)(0),u=(0,l.iH)((new Date).getTime()),d=(0,l.iH)((new Date).getMonth()),m=(0,l.iH)((new Date).getFullYear()),v=(0,o.Fl)((()=>Object.values(e.value))),b=(0,o.Fl)((()=>12!==d.value?v.value.filter((e=>new Date(e.date).getFullYear()===m.value)).filter((e=>new Date(e.date).getMonth()===d.value)).sort(((e,a)=>a.date-e.date)):v.value.filter((e=>new Date(e.date).getFullYear()===m.value)).sort(((e,a)=>a.date-e.date)))),p=(0,o.Fl)((()=>12!==d.value?v.value.filter((e=>"outcome"===e.type)).filter((e=>new Date(e.date).getFullYear()===m.value)).filter((e=>new Date(e.date).getMonth()===d.value)):v.value.filter((e=>"outcome"===e.type)).filter((e=>new Date(e.date).getFullYear()===m.value)))),f=(0,o.Fl)((()=>v.value.find((e=>e.id===a.value)))),y=e=>{u.value=e.getTime()},_=async e=>{const{baseId:a,userFullName:t}=(0,n.Jk)((0,c.m)()),l={account:e.account,accountId:e.accountId,amount:e.amount,author:t.value,category:e.category,categoryId:e.categoryId,createdAt:(new Date).getTime(),date:e.date,description:e.description,id:"",isForecast:e.date>(new Date).getTime(),isNotPlanned:e.isNotPlanned,readonly:e.readonly,type:e.type};try{const e=(0,r.VF)((0,i.iH)(s.db,`bases/${a.value}/transactions/`));if(l.id=e.key,l.isForecast)await(0,r.t8)(e,l);else{switch(l.type){case"transfer":await h(l,a.value);break;case"outcome":await g(l,a.value);break;default:await w(l,a.value);break}await(0,r.t8)(e,l)}}catch(o){console.error(o)}},w=async(e,a)=>{if(!a&&!e)return;const t={},n=(0,i.iH)(s.db,`bases/${a}/accounts/${e.accountId}`),l=await(await(0,r.U2)(n)).val();return l.balance+=e.amount,l.balance=Number(l.balance.toFixed(2)),t[`bases/${a}/accounts/${e.accountId}`]=l,(0,r.Vx)((0,i.iH)(s.db),t)},g=async(e,a)=>{if(!a&&!e)return;const t={},n=(0,i.iH)(s.db,`bases/${a}/accounts/${e.accountId}`),l=await(await(0,r.U2)(n)).val();return l.balance-=e.amount,l.balance=Number(l.balance.toFixed(2)),t[`bases/${a}/accounts/${e.accountId}`]=l,(0,r.Vx)((0,i.iH)(s.db),t)},h=async(e,a)=>{if(!a&&!e)return;const t={},n=(0,i.iH)(s.db,`bases/${a}/accounts/${e.accountId}`),l=await(await(0,r.U2)(n)).val();l.balance-=e.amount,l.balance=Number(l.balance.toFixed(2)),t[`bases/${a}/accounts/${e.accountId}`]=l;const o=(0,i.iH)(s.db,`bases/${a}/accounts/${e.categoryId}`),c=await(await(0,r.U2)(o)).val();return c.balance+=e.amount,c.balance=Number(c.balance.toFixed(2)),t[`bases/${a}/accounts/${e.categoryId}`]=c,(0,r.Vx)((0,i.iH)(s.db),t)},k=async e=>{if(!f.value)return;if(!e)return;const a=f.value,{baseId:t,userFullName:l}=(0,n.Jk)((0,c.m)()),o={},u="transfer"===a.type,d=a.accountId===e.accountId,m=a.categoryId===e.categoryId;try{const n=(0,i.iH)(s.db,`bases/${t.value}/accounts/${a.accountId}`),c=await(await(0,r.U2)(n)).val(),v=(0,i.iH)(s.db,`bases/${t.value}/accounts/${a.categoryId}`),b=await(await(0,r.U2)(v)).val();a.isForecast||("income"===a.type?(c.balance-=a.amount,c.balance=Number(c.balance.toFixed(2))):"outcome"===a.type?(c.balance+=a.amount,c.balance=Number(c.balance.toFixed(2))):u&&(c.balance+=a.amount,c.balance=Number(c.balance.toFixed(2)),b.balance-=a.amount,b.balance=Number(b.balance.toFixed(2)),o[`bases/${t.value}/accounts/${b.id}`]=b),o[`bases/${t.value}/accounts/${c.id}`]=c),Object.keys(a).forEach((t=>{Object.hasOwn(e,t)&&(a[t]=e[t]),"author"===t&&(a[t]=l.value),"isForecast"===t&&(a[t]=a.date>(new Date).getTime())})),o[`bases/${t.value}/transactions/${a.id}`]=a;let p=c,f=b;if(!a.isForecast){if(u){if(d&&m)p=c,f=b;else if(d&&!m){p=c;const e=(0,i.iH)(s.db,`bases/${t.value}/accounts/${a.categoryId}`);f=await(await(0,r.U2)(e)).val()}else if(!d&&m){const e=(0,i.iH)(s.db,`bases/${t.value}/accounts/${a.accountId}`);p=await(await(0,r.U2)(e)).val(),f=b}else if(!d&&!m){const e=(0,i.iH)(s.db,`bases/${t.value}/accounts/${a.accountId}`);p=await(await(0,r.U2)(e)).val();const n=(0,i.iH)(s.db,`bases/${t.value}/accounts/${a.categoryId}`);f=await(await(0,r.U2)(n)).val()}}else if(d)p=c;else{const e=(0,i.iH)(s.db,`bases/${t.value}/accounts/${a.accountId}`);p=await(await(0,r.U2)(e)).val()}"income"===a.type?(p.balance+=a.amount,p.balance=Number(p.balance.toFixed(2))):"outcome"===a.type?(p.balance-=a.amount,p.balance=Number(p.balance.toFixed(2))):u&&(p.balance-=a.amount,p.balance=Number(p.balance.toFixed(2)),f.balance+=a.amount,f.balance=Number(f.balance.toFixed(2)),o[`bases/${t.value}/accounts/${f.id}`]=f),o[`bases/${t.value}/accounts/${p.id}`]=p}return(0,r.Vx)((0,i.iH)(s.db),o)}catch(v){console.error(v)}},$=async()=>{if(!f.value)return;const e={},{baseId:a}=(0,n.Jk)((0,c.m)());try{const t=(0,i.iH)(s.db,`bases/${a.value}/accounts/${f.value.accountId}`),n=(0,i.iH)(s.db,`bases/${a.value}/transactions/${f.value.id}`),l=await(await(0,r.U2)(t)).val(),o=await(await(0,r.U2)(n)).val();return l.balance=Number((l.balance-o.amount).toFixed(2)),o.isForecast=!1,e[`bases/${a.value}/accounts/${l.id}`]=l,e[`bases/${a.value}/transactions/${o.id}`]=o,(0,r.Vx)((0,i.iH)(s.db),e)}catch(t){console.log(t)}},U=async()=>{if(f.value)try{const{baseId:e}=(0,n.Jk)((0,c.m)()),t=(0,i.iH)(s.db,`bases/${e.value}/transactions/${a.value}`),l=(0,i.iH)(s.db,`bases/${e.value}/accounts/${f.value.accountId}`),o=await(await(0,r.U2)(l)).val();let u;if(!f.value?.isForecast){if("income"===f.value.type)o.balance-=f.value.amount,o.balance=Number(o.balance.toFixed(2));else if("outcome"===f.value.type)o.balance+=f.value.amount,o.balance=Number(o.balance.toFixed(2));else if("transfer"===f.value.type){const a=(0,i.iH)(s.db,`bases/${e.value}/accounts/${f.value?.categoryId}`);u=await(await(0,r.U2)(a)).val(),o.balance+=f.value.amount,o.balance=Number(o.balance.toFixed(2)),u.balance-=f.value.amount,u.balance=Number(u.balance.toFixed(2)),await(0,r.t8)(a,u)}await(0,r.t8)(l,o)}a.value="",await(0,r.t8)(t,null)}catch(e){console.error(e)}},D=async()=>{try{const{baseId:a}=(0,n.Jk)((0,c.m)()),l=(0,i.iH)(s.db,`bases/${a.value}/transactions/`);(0,r.jM)(l,(async a=>{a.exists()?e.value=a.val():t.value<5?setTimeout((()=>{t.value++,D()}),100*(t.value+1)):(e.value=[],console.error("Не существует пути до ТРАНЗАКЦИЙ"))}))}catch(a){console.error(a)}};return{transactions:v,selectedTransactionId:a,selectedTransaction:f,transactionDate:u,transactionsMonthFilter:d,transactionsYearFilter:m,transactionsSortedByDate:b,outcomeTransactions:p,pushNewTransaction:_,editTransaction:k,changeTransactionToRegular:$,deleteTransaction:U,subscribeToTransactions:D,getNewDate:y}}))},8834:function(e,a,t){"use strict";t.d(a,{I:function(){return s},db:function(){return r}});var n=t(7795),l=t(4690),o=t(2114);const c={apiKey:"AIzaSyDYNJW9zQZPj0XGCU_jinDaqUWB4-c3Xa8",authDomain:"money-catcher-65750.firebaseapp.com",projectId:"money-catcher-65750",storageBucket:"money-catcher-65750.appspot.com",messagingSenderId:"413859778767",appId:"1:413859778767:web:ba8898f1e968b6e68d27ba",measurementId:"G-SPDWJ2B7P9",databaseURL:"https://money-catcher-65750-default-rtdb.europe-west1.firebasedatabase.app/"},i=(0,n.ZF)(c),s=(0,l.v0)(i),r=(0,o.N8)(i)},2115:function(e,a,t){var n={"./MainLayout.vue":[6948,948],"./WideLayout.vue":[8743,743]};function l(e){if(!t.o(n,e))return Promise.resolve().then((function(){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=n[e],l=a[0];return t.e(a[1]).then((function(){return t(l)}))}l.keys=function(){return Object.keys(n)},l.id=2115,e.exports=l}},a={};function t(n){var l=a[n];if(void 0!==l)return l.exports;var o=a[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(a,n,l,o){if(!n){var c=1/0;for(u=0;u<e.length;u++){n=e[u][0],l=e[u][1],o=e[u][2];for(var i=!0,s=0;s<n.length;s++)(!1&o||c>=o)&&Object.keys(t.O).every((function(e){return t.O[e](n[s])}))?n.splice(s--,1):(i=!1,o<c&&(c=o));if(i){e.splice(u--,1);var r=l();void 0!==r&&(a=r)}}return a}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,l,o]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(a,n){return t.f[n](e,a),a}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{156:"f5eea17e",177:"e2fa49f2",212:"797f8595",442:"5a5cac84",478:"7a25bd24",655:"aeb37909",685:"69ebc9f3",743:"5b9625b9",772:"03a9d37e",944:"e4ef0245",948:"6fd1bb99"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+"."+{177:"aace4cdc",212:"312c0cfb",442:"ddd7a6a3",478:"b197f489",655:"aba2ddee",685:"6a257267",743:"a9a91eb7",772:"484841c9",948:"9f68ca41"}[e]+".css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="money-catcher:";t.l=function(n,l,o,c){if(e[n])e[n].push(l);else{var i,s;if(void 0!==o)for(var r=document.getElementsByTagName("script"),u=0;u<r.length;u++){var d=r[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==a+o){i=d;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,t.nc&&i.setAttribute("nonce",t.nc),i.setAttribute("data-webpack",a+o),i.src=n),e[n]=[l];var m=function(a,t){i.onerror=i.onload=null,clearTimeout(v);var l=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),l&&l.forEach((function(e){return e(t)})),a)return a(t)},v=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),s&&document.head.appendChild(i)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,a,t,n,l){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var c=function(t){if(o.onerror=o.onload=null,"load"===t.type)n();else{var c=t&&t.type,i=t&&t.target&&t.target.href||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+c+": "+i+")");s.name="ChunkLoadError",s.code="CSS_CHUNK_LOAD_FAILED",s.type=c,s.request=i,o.parentNode&&o.parentNode.removeChild(o),l(s)}};return o.onerror=o.onload=c,o.href=a,t?t.parentNode.insertBefore(o,t.nextSibling):document.head.appendChild(o),o},a=function(e,a){for(var t=document.getElementsByTagName("link"),n=0;n<t.length;n++){var l=t[n],o=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(o===e||o===a))return l}var c=document.getElementsByTagName("style");for(n=0;n<c.length;n++){l=c[n],o=l.getAttribute("data-href");if(o===e||o===a)return l}},n=function(n){return new Promise((function(l,o){var c=t.miniCssF(n),i=t.p+c;if(a(c,i))return l();e(n,i,null,l,o)}))},l={143:0};t.f.miniCss=function(e,a){var t={177:1,212:1,442:1,478:1,655:1,685:1,743:1,772:1,948:1};l[e]?a.push(l[e]):0!==l[e]&&t[e]&&a.push(l[e]=n(e).then((function(){l[e]=0}),(function(a){throw delete l[e],a})))}}}(),function(){var e={143:0};t.f.j=function(a,n){var l=t.o(e,a)?e[a]:void 0;if(0!==l)if(l)n.push(l[2]);else{var o=new Promise((function(t,n){l=e[a]=[t,n]}));n.push(l[2]=o);var c=t.p+t.u(a),i=new Error,s=function(n){if(t.o(e,a)&&(l=e[a],0!==l&&(e[a]=void 0),l)){var o=n&&("load"===n.type?"missing":n.type),c=n&&n.target&&n.target.src;i.message="Loading chunk "+a+" failed.\n("+o+": "+c+")",i.name="ChunkLoadError",i.type=o,i.request=c,l[1](i)}};t.l(c,s,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,n){var l,o,c=n[0],i=n[1],s=n[2],r=0;if(c.some((function(a){return 0!==e[a]}))){for(l in i)t.o(i,l)&&(t.m[l]=i[l]);if(s)var u=s(t)}for(a&&a(n);r<c.length;r++)o=c[r],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(u)},n=self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(4748)}));n=t.O(n)})();