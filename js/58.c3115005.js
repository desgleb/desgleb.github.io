"use strict";(self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[]).push([[58],{3058:function(e,l,t){t.r(l),t.d(l,{default:function(){return C}});var r=t(3396),i=t(4870),s=t(7139),n=t(1020),a=t(1520),o=t(9545),c=t(6135),d=t(3256);const u=(0,r._)("h3",null,"Планирование",-1),g={key:0,class:"row"},k={class:"col"},m=(0,r._)("p",null,"У Вас нет ни одной расходной категории.",-1),v={key:1,class:"row"},w={class:"col"},p=["disabled"],_=(0,r._)("i",{class:"material-icons right"},"calculate",-1),y={key:2},h={key:0},b={key:0,class:"red-text"},U={class:"progress"};var f=(0,r.aZ)({__name:"PlanningView",setup(e){const{categoriesAvailableForLimitation:l}=(0,n.Jk)((0,a.x)()),{outcomeTransactionsInThisMonth:t}=(0,n.Jk)((0,o.C)()),{limits:f}=(0,n.Jk)((0,c.L)()),{currencyFilter:D}=(0,d.y)(),C=(0,r.Fl)((()=>l.value.map((e=>{const l=t.value.filter((l=>l.categoryId===e.id)).reduce(((e,l)=>Number((e+=+l.amount).toFixed(2))),0),r=f.value.find((l=>l.categoryId===e.id));let i;i=r?r.limit:0;const s=Number((l-i).toFixed(2)),n=i>0?100*l/i:i,a=n>100?100:n,o=n<80?"green":n<100?"yellow":"red";return{...e,spend:l,limit:i,overspend:s,progressPercent:a,progressColor:o}}))));return(e,t)=>{const n=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[u,0===(0,i.SU)(l).length?((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",k,[m,(0,r._)("p",null,[(0,r.Uk)("Добавьте хотя бы одну расходную "),(0,r.Wm)(n,{to:"/categories"},{default:(0,r.w5)((()=>[(0,r.Uk)("категорию")])),_:1})])])])):((0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("div",w,[(0,r._)("button",{disabled:0===(0,i.SU)(l).length,class:"btn modal-trigger","data-target":"modalSetLimit"},[_,(0,r.Uk)(" Установить лимит ")],8,p)])])),C.value.length>0?((0,r.wg)(),(0,r.iD)("section",y,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(C.value,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id},[e?((0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("p",null,[(0,r._)("strong",null,(0,s.zw)(e.name),1),(0,r.Uk)(" "+(0,s.zw)((0,i.SU)(D)(e.spend))+" из "+(0,s.zw)((0,i.SU)(D)(e.limit))+" ",1),e.overspend>0?((0,r.wg)(),(0,r.iD)("small",b,"Перерасход на "+(0,s.zw)((0,i.SU)(D)(e.overspend)),1)):(0,r.kq)("",!0)]),(0,r._)("div",U,[(0,r._)("div",{class:(0,s.C_)([[e.progressColor],"determinate"]),style:(0,s.j5)({width:e.progressPercent+"%"})},null,6)])])):(0,r.kq)("",!0)])))),128))])):(0,r.kq)("",!0)],64)}}});const D=f;var C=D}}]);
//# sourceMappingURL=58.c3115005.js.map