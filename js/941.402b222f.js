"use strict";(self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[]).push([[941],{5509:function(e,t,l){l.d(t,{$:function(){return a}});const a=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},24:function(e,t,l){l.d(t,{A:function(){return b}});var a=l(6768),n=l(144),r=l(4232),s=l(5130),o=l(6995),i=l(3367),u=l(5509),c=l(8078);const d={class:"input-field"},v={key:0,selected:"",value:"12"},k=["value"],m=(0,a.Lk)("label",null,"Фильтрация по месяцам",-1);var p=(0,a.pM)({__name:"MonthSelectComponent",props:{showAll:{type:Boolean}},setup(e){const{transactionsMonthFilter:t}=(0,i.bP)((0,o.G)()),{selectedCategoryId:l}=(0,i.bP)((0,c.d)()),p=(0,n.KR)(),L=(0,n.KR)();return(0,a.sV)((()=>{L.value=M.FormSelect.init(p.value)})),(0,a.$u)((()=>{l.value=""})),(e,l)=>((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bo)((0,a.Lk)("select",{ref_key:"monthSelect",ref:p,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.i9)(t)?t.value=e:null)},[e.$props.showAll?((0,a.uX)(),(0,a.CE)("option",v,"Показать всё")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(u.$),((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:t,value:t},(0,r.v_)(e),9,k)))),128))],512),[[s.u1,(0,n.R1)(t),void 0,{number:!0}]]),m]))}});const L=p;var b=L},2122:function(e,t,l){l.d(t,{A:function(){return L}});l(4114);var a=l(6768),n=l(144),r=l(4232),s=l(5130),o=l(6995),i=l(3367),u=l(2132),c=l(8078);const d={class:"input-field"},v=["value"],k=(0,a.Lk)("label",null,"Фильтрация по годам",-1);var m=(0,a.pM)({__name:"YearSelectComponent",setup(e){const{transactions:t,transactionsYearFilter:l}=(0,i.bP)((0,o.G)()),{selectedCategoryId:m}=(0,i.bP)((0,c.d)()),{isGlobalLoading:p}=(0,i.bP)((0,u.X)());p.value=!0;const L=(0,n.KR)(),b=(0,n.KR)(),g=(0,a.EW)((()=>{const e=[],l=new Set;l.add((new Date).getFullYear()),t.value.forEach((e=>{const t=new Date(e.date).getFullYear();l.add(t)}));const a=Math.max.apply(null,Array.from(l))+1;l.add(a);const n=Array.from(l).sort(((e,t)=>e-t));return n.forEach((t=>{const l={year:t,id:Math.floor(1e6*Math.random())};e.push(l)})),p.value=!1,e}));return(0,a.sV)((()=>{b.value=M.FormSelect.init(L.value)})),(0,a.$u)((()=>{m.value="",b.value=M.FormSelect.init(L.value)})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bo)((0,a.Lk)("select",{ref_key:"yearSelect",ref:L,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.i9)(l)?l.value=e:null)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.value,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.year},(0,r.v_)(e.year),9,v)))),128))],512),[[s.u1,(0,n.R1)(l),void 0,{number:!0}]]),k]))}});const p=m;var L=p},3941:function(e,t,l){l.r(t),l.d(t,{default:function(){return q}});var a=l(6768),n=l(144),r=l(4232),s=l(24),o=l(2122),i=l(3367),u=l(8078),c=l(6995),d=l(6459);const v=e=>((0,a.Qi)("data-v-b8b5bfe6"),e=e(),(0,a.jt)(),e),k=v((()=>(0,a.Lk)("h3",null,"Планирование",-1))),m=v((()=>(0,a.Lk)("hr",null,null,-1))),p={key:0,class:"row"},L={class:"col"},b=v((()=>(0,a.Lk)("p",null,"У Вас нет ни одной расходной категории.",-1))),g={key:1,class:"row"},h={key:0,class:"red-text"},f={key:2},y={class:"row valign-wrapper"},C={class:"col s12 m4"},E=["disabled"],_=v((()=>(0,a.Lk)("i",{class:"material-icons right"},"calculate",-1))),F={class:"col s12 m2 offset-m3"},w={class:"col s12 m3"},R={class:"row scrollable"},X={key:0,class:"row"},x={key:0,class:"red-text"},M={class:"progress"},T={class:"highlight centered responsive-table"},A=v((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Дата"),(0,a.Lk)("th",null,"Счёт"),(0,a.Lk)("th",null,"Сумма"),(0,a.Lk)("th",{class:"fixed-width"},"Комментарий"),(0,a.Lk)("th",{class:"fixed-width"},"Действия")])],-1))),K={class:"row mb-0 flex-center"},P={class:"col"},S=["id"],W=v((()=>(0,a.Lk)("i",{class:"material-icons"},"done_all",-1))),I=[W],N={class:"col"},Q=["id","data-target"],G=v((()=>(0,a.Lk)("i",{class:"material-icons"},"edit",-1))),V=[G],$={class:"col"},D=["id"],Y=v((()=>(0,a.Lk)("i",{class:"material-icons"},"delete",-1))),U=[Y];var B=(0,a.pM)({__name:"PlanningView",setup(e){const{categoriesAvailableForLimitation:t,limitCategories:l}=(0,i.bP)((0,u.d)()),{selectedTransactionId:v,transactionsMonthFilter:W}=(0,i.bP)((0,c.G)()),{changeTransactionToRegular:G}=(0,c.G)(),{currencyFilter:Y,dateFilter:B}=(0,d.c)(),j=(0,a.EW)((()=>{if(12===W.value){let e=l.value.reduce(((e,t)=>Number((e+t.limit).toFixed(2))),0);return e*=W.value,e}return l.value.reduce(((e,t)=>Number((e+t.limit).toFixed(2))),0)})),O=(0,a.EW)((()=>l.value.reduce(((e,t)=>Number((e+t.spend).toFixed(2))),0))),q=(0,a.EW)((()=>l.value.reduce(((e,t)=>Number((e+t.overspend).toFixed(2))),0))),z=e=>{let t;t="BUTTON"===e.target.tagName?e.target:e.target.parentElement,v.value=t.id};let H=0;const J=async e=>{const t=e;try{if(H++,z(t),!v.value)return;await G()}catch(l){console.log(l),H<5&&setTimeout((()=>J(t)),100)}};return(e,i)=>{const u=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[k,m,0===(0,n.R1)(t).length?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("div",L,[b,(0,a.Lk)("p",null,[(0,a.eW)("Добавьте хотя бы одну расходную "),(0,a.bF)(u,{to:"/categories"},{default:(0,a.k6)((()=>[(0,a.eW)("категорию")])),_:1})])])])):((0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("h5",null,[(0,a.eW)(" Запланировано: "+(0,r.v_)((0,n.R1)(Y)(j.value))+". Израсходовано: "+(0,r.v_)((0,n.R1)(Y)(O.value))+". ",1),q.value>0?((0,a.uX)(),(0,a.CE)("small",h," Перерасход: "+(0,r.v_)((0,n.R1)(Y)(q.value)),1)):(0,a.Q3)("",!0)])])),(0,n.R1)(l).length>0?((0,a.uX)(),(0,a.CE)("section",f,[(0,a.Lk)("div",y,[(0,a.Lk)("div",C,[(0,a.Lk)("button",{disabled:0===(0,n.R1)(t).length,class:"btn modal-trigger","data-target":"modalSetLimit"},[_,(0,a.eW)(" Установить лимит ")],8,E)]),(0,a.Lk)("div",F,[(0,a.bF)(o.A)]),(0,a.Lk)("div",w,[(0,a.bF)(s.A,{"show-all":!0})])]),(0,a.Lk)("div",R,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(l),(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id},[e&&(e.limit>0||e.records.length>0||e.spend>0)?((0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,(0,r.v_)(e.name),1),(0,a.eW)(" "+(0,r.v_)((0,n.R1)(Y)(e.spend))+" из "+(0,r.v_)((0,n.R1)(Y)(e.limit))+" ",1),e.overspend>0?((0,a.uX)(),(0,a.CE)("small",x,"Перерасход на "+(0,r.v_)((0,n.R1)(Y)(e.overspend)),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",M,[(0,a.Lk)("div",{class:(0,r.C4)([[e.progressColor],"determinate"]),style:(0,r.Tr)({width:e.progressPercent+"%"})},null,6)]),(0,a.Lk)("table",T,[A,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.records,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",{class:(0,r.C4)({"red-text":e.date<(new Date).getTime()})},(0,r.v_)((0,n.R1)(B)(e["date"])),3),(0,a.Lk)("td",null,(0,r.v_)(e["account"]),1),(0,a.Lk)("td",null,(0,r.v_)((0,n.R1)(Y)(e["amount"])),1),(0,a.Lk)("td",null,(0,r.v_)(e["description"]),1),(0,a.Lk)("td",null,[(0,a.Lk)("div",K,[(0,a.Lk)("div",P,[(0,a.Lk)("button",{id:e.id,class:"green btn",onClick:J},I,8,S)]),(0,a.Lk)("div",N,[(0,a.Lk)("button",{id:e.id,"data-target":"transfer"===e.type?"modalEditTransfer":"modalEditTransaction",class:"yellow btn modal-trigger black-text",onClick:z},V,8,Q)]),(0,a.Lk)("div",$,[(0,a.Lk)("button",{id:e.id,class:"red btn modal-trigger","data-target":"modalDeleteTransaction",onClick:z},U,8,D)])])])])))),128))])])])):(0,a.Q3)("",!0)])))),128))])])):(0,a.Q3)("",!0)],64)}}}),j=l(1241);const O=(0,j.A)(B,[["__scopeId","data-v-b8b5bfe6"]]);var q=O}}]);