(function(){"use strict";var e={2535:function(e,a,t){var n=t(5484),o=t(9242),l=t(3396),c=t(4870),i=t(7139),s=t(6175),r=t(8834),u=t(1020),d=t(3256),m=t(123),v=t(8263),p=t(3060);const f={class:"green darken-4"},b={class:"nav-wrapper"},y={id:"nav-mobile",class:"left hide-on-med-and-down"},g=["onClick"],_={key:0};var w=(0,l.aZ)({__name:"NavBarComponent",setup(e){const a=(0,s.G)(),{totalBalance:t}=(0,u.Jk)(a),{currencyFilter:n}=(0,d.y)(),{isDataNeeded:w}=(0,u.Jk)((0,p.e)()),{fetchUserInfo:h}=(0,m.m)(),{subscribeToAccounts:k}=(0,v.o)(),A=(0,c.qj)([{name:"Главная",path:"/",isAuthRequired:!0},{name:"Планирование",path:"/planning",isAuthRequired:!0},{name:"Операции",path:"/records",isAuthRequired:!0},{name:"Категории",path:"/categories",isAuthRequired:!0},{name:"Счета",path:"/accounts",isAuthRequired:!0},{name:r.I.currentUser?.displayName||"Профиль",path:"/profile",isAuthRequired:!0},{name:"Регистрация",path:"/register",isAuthRequired:!1},{name:"Войти",path:"/login",isAuthRequired:!1}]),D=(0,c.iH)(location.pathname),U=e=>{e.target.offsetParent.querySelectorAll("li").forEach((e=>{e.classList.remove("active")})),e.target.parentElement.classList.add("active")};return(e,a)=>{const s=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("nav",f,[(0,l._)("div",b,[(0,l._)("ul",y,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(A,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.path,class:(0,i.C_)({active:D.value===e.path}),onClick:(0,o.iM)(U,["prevent"])},[e.isAuthRequired===!!(0,c.SU)(r.I).currentUser?((0,l.wg)(),(0,l.j4)(s,{key:0,to:e.path},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.name)+" ",1),"Счета"===e.name?((0,l.wg)(),(0,l.iD)("span",_,"| "+(0,i.zw)((0,c.SU)(n)((0,c.SU)(t))),1)):(0,l.kq)("",!0)])),_:2},1032,["to"])):(0,l.kq)("",!0)],10,g)))),128))])])])}}}),h=t(89);const k=(0,h.Z)(w,[["__scopeId","data-v-804eec66"]]);var A=k;const D={class:"progress"},U=(0,l._)("div",{class:"indeterminate"},null,-1),I=[U];function N(e,a){return(0,l.wg)(),(0,l.iD)("div",D,I)}const C={},S=(0,h.Z)(C,[["render",N]]);var H=S,$=t(6252);const x={key:1,class:"container green lighten-5"};var F=(0,l.aZ)({__name:"MainLayout",setup(e){const{componentKey:a}=(0,u.Jk)((0,$.t)()),{isGlobalLoading:t}=(0,u.Jk)((0,p.e)());return(e,n)=>{const o=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[((0,l.wg)(),(0,l.j4)(A,{key:(0,c.SU)(a)})),(0,c.SU)(t)?((0,l.wg)(),(0,l.j4)(H,{key:0})):((0,l.wg)(),(0,l.iD)("div",x,[(0,l.Wm)(o)]))],64)}}});const T=F;var q=T,J=t(4219),B=t(5420);const Z=e=>((0,l.dD)("data-v-5f266b68"),e=e(),(0,l.Cn)(),e),E={class:"modal-content"},j=Z((()=>(0,l._)("h4",null,"Добавление нового счёта",-1))),V=Z((()=>(0,l._)("p",null,"Добавьте новый счёт для Вашей базы. Он понадобиться Вам для создания операция дохода и расхода.",-1))),z=Z((()=>(0,l._)("p",null,"Введите название Вашего нового счёта.",-1))),L=Z((()=>(0,l._)("button",{class:"btn modal-close-btn modal-close red"},[(0,l._)("i",{class:"large material-icons"},"close")],-1))),O={class:"mc-form-category"},W={class:"row"},R={class:"input-field col s12"},P=Z((()=>(0,l._)("i",{class:"material-icons prefix"},"mode_edit",-1))),Y=Z((()=>(0,l._)("label",{for:"accountNameNew"},"Название нового счёта",-1))),K={key:0,class:"helper-text red-text"},G={key:1,class:"helper-text red-text"},Q={class:"row"},X={class:"input-field col s12 m6"},ee=Z((()=>(0,l._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),ae=Z((()=>(0,l._)("label",{for:"amount"},"Баланс счёта",-1))),te={class:"col s12 m6"},ne=Z((()=>(0,l._)("span",null,"Учитывать в общем балансе",-1))),oe=["onClick"],le=Z((()=>(0,l._)("i",{class:"material-icons right"},"add_circle_outline",-1)));var ce=(0,l.aZ)({__name:"AddAccountComponent",setup(e){const a=(0,c.iH)(null),t=(0,c.iH)(),{pushNewAccount:n}=(0,v.o)(),s=(0,c.iH)(2),r=(0,c.qj)({accountName:"",balance:0,isCountable:!0}),u={accountName:{required:B.BM.withMessage("Поле НАЗВАНИЕ СЧЁТА является обязательным.",B.C1),minLength:B.BM.withMessage((({$params:e})=>`Длина названия счёта должна быть не менее, чем ${e.min} символа.`),(0,B.Ei)(s))}},d=(0,J.Xw)(u,r),m=(0,l.Fl)((()=>d.value.accountName.$dirty&&d.value.accountName.required.$invalid)),p=(0,l.Fl)((()=>d.value.accountName.$dirty&&d.value.accountName.minLength.$invalid)),f=async()=>{if(d.value.$invalid)return void d.value.$touch();const e={accountName:r.accountName,balance:r.balance,isCountable:r.isCountable};try{await n(e)}catch(a){}finally{r.accountName="",t.value.close()}};return(0,l.bv)((()=>{t.value=M.Modal.init(a.value)})),(0,l.Jd)((()=>{t.value.destroy()})),(e,t)=>((0,l.wg)(),(0,l.iD)("div",{id:"modalAddAccount",ref_key:"addAccountModal",ref:a,class:"modal"},[(0,l._)("div",E,[j,V,z,L,(0,l._)("form",O,[(0,l._)("div",W,[(0,l._)("div",R,[P,(0,l.wy)((0,l._)("input",{id:"accountNameNew","onUpdate:modelValue":t[0]||(t[0]=e=>r.accountName=e),class:(0,i.C_)({invalid:m.value||p.value}),type:"text"},null,2),[[o.nr,r.accountName,void 0,{trim:!0}]]),Y,m.value?((0,l.wg)(),(0,l.iD)("small",K,(0,i.zw)((0,c.SU)(d).accountName.required.$message),1)):p.value?((0,l.wg)(),(0,l.iD)("small",G,(0,i.zw)((0,c.SU)(d).accountName.minLength.$message),1)):(0,l.kq)("",!0)])]),(0,l._)("div",Q,[(0,l._)("div",X,[ee,(0,l.wy)((0,l._)("input",{id:"amount","onUpdate:modelValue":t[1]||(t[1]=e=>r.balance=e),step:"0.01",type:"number"},null,512),[[o.nr,r.balance,void 0,{number:!0}]]),ae]),(0,l._)("div",te,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.isCountable=e),class:"filled-in",type:"checkbox"},null,512),[[o.e8,r.isCountable]]),ne])])]),(0,l._)("button",{class:"mc-button-submit btn",name:"action",type:"submit",onClick:(0,o.iM)(f,["prevent"])},[(0,l.Uk)("Добавить "),le],8,oe)])])],512))}});const ie=(0,h.Z)(ce,[["__scopeId","data-v-5f266b68"]]);var se=ie;const re=e=>((0,l.dD)("data-v-6b6f1a90"),e=e(),(0,l.Cn)(),e),ue={class:"modal-content"},de=re((()=>(0,l._)("p",null,"Вы действительно хотите удалить этот счёт?",-1))),me=re((()=>(0,l._)("p",null,"Для удаления счёт введите его название в поле ниже.",-1))),ve=re((()=>(0,l._)("button",{class:"btn modal-close-btn modal-close"},[(0,l._)("i",{class:"large material-icons"},"close")],-1))),pe={class:"mc-form-category"},fe={class:"row"},be={class:"input-field col s12"},ye=re((()=>(0,l._)("i",{class:"material-icons prefix"},"mode_edit",-1))),ge=re((()=>(0,l._)("label",{for:"deleteAccountNameField"},"Название нового счёта",-1))),_e={key:0,class:"helper-text red-text"},we=["disabled","onClick"],he=re((()=>(0,l._)("i",{class:"material-icons right"},"delete_forever",-1)));var ke=(0,l.aZ)({__name:"DeleteAccountComponent",setup(e){const a=(0,c.iH)(!1),t=(0,c.iH)(null),n=(0,c.iH)(),{deleteAccount:s}=(0,v.o)(),{selectedAccountName:r}=(0,u.Jk)((0,v.o)()),d=()=>{a.value=p.deleteAccount===r.value},m=()=>{s(),n.value.close()},p=(0,c.qj)({deleteAccount:""}),f={deleteAccount:{required:B.BM.withMessage("Для удаления необходимо ввести НАИМЕНОВАНИЕ удаляемого счёта",B.C1)}},b=(0,J.Xw)(f,p),y=(0,l.Fl)((()=>b.value.deleteAccount.$dirty&&b.value.deleteAccount.required.$invalid));return(0,l.bv)((()=>{n.value=M.Modal.init(t.value)})),(0,l.Jd)((()=>{n.value.destroy()})),(e,n)=>((0,l.wg)(),(0,l.iD)("div",{id:"modalDeleteAccount",ref_key:"deleteAccountModal",ref:t,class:"modal"},[(0,l._)("div",ue,[(0,l._)("h4",null,"Удаление счёта "+(0,i.zw)((0,c.SU)(r)),1),de,me,ve,(0,l._)("form",pe,[(0,l._)("div",fe,[(0,l._)("div",be,[ye,(0,l.wy)((0,l._)("input",{onInput:d,id:"deleteAccountNameField","onUpdate:modelValue":n[0]||(n[0]=e=>p.deleteAccount=e),class:(0,i.C_)({invalid:y.value}),type:"text"},null,34),[[o.nr,p.deleteAccount,void 0,{trim:!0}]]),ge,y.value?((0,l.wg)(),(0,l.iD)("small",_e,(0,i.zw)((0,c.SU)(b).deleteAccount.required.$message),1)):(0,l.kq)("",!0)])]),(0,l._)("button",{disabled:!a.value,class:"mc-button-submit btn red",name:"action",type:"submit",onClick:(0,o.iM)(m,["prevent"])},[(0,l.Uk)("Удалить счет "),he],8,we)])])],512))}});const Ae=(0,h.Z)(ke,[["__scopeId","data-v-6b6f1a90"]]);var De=Ae;const Ue=e=>((0,l.dD)("data-v-b989a58c"),e=e(),(0,l.Cn)(),e),Ie={class:"modal-content"},Ne=Ue((()=>(0,l._)("p",null,"Тут Вы можете изменить наименование Вашего счёта",-1))),Ce=Ue((()=>(0,l._)("p",null,"Введите новое наименование Вашего счёта.",-1))),Se=Ue((()=>(0,l._)("button",{class:"btn modal-close-btn modal-close"},[(0,l._)("i",{class:"large material-icons"},"close")],-1))),He={class:"mc-form-category"},$e={class:"row"},xe={class:"input-field col s12"},Fe=Ue((()=>(0,l._)("i",{class:"material-icons prefix"},"mode_edit",-1))),Te=Ue((()=>(0,l._)("label",{for:"accountNameEdit"},"Новое наименование счёта",-1))),Me={key:0,class:"helper-text red-text"},qe={key:1,class:"helper-text red-text"},Je={class:"row"},Be={class:"input-field col s12"},Ze=Ue((()=>(0,l._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),Ee=Ue((()=>(0,l._)("label",{for:"amount"},"Сумма",-1))),je={class:"col s12 m6"},Ve=Ue((()=>(0,l._)("span",null,"Учитывать в общем балансе",-1))),ze=["onClick"],Le=Ue((()=>(0,l._)("i",{class:"material-icons right"},"publish",-1)));var Oe=(0,l.aZ)({__name:"EditAccountComponent",setup(e){const a=(0,c.iH)(null),t=(0,c.iH)(),{selectedAccountName:n,selectedAccountBalance:s}=(0,u.Jk)((0,v.o)()),{changeAccount:r}=(0,v.o)(),d=(0,c.iH)(2),m=(0,c.qj)({accountName:"",balance:0,isCountable:!0}),p={accountName:{required:B.BM.withMessage("Поле НАЗВАНИЕ СЧЁТА является обязательным.",B.C1),minLength:B.BM.withMessage((({$params:e})=>`Длина названия счёта должна быть не менее, чем ${e.min} символа.`),(0,B.Ei)(d))}},f=(0,J.Xw)(p,m),b=(0,l.Fl)((()=>f.value.accountName.$dirty&&f.value.accountName.required.$invalid)),y=(0,l.Fl)((()=>f.value.accountName.$dirty&&f.value.accountName.minLength.$invalid)),g=async()=>{if(f.value.$invalid)return void f.value.$touch();const e={accountName:m.accountName,balance:m.balance,isCountable:m.isCountable};try{await r(e)}catch(a){console.error(a)}finally{m.accountName="",t.value.close()}},_={onOpenStart:()=>{m.accountName=n.value,m.balance=s.value},onOpenEnd:()=>M.updateTextFields()};return(0,l.bv)((()=>{t.value=M.Modal.init(a.value,_)})),(0,l.Jd)((()=>{t.value.destroy()})),(e,t)=>((0,l.wg)(),(0,l.iD)("div",{id:"modalEditAccount",ref_key:"editAccountModal",ref:a,class:"modal"},[(0,l._)("div",Ie,[(0,l._)("h4",null,[(0,l.Uk)("Изменение счёта "),(0,l._)("strong",null,(0,i.zw)((0,c.SU)(n)),1)]),Ne,Ce,Se,(0,l._)("form",He,[(0,l._)("div",$e,[(0,l._)("div",xe,[Fe,(0,l.wy)((0,l._)("input",{id:"accountNameEdit","onUpdate:modelValue":t[0]||(t[0]=e=>m.accountName=e),class:(0,i.C_)({invalid:b.value||y.value}),type:"text"},null,2),[[o.nr,m.accountName,void 0,{trim:!0}]]),Te,b.value?((0,l.wg)(),(0,l.iD)("small",Me,(0,i.zw)((0,c.SU)(f).accountName.required.$message),1)):y.value?((0,l.wg)(),(0,l.iD)("small",qe,(0,i.zw)((0,c.SU)(f).accountName.minLength.$message),1)):(0,l.kq)("",!0)])]),(0,l._)("div",Je,[(0,l._)("div",Be,[Ze,(0,l.wy)((0,l._)("input",{id:"amount","onUpdate:modelValue":t[1]||(t[1]=e=>m.balance=e),step:"0.01",type:"number"},null,512),[[o.nr,m.balance,void 0,{number:!0}]]),Ee]),(0,l._)("div",je,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>m.isCountable=e),class:"filled-in",type:"checkbox"},null,512),[[o.e8,m.isCountable]]),Ve])])]),(0,l._)("button",{class:"mc-button-submit btn",name:"action",type:"submit",onClick:(0,o.iM)(g,["prevent"])},[(0,l.Uk)("Изменить "),Le],8,ze)])])],512))}});const We=(0,h.Z)(Oe,[["__scopeId","data-v-b989a58c"]]);var Re=We,Pe=t(5797),Ye=t.n(Pe),Ke=t(9545),Ge=t(1520);const{getNewDate:Qe}=(0,Ke.C)(),Xe={format:"d mmmm yyyy",defaultDate:new Date,setDefaultDate:!0,firstDay:1,i18n:{cancel:"Отмена",clear:"Очистить",done:"Выбрать",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekdaysAbbrev:["В","П","Вт","С","Ч","Пт","Сб"]},onSelect:Qe},ea=e=>((0,l.dD)("data-v-63970f4e"),e=e(),(0,l.Cn)(),e),aa=ea((()=>(0,l._)("h4",{class:"center-align"},"Добавление новой записи",-1))),ta={class:"row"},na=["onSubmit"],oa={class:"row"},la={class:"input-field col s12"},ca=["value"],ia=ea((()=>(0,l._)("label",null,"Счёт",-1))),sa={class:"row"},ra={class:"input-field col s12"},ua=["value"],da=ea((()=>(0,l._)("label",null,"Категория",-1))),ma={class:"row"},va={class:"input-field col s12"},pa=ea((()=>(0,l._)("i",{class:"material-icons prefix"},"calendar_month",-1))),fa=ea((()=>(0,l._)("label",{for:"recordDate"},"Дата",-1))),ba={class:"row"},ya={class:"input-field col s12"},ga=ea((()=>(0,l._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),_a=ea((()=>(0,l._)("label",{for:"amount"},"Сумма",-1))),wa={key:0,class:"helper-text red-text"},ha={key:1,class:"helper-text red-text"},ka={class:"row"},Aa={class:"input-field col s12"},Da=ea((()=>(0,l._)("i",{class:"material-icons prefix"},"edit",-1))),Ua=ea((()=>(0,l._)("label",{for:"description"},"Комментарий",-1))),Ia={class:"row"},Na={class:"col"},Ca=["disabled"],Sa=ea((()=>(0,l._)("i",{class:"material-icons"},"add",-1))),Ha=[Sa],$a=ea((()=>(0,l._)("div",{class:"col"},[(0,l._)("button",{class:"modal-close btn red darken-4",name:"action"},[(0,l._)("i",{class:"material-icons"},"close")])],-1)));var xa=(0,l.aZ)({__name:"AddRecordComponent",setup(e){const{pushNewTransaction:a}=(0,Ke.C)(),{transactionDate:t}=(0,u.Jk)((0,Ke.C)()),{accounts:n,selectedAccountId:s,selectedAccountName:r}=(0,u.Jk)((0,v.o)()),{categories:m,selectedCategoryId:p,selectedCategory:f}=(0,u.Jk)((0,Ge.x)()),{currencyFilter:b}=(0,d.y)(),y=(0,c.iH)(),g=(0,c.iH)(null),_=(0,c.iH)(),w=(0,c.iH)(),h=(0,c.iH)(),k=(0,c.iH)(.01),A=(0,c.qj)({transactionAmount:0,transactionDescription:""}),D={transactionAmount:{required:B.BM.withMessage("Поле СУММА является обязательным.",B.C1),minValue:B.BM.withMessage((({$params:e})=>`Сумма должна быть не менее, чем ${e.min} рублей.`),(0,B.uv)(k))}},U=(0,J.Xw)(D,A),I=(0,l.Fl)((()=>U.value.transactionAmount.$dirty&&U.value.transactionAmount.required.$invalid)),N=(0,l.Fl)((()=>U.value.transactionAmount.$dirty&&U.value.transactionAmount.minValue.$invalid)),C=(0,l.Fl)((()=>!(!f.value||!r||U.value.transactionAmount.$invalid))),S=async()=>{if(U.value.$invalid)return void U.value.$touch();const e={category:f.value?.name,categoryId:p.value,account:r.value,accountId:s.value,type:f.value?.type,amount:A.transactionAmount,description:A.transactionDescription,date:t.value};try{await a(e)}catch(n){console.error(n)}finally{A.transactionDescription="",A.transactionAmount=0,s.value="",p.value=""}};return(0,l.ic)((()=>{y.value=document.querySelectorAll("select"),Ye().FormSelect.init(y.value),Ye().updateTextFields()})),(0,l.bv)((()=>{_.value=Ye().Modal.init(g.value),Ye().FormSelect.init(y.value),Ye().updateTextFields(),h.value=Ye().Datepicker.init(w.value,Xe)})),(0,l.Jd)((()=>{_.value.destroy(),h.value.destroy()})),(e,a)=>((0,l.wg)(),(0,l.iD)("div",{id:"modalAddTransaction",ref_key:"addTransactionModal",ref:g,class:"modal p-24"},[aa,(0,l._)("div",ta,[(0,l._)("form",{class:"col s12 m6 offset-m3",onSubmit:(0,o.iM)(S,["prevent"])},[(0,l._)("div",oa,[(0,l._)("div",la,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>(0,c.dq)(s)?s.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,c.SU)(n),(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(b)(e.balance)),9,ca)))),128))],512),[[o.bM,(0,c.SU)(s)]]),ia])]),(0,l._)("div",sa,[(0,l._)("div",ra,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>(0,c.dq)(p)?p.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,c.SU)(m),(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)("outcome"===e.type?"Расход":"Доход"),9,ua)))),128))],512),[[o.bM,(0,c.SU)(p)]]),da])]),(0,l._)("div",ma,[(0,l._)("div",va,[pa,(0,l._)("input",{id:"recordDate",ref_key:"datepicker",ref:w,class:"datepicker",name:"recordDate",type:"text"},null,512),fa])]),(0,l._)("div",ba,[(0,l._)("div",ya,[ga,(0,l.wy)((0,l._)("input",{id:"amount","onUpdate:modelValue":a[2]||(a[2]=e=>A.transactionAmount=e),class:(0,i.C_)({invalid:I.value||N.value}),step:"0.01",type:"number"},null,2),[[o.nr,A.transactionAmount,void 0,{number:!0}]]),_a,I.value?((0,l.wg)(),(0,l.iD)("small",wa,(0,i.zw)((0,c.SU)(U).transactionAmount.required.$message),1)):N.value?((0,l.wg)(),(0,l.iD)("small",ha,(0,i.zw)((0,c.SU)(U).transactionAmount.minValue.$message),1)):(0,l.kq)("",!0)])]),(0,l._)("div",ka,[(0,l._)("div",Aa,[Da,(0,l.wy)((0,l._)("input",{id:"description","onUpdate:modelValue":a[3]||(a[3]=e=>A.transactionDescription=e),type:"text"},null,512),[[o.nr,A.transactionDescription]]),Ua])]),(0,l._)("div",Ia,[(0,l._)("div",Na,[(0,l._)("button",{disabled:!C.value,class:"mc-button-submit btn light-green darken-4",name:"action",type:"submit"},Ha,8,Ca)]),$a])],40,na)])],512))}});const Fa=(0,h.Z)(xa,[["__scopeId","data-v-63970f4e"]]);var Ta=Fa;const Ma=e=>((0,l.dD)("data-v-81c2f4f6"),e=e(),(0,l.Cn)(),e),qa={class:"modal-content"},Ja=Ma((()=>(0,l._)("h4",null,"Перевод средств со счёта на счёт",-1))),Ba=Ma((()=>(0,l._)("button",{class:"btn modal-close-btn modal-close red"},[(0,l._)("i",{class:"large material-icons"},"close")],-1))),Za={class:"mc-form-category"},Ea={class:"row"},ja={class:"input-field col s12"},Va=["value"],za=Ma((()=>(0,l._)("label",null,"Выберите счёт-отправитель",-1))),La={class:"row"},Oa={class:"input-field col s12"},Wa=["value"],Ra=Ma((()=>(0,l._)("label",null,"Выберите счёт-получатель",-1))),Pa={class:"row"},Ya={class:"input-field col s12"},Ka=Ma((()=>(0,l._)("i",{class:"material-icons prefix"},"calendar_month",-1))),Ga=Ma((()=>(0,l._)("label",{for:"transferDate"},"Дата",-1))),Qa={class:"row"},Xa={class:"input-field col s12"},et=Ma((()=>(0,l._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),at=Ma((()=>(0,l._)("label",{for:"amount"},"Сумма перевода",-1))),tt={class:"row"},nt={class:"col"},ot={key:0,class:"red-text"},lt={key:1,class:"red-text"},ct={key:2,class:"red-text"},it={key:3,class:"red-text"},st={class:"row"},rt={class:"col"},ut=["disabled","onClick"],dt=Ma((()=>(0,l._)("i",{class:"material-icons right"},"forward",-1)));var mt=(0,l.aZ)({__name:"AccountsTransferComponent",setup(e){const{accounts:a,selectedAccountId:t,selectedAccountName:n,destinationAccountId:s,destinationAccountName:r,transferAmount:m,requiredAmountForTransfer:p,isSourceAccountBalanceNotEnough:f}=(0,u.Jk)((0,v.o)()),{pushNewTransaction:b}=(0,Ke.C)(),{transactionDate:y}=(0,u.Jk)((0,Ke.C)()),{currencyFilter:g}=(0,d.y)(),_=(0,c.iH)(),w=(0,c.iH)(),h=(0,c.iH)(),k=(0,c.iH)(),A=(0,c.iH)(),D=(0,l.Fl)((()=>t.value===s.value||!t.value||!s.value)),U=(0,l.Fl)((()=>D.value||f.value||m.value<=0)),I=async()=>{if(U.value)return;const e={account:n.value,accountId:t.value,amount:m.value,category:r.value,categoryId:s.value,date:y.value,description:`Перевод из ${n.value} на ${r.value}`,type:"transfer"};await b(e),w.value.close()};return(0,l.bv)((()=>{w.value=Ye().Modal.init(_.value),h.value=document.querySelectorAll("select"),Ye().FormSelect.init(h.value),Ye().updateTextFields(),A.value=Ye().Datepicker.init(k.value,Xe)})),(0,l.Jd)((()=>{w.value.destroy()})),(e,n)=>((0,l.wg)(),(0,l.iD)("div",{id:"modalTransferBetweenAccounts",ref_key:"modalTransfer",ref:_,class:"modal"},[(0,l._)("div",qa,[Ja,Ba,(0,l._)("form",Za,[(0,l._)("div",Ea,[(0,l._)("div",ja,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>(0,c.dq)(t)?t.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,c.SU)(a),(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(g)(e.balance)),9,Va)))),128))],512),[[o.bM,(0,c.SU)(t)]]),za])]),(0,l._)("div",La,[(0,l._)("div",Oa,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>(0,c.dq)(s)?s.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,c.SU)(a),(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(g)(e.balance)),9,Wa)))),128))],512),[[o.bM,(0,c.SU)(s)]]),Ra])]),(0,l._)("div",Pa,[(0,l._)("div",Ya,[Ka,(0,l._)("input",{id:"transferDate",ref_key:"datepicker",ref:k,class:"datepicker",name:"transferDate",type:"text"},null,512),Ga])]),(0,l._)("div",Qa,[(0,l._)("div",Xa,[et,(0,l.wy)((0,l._)("input",{id:"amount","onUpdate:modelValue":n[2]||(n[2]=e=>(0,c.dq)(m)?m.value=e:null),step:"0.01",type:"number"},null,512),[[o.nr,(0,c.SU)(m)]]),at])]),(0,l._)("div",tt,[(0,l._)("div",nt,[(0,c.SU)(t)?(0,c.SU)(s)?D.value?((0,l.wg)(),(0,l.iD)("small",ct," Счёт-отправитель и счёт-получатель должны быть разными ")):(0,c.SU)(f)?((0,l.wg)(),(0,l.iD)("small",it,[(0,l.Uk)(" На счете-отправителе не хватает "),(0,l._)("strong",null,(0,i.zw)((0,c.SU)(g)((0,c.SU)(p).toString())),1)])):(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",lt," Необходимо выбрать счёт-получатель ")):((0,l.wg)(),(0,l.iD)("small",ot," Необходимо выбрать счёт-отправитель "))])]),(0,l._)("div",st,[(0,l._)("div",rt,[(0,l._)("button",{disabled:U.value,class:"mc-button-submit btn blue",name:"action",type:"submit",onClick:(0,o.iM)(I,["prevent"])},[(0,l.Uk)("Перевести "),dt],8,ut)])])])])],512))}});const vt=(0,h.Z)(mt,[["__scopeId","data-v-81c2f4f6"]]);var pt=vt;const ft=e=>((0,l.dD)("data-v-34eb8769"),e=e(),(0,l.Cn)(),e),bt={class:"modal-content"},yt=ft((()=>(0,l._)("h4",null,"Установка лимита",-1))),gt=ft((()=>(0,l._)("button",{class:"btn modal-close-btn modal-close red"},[(0,l._)("i",{class:"large material-icons"},"close")],-1))),_t={class:"mc-form-category"},wt={class:"row"},ht={class:"col s12"},kt={class:"input-field col s12"},At=["value"],Dt=ft((()=>(0,l._)("label",null,"Категория",-1))),Ut=ft((()=>(0,l._)("button",{class:"mc-button-submit btn",name:"action",type:"submit"},[(0,l.Uk)(" Установить лимит "),(0,l._)("i",{class:"material-icons right"},"upload")],-1)));var It=(0,l.aZ)({__name:"SetLimitToCategory",setup(e){const a=(0,c.iH)(),t=(0,c.iH)(),{selectedCategoryId:n,categoriesAvailableForLimitation:s}=(0,u.Jk)((0,Ge.x)());return(0,l.bv)((()=>{t.value=M.Modal.init(a.value)})),(0,l.Jd)((()=>{t.value.destroy()})),(e,t)=>((0,l.wg)(),(0,l.iD)("div",{id:"modalSetLimit",ref_key:"setLimitModal",ref:a,class:"modal"},[(0,l._)("div",bt,[yt,gt,(0,l._)("form",_t,[(0,l._)("div",wt,[(0,l._)("div",ht,[(0,l._)("div",kt,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>(0,c.dq)(n)?n.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,c.SU)(s),(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name),9,At)))),128))],512),[[o.bM,(0,c.SU)(n)]]),Dt])])]),Ut])])],512))}});const Nt=(0,h.Z)(It,[["__scopeId","data-v-34eb8769"]]);var Ct=Nt;const St=e=>((0,l.dD)("data-v-ce89aea2"),e=e(),(0,l.Cn)(),e),Ht={class:"modal-content"},$t=St((()=>(0,l._)("h4",null,"Изменить данные",-1))),xt=St((()=>(0,l._)("button",{class:"btn modal-close-btn modal-close red"},[(0,l._)("i",{class:"large material-icons"},"close")],-1))),Ft={class:"row"},Tt=["onSubmit"],Mt={class:"row"},qt={class:"input-field col s12"},Jt=["value"],Bt=St((()=>(0,l._)("label",null,"Счёт",-1))),Zt={class:"row"},Et={class:"input-field col s12"},jt=["value"],Vt=St((()=>(0,l._)("label",null,"Категория",-1))),zt={class:"row"},Lt={class:"input-field col s12"},Ot=St((()=>(0,l._)("i",{class:"material-icons prefix"},"calendar_month",-1))),Wt=St((()=>(0,l._)("label",{for:"recordDateEdit"},"Дата",-1))),Rt={class:"row"},Pt={class:"input-field col s12"},Yt=St((()=>(0,l._)("i",{class:"material-icons prefix"},"currency_ruble",-1))),Kt=St((()=>(0,l._)("label",{for:"amount"},"Сумма",-1))),Gt={class:"row"},Qt={class:"input-field col s12"},Xt=St((()=>(0,l._)("i",{class:"material-icons prefix"},"edit",-1))),en=St((()=>(0,l._)("label",{for:"description"},"Комментарий",-1))),an=St((()=>(0,l._)("div",{class:"row"},[(0,l._)("div",{class:"col"},[(0,l._)("button",{class:"mc-button-submit btn light-green darken-4",name:"action",type:"submit"},[(0,l.Uk)(" Обновить "),(0,l._)("i",{class:"material-icons right"},"upload")])])],-1)));var tn=(0,l.aZ)({__name:"EditTransactionComponent",setup(e){const{accounts:a,selectedAccountId:t,selectedAccountName:n}=(0,u.Jk)((0,v.o)()),{categories:s,selectedCategoryId:r,selectedCategory:m}=(0,u.Jk)((0,Ge.x)()),{selectedTransaction:p,transactionDate:f}=(0,u.Jk)((0,Ke.C)()),{currencyFilter:b}=(0,d.y)(),y=(0,c.iH)(),g=(0,c.iH)(),_=(0,c.iH)(),w=(0,c.iH)(),h=(0,c.iH)(),k=(0,c.iH)(0),A=(0,c.iH)(""),D=()=>{const e={account:n.value,accountId:t.value,amount:k.value,category:m.value?.name,categoryId:r.value,date:f.value,description:A.value,type:p.value?.type};console.log("changing transaction...",e)},U={onOpenStart:()=>{t.value=p.value?.accountId,r.value=p.value?.categoryId,k.value=p.value?.amount,A.value=p.value?.description},onOpenEnd:()=>{Ye().updateTextFields()}};return(0,l.ic)((()=>{h.value=document.querySelectorAll("select"),Ye().FormSelect.init(h.value),Ye().updateTextFields()})),(0,l.bv)((()=>{g.value=Ye().Modal.init(y.value,U),Ye().FormSelect.init(h.value),Ye().updateTextFields(),w.value=Ye().Datepicker.init(_.value,Xe)})),(0,l.Jd)((()=>{g.value.destroy(),w.value.destroy()})),(e,n)=>((0,l.wg)(),(0,l.iD)("div",{id:"modalEditTransaction",ref_key:"editTransactionModal",ref:y,class:"modal"},[(0,l._)("div",Ht,[$t,xt,(0,l._)("div",Ft,[(0,l._)("form",{class:"col s12 m6 offset-m3",onSubmit:(0,o.iM)(D,["prevent"])},[(0,l._)("div",Mt,[(0,l._)("div",qt,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>(0,c.dq)(t)?t.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,c.SU)(a),(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)((0,c.SU)(b)(e.balance)),9,Jt)))),128))],512),[[o.bM,(0,c.SU)(t)]]),Bt])]),(0,l._)("div",Zt,[(0,l._)("div",Et,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>(0,c.dq)(r)?r.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,c.SU)(s),(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.name)+" | "+(0,i.zw)("outcome"===e.type?"Расход":"Доход"),9,jt)))),128))],512),[[o.bM,(0,c.SU)(r)]]),Vt])]),(0,l._)("div",zt,[(0,l._)("div",Lt,[Ot,(0,l._)("input",{id:"recordDateEdit",ref_key:"datepicker",ref:_,class:"datepicker",name:"recordDateEdit",type:"text"},null,512),Wt])]),(0,l._)("div",Rt,[(0,l._)("div",Pt,[Yt,(0,l.wy)((0,l._)("input",{id:"amount","onUpdate:modelValue":n[2]||(n[2]=e=>k.value=e),step:"0.01",type:"number"},null,512),[[o.nr,k.value,void 0,{number:!0}]]),Kt])]),(0,l._)("div",Gt,[(0,l._)("div",Qt,[Xt,(0,l.wy)((0,l._)("input",{id:"description","onUpdate:modelValue":n[3]||(n[3]=e=>A.value=e),type:"text"},null,512),[[o.nr,A.value,void 0,{trim:!0}]]),en])]),an],40,Tt)])])],512))}});const nn=(0,h.Z)(tn,[["__scopeId","data-v-ce89aea2"]]);var on=nn,ln=(0,l.aZ)({__name:"ModalComponent",setup(e){return(e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(o.uT,{name:"modal"},{default:(0,l.w5)((()=>[(0,l.Wm)(se)])),_:1}),(0,l.Wm)(o.uT,{name:"modal"},{default:(0,l.w5)((()=>[(0,l.Wm)(Re)])),_:1}),(0,l.Wm)(o.uT,{name:"modal"},{default:(0,l.w5)((()=>[(0,l.Wm)(De)])),_:1}),(0,l.Wm)(o.uT,{name:"modal"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ta)])),_:1}),(0,l.Wm)(o.uT,{name:"modal"},{default:(0,l.w5)((()=>[(0,l.Wm)(pt)])),_:1}),(0,l.Wm)(o.uT,{name:"modal"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ct)])),_:1}),(0,l.Wm)(o.uT,{name:"modal"},{default:(0,l.w5)((()=>[(0,l.Wm)(on)])),_:1})],64))}});const cn=ln;var sn=cn;const rn={class:"mc-main-background green lighten-5"},un={key:0,class:"fixed-action-btn"},dn=(0,l._)("i",{class:"material-icons"},"add",-1),mn=[dn];var vn=(0,l.aZ)({__name:"App",setup(e){const{isDataNeeded:a,areBaseAndCategoriesReady:t}=(0,u.Jk)((0,p.e)()),{fetchUserInfo:n}=(0,m.m)(),{subscribeToAccounts:o}=(0,v.o)(),i=(0,c.iH)();return(0,l.wF)((async()=>{console.log("check",!!r.I.currentUser&&a.value),r.I.currentUser&&a.value&&(await n(),await o(),a.value=!1),console.log("before mount in APP")})),(0,l.bv)((()=>{i.value&&M.FloatingActionButton.init(i.value,{direction:"right"})})),(e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",rn,[(0,l.Wm)(q)]),(0,c.SU)(t)?((0,l.wg)(),(0,l.iD)("div",un,[(0,l._)("button",{ref_key:"addTransaction",ref:i,class:"btn-floating btn-large red modal-trigger","data-target":"modalAddTransaction"},mn,512)])):(0,l.kq)("",!0),((0,l.wg)(),(0,l.j4)(l.lR,{to:"body"},[(0,l.Wm)(sn)]))],64))}});const pn=vn;var fn=pn,bn=t(5431);(0,bn.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var yn=t(3824);t(5778);let gn;r.I.onAuthStateChanged((()=>{gn||(gn=(0,o.ri)(fn),gn.use(n.Z),gn.use(yn.Z),gn.mount("#app"))}))},3824:function(e,a,t){var n=t(2483),o=t(8834);const l=[{name:"login",path:"/login",meta:{auth:"false"},component:()=>t.e(531).then(t.bind(t,531))},{name:"register",path:"/register",meta:{auth:"false"},component:()=>t.e(478).then(t.bind(t,2478))},{name:"profile",path:"/profile",meta:{auth:"true"},component:()=>t.e(347).then(t.bind(t,347))},{name:"accounts",path:"/accounts",meta:{auth:"true"},component:()=>t.e(578).then(t.bind(t,3578))},{name:"records",path:"/records",meta:{auth:"true"},component:()=>t.e(437).then(t.bind(t,5437))},{name:"planning",path:"/planning",meta:{auth:"true"},component:()=>t.e(58).then(t.bind(t,3058))},{name:"categories",path:"/categories",meta:{auth:"true"},component:()=>t.e(944).then(t.bind(t,1944))},{name:"home",path:"/",meta:{auth:"true"},component:()=>t.e(471).then(t.bind(t,6471))},{name:"404",path:"/404",meta:{auth:"false"},component:()=>t.e(252).then(t.bind(t,8252))}],c=(0,n.p7)({history:(0,n.PO)("/"),routes:l});c.beforeEach((e=>{const a=!!o.I.currentUser,t=e.matched.some((e=>"true"===e.meta.auth));if(!e.name)return{name:"404"};if(t){if(a)return;if("login"!==e.name&&"register"!==e.name)return{name:"login"}}})),a.Z=c},8263:function(e,a,t){t.d(a,{o:function(){return m}});var n=t(1020),o=t(123),l=t(6175),c=t(4870),i=t(3396),s=t(8834),r=t(2114),u=t(1520),d=t(9545);const m=(0,n.Q_)("accounts",(()=>{const e=(0,c.iH)([]),a=(0,c.iH)(0),t=(0,c.iH)(""),m=(0,c.iH)(""),v=(0,c.iH)(0),p=(0,c.iH)(0),f=(0,i.Fl)((()=>Object.values(e.value))),b=(0,i.Fl)((()=>{const e=f.value.find((e=>e.id===t.value));return e?e.name:""})),y=(0,i.Fl)((()=>{const e=f.value.find((e=>e.id===t.value));return e?e.balance:0})),g=(0,i.Fl)((()=>f.value.find((e=>e.id===m.value))?.name||"")),_=(0,i.Fl)((()=>{if(t.value){const e=f.value.find((e=>e.id===t.value))?.balance||0;return p.value=e-v.value,e<v.value}return!0})),w=(0,i.Fl)((()=>f.value.reduce(((e,a)=>a.isCountable?e+a.balance:e),0))),h=async e=>{const{baseId:a}=(0,n.Jk)((0,o.m)()),t={name:e.accountName,balance:e.balance,id:"",isCountable:e.isCountable};try{const e=(0,r.VF)((0,r.iH)(s.db,`bases/${a.value}/accounts/`));"string"===typeof e.key&&(t.id=e.key),await(0,r.t8)(e,t)}catch(l){console.error(l)}finally{await D()}},k=async e=>{try{const a={},{baseId:l}=(0,n.Jk)((0,o.m)()),c=(0,r.iH)(s.db,`bases/${l.value}/accounts/${t.value}`),i=await(await(0,r.U2)(c)).val();return i.name=e.accountName,i.balance=e.balance,i.isCountable=e.isCountable,a[`bases/${l.value}/accounts/${t.value}`]=i,t.value="",(0,r.Vx)((0,r.iH)(s.db),a)}catch(a){console.error(a)}},A=async()=>{try{const{baseId:e}=(0,n.Jk)((0,o.m)()),a=(0,r.iH)(s.db,`bases/${e.value}/accounts/${t.value}`);t.value="",await(0,r.t8)(a,null)}catch(e){console.error(e)}},D=async()=>{const{updateTotalBalance:t,subscribeToBalance:c}=(0,l.G)(),{subscribeToCategories:i}=(0,u.x)(),{subscribeToTransactions:m}=(0,d.C)();try{const{baseId:l}=(0,n.Jk)((0,o.m)());if(l.value){const n=(0,r.iH)(s.db,`bases/${l.value}/accounts/`);(0,r.jM)(n,(async n=>{n.exists()?(e.value=n.val(),await c(),await t(),i(),m()):a.value<5?setTimeout((()=>{a.value++,D()}),100*(a.value+1)):(e.value=[],await t(),console.error("Не существует пути до СЧЕТОВ"))}))}else console.error("BaseID is empty or null")}catch(v){console.error(v)}};return{accounts:f,selectedAccountId:t,destinationAccountId:m,destinationAccountName:g,transferAmount:v,requiredAmountForTransfer:p,isSourceAccountBalanceNotEnough:_,selectedAccountName:b,selectedAccountBalance:y,allAccountsSum:w,subscribeToAccounts:D,pushNewAccount:h,changeAccount:k,deleteAccount:A}}))},6252:function(e,a,t){t.d(a,{t:function(){return v}});t(560);var n=t(1020),o=t(5484),l=t(8834),c=t(2114),i=t(4672),s=t(3824),r=t(4870),u=t(8263),d=t(123),m=t(3060);const v=(0,n.Q_)("auth",(()=>{const e=(0,r.iH)(0);function a(){e.value+=1}async function t({email:e,password:t}){const{subscribeToAccounts:c}=(0,u.o)(o.Z),{fetchUserInfo:r}=(0,d.m)(o.Z),{isGlobalLoading:v}=(0,n.Jk)((0,m.e)(o.Z));try{v.value=!0,await(0,i.e5)(l.I,e,t),await r(),await c(),await s.Z.push("/profile"),a()}catch(p){console.error(p)}finally{v.value=!1}}async function v({firstName:e,lastName:t,email:r,password:v}){const{subscribeToAccounts:p}=(0,u.o)(o.Z),{fetchUserInfo:b}=(0,d.m)(o.Z),{isGlobalLoading:y}=(0,n.Jk)((0,m.e)(o.Z));try{y.value=!0,await(0,i.Xb)(l.I,r,v);const n=f();n?await(0,c.t8)((0,c.iH)(l.db,`/users/${n}/`),{firstName:e,lastName:t,email:r,id:n,recordsId:""}):console.error("UID is null or empty"),await b(),await p(),await s.Z.push("/profile"),a()}catch(g){console.error(g)}finally{y.value=!1}}async function p(){try{await(0,i.w7)(l.I),await s.Z.push("/"),a()}catch(e){}}function f(){const e=l.I.currentUser;return e?e.uid:null}return{register:v,getUid:f,login:t,logout:p,componentKey:e}}))},6175:function(e,a,t){t.d(a,{G:function(){return r}});var n=t(1020),o=t(4870),l=t(2114),c=t(8834),i=t(123),s=t(8263);const r=(0,n.Q_)("balance",(()=>{const e=(0,o.iH)(0),a=(0,o.iH)(0),t=async()=>{try{const{allAccountsSum:e}=(0,s.o)(),{baseId:a}=(0,n.Jk)((0,i.m)()),t=(0,l.iH)(c.db,`bases/${a.value}/info`);await(0,l.t8)(t,{totalBalance:e})}catch(e){console.error(e)}},r=async()=>{try{const{baseId:t}=(0,n.Jk)((0,i.m)()),o=(0,l.iH)(c.db,`bases/${t.value}/info`);(0,l.jM)(o,(t=>{if(t.exists()){const a=t.val();e.value=a.totalBalance}else{if(!(a.value<5))throw e.value=0,new Error("Не существует пути до ОБЩЕГО БАЛАНСА");setTimeout((()=>{a.value++,r()}),100*(a.value+1))}}))}catch(t){console.error(t)}};return{totalBalance:e,subscribeToBalance:r,updateTotalBalance:t}}))},1520:function(e,a,t){t.d(a,{x:function(){return r}});var n=t(1020),o=t(2114),l=t(8834),c=t(4870),i=t(3396),s=t(123);const r=(0,n.Q_)("categories",(()=>{const e=(0,c.iH)([]),a=(0,c.iH)(""),t=(0,c.iH)(0),r=(0,i.Fl)((()=>Object.values(e.value))),u=(0,i.Fl)((()=>r.value.filter((e=>"outcome"===e.type)))),d=(0,i.Fl)((()=>r.value.find((e=>e.id===a.value)))),m=async e=>{const{baseId:a,userFullName:t}=(0,n.Jk)((0,s.m)()),c={name:e["categoryName"],type:e["categoryType"],id:"",author:t.value,description:e["categoryDescription"]};try{const e=(0,o.VF)((0,o.iH)(l.db,`bases/${a.value}/categories/`));"string"===typeof e.key&&(c.id=e.key),await(0,o.t8)(e,c)}catch(i){console.error(i)}},v=async e=>{e.categoryAuthor=l.I.currentUser?.displayName;const t={name:e.categoryName,type:e.categoryType,id:e.categoryId,author:e.categoryAuthor,description:e.categoryDescription};try{const e={},{baseId:c}=(0,n.Jk)((0,s.m)());return e[`bases/${c.value}/categories/${a.value}`]=t,a.value="",(0,o.Vx)((0,o.iH)(l.db),e)}catch(c){console.error(c)}},p=async()=>{try{const{baseId:e}=(0,n.Jk)((0,s.m)()),t=(0,o.iH)(l.db,`bases/${e.value}/categories/${a.value}`);a.value="",await(0,o.t8)(t,null)}catch(e){console.error(e)}},f=()=>{try{const{baseId:a}=(0,n.Jk)((0,s.m)()),c=(0,o.iH)(l.db,`bases/${a.value}/categories/`);(0,o.jM)(c,(async a=>{a.exists()?e.value=a.val():t.value<5?setTimeout((()=>{t.value++,f()}),100*(t.value+1)):(e.value=[],console.error("Не существует пути до КАТЕГОРИЙ"))}))}catch(a){console.error(a)}};return{categories:r,categoriesAvailableForLimitation:u,selectedCategoryId:a,selectedCategory:d,pushNewCategory:m,changeCategory:v,deleteCategory:p,subscribeToCategories:f}}))},123:function(e,a,t){t.d(a,{m:function(){return v}});var n=t(5484),o=t(1020),l=t(6252),c=t(8263),i=t(2114),s=t(8834),r=t(4870),u=t(3396);const{getUid:d}=(0,l.t)(n.Z),{subscribeToAccounts:m}=(0,c.o)(n.Z),v=(0,o.Q_)("database",(()=>{const e=(0,r.qj)({firstName:"",lastName:"",email:"",id:"",recordsId:""}),a=(0,r.iH)(""),t=(0,u.Fl)((()=>e.recordsId)),n=(0,u.Fl)((()=>`${e.firstName} ${e.lastName}`));async function o(){try{const a=d();if(a){await(0,i.t8)((0,i.iH)(s.db,`/bases/${a}/info/`),{totalBalance:0}),e.recordsId=a;const t={};return t[`/users/${a}/`]=e,(0,i.Vx)((0,i.iH)(s.db),t)}console.error("UID is empty or null")}catch(a){console.error(a)}finally{await m()}}async function l(){try{const t=d();if(t){e.recordsId=a.value;const n={};return n[`/users/${t}/`]=e,(0,i.Vx)((0,i.iH)(s.db),n)}console.error("UID is empty or null")}catch(t){console.error(t)}finally{await m()}}async function c(){try{const a=d(),t=await(await(0,i.U2)((0,i.iU)((0,i.iH)(s.db),`users/${a}/`))).val();t&&""!==t.id?(e.firstName=t.firstName,e.id=t.id,e.lastName=t.lastName,e.email=t.email,e.recordsId=t.recordsId):console.error("You are not logged in")}catch(a){console.error(a)}}return{userInfo:e,recordsIdAttach:a,baseId:t,userFullName:n,fetchUserInfo:c,attachUserBase:l,createNewUserBase:o}}))},3256:function(e,a,t){t.d(a,{y:function(){return o}});var n=t(1020);const o=(0,n.Q_)("filters",(()=>{const e=(e,a="RUB")=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:a}).format(e),a=(e,a="date")=>{const t={};return a.includes("date")&&(t.day="2-digit",t.month="long",t.year="numeric"),a.includes("time")&&(t.hour="2-digit",t.minute="2-digit",t.second="2-digit"),new Intl.DateTimeFormat("ru-RU",t).format(new Date(e))};return{currencyFilter:e,dateFilter:a}}))},5484:function(e,a,t){var n=t(1020);const o=(0,n.WB)();a.Z=o},3060:function(e,a,t){t.d(a,{e:function(){return u}});var n=t(1020),o=t(4870),l=t(3396),c=t(123),i=t(8263),s=t(1520),r=t(9545);const u=(0,n.Q_)("status",(()=>{const e=(0,o.iH)(!1),a=(0,o.iH)(!0),t=(0,l.Fl)((()=>{const{userInfo:e}=(0,n.Jk)((0,c.m)());return""!==e.value.recordsId})),u=(0,l.Fl)((()=>{const{accounts:e}=(0,n.Jk)((0,i.o)());return e.value.length>0})),d=(0,l.Fl)((()=>{const{categories:e}=(0,n.Jk)((0,s.x)());return e.value.length>0})),m=(0,l.Fl)((()=>{const{transactions:e}=(0,n.Jk)((0,r.C)());return e.value.length>0})),v=(0,l.Fl)((()=>t.value&&u.value&&d.value));return{isGlobalLoading:e,isDataNeeded:a,areBaseAndCategoriesReady:v,isBaseReady:t,isAccountExist:u,isCategoryExist:d,isTransactionExist:m}}))},9545:function(e,a,t){t.d(a,{C:function(){return u}});t(2894);var n=t(1020),o=t(4870),l=t(3396),c=t(123),i=t(7509),s=t(8834),r=t(2114);const u=(0,n.Q_)("transactions",(()=>{const e=(0,o.iH)([]),a=(0,o.iH)(""),t=(0,o.iH)(0),u=(0,o.iH)(new Date),d=(0,l.Fl)((()=>Object.values(e.value))),m=(0,l.Fl)((()=>d.value.toSorted(((e,a)=>e.dateForSort-a.dateForSort)))),v=(0,l.Fl)((()=>d.value.filter((e=>"outcome"===e.type)).filter((e=>new Date(e.date).getMonth()===(new Date).getMonth())))),p=(0,l.Fl)((()=>d.value.find((e=>e.id===a.value)))),f=e=>{const a=e.getFullYear().toString(),t=(e.getMonth()+1).toString();let n=e.getDate().toString();return n.length<2&&(n="0"+n),Number(a.concat(t,n))},b=e=>{u.value=e},y=async e=>{const{baseId:a,userFullName:t}=(0,n.Jk)((0,c.m)()),o={account:e.account,accountId:e.accountId,amount:e.amount,author:t.value,category:e.category,categoryId:e.categoryId,createdAt:(new Date).toLocaleString(),date:e.date.toDateString(),dateForSort:f(e.date),description:e.description,id:"",type:e.type};try{switch(o.type){case"transfer":await w(o,a.value);break;case"outcome":await _(o,a.value);break;default:await g(o,a.value);break}const e=(0,r.VF)((0,i.iH)(s.db,`bases/${a.value}/transactions/`));o.id=e.key,await(0,r.t8)(e,o)}catch(l){console.error(l)}},g=async(e,a)=>{if(!a&&!e)return;const t={},n=(0,i.iH)(s.db,`bases/${a}/accounts/${e.accountId}`),o=await(await(0,r.U2)(n)).val();return o.balance+=e.amount,t[`bases/${a}/accounts/${e.accountId}`]=o,(0,r.Vx)((0,i.iH)(s.db),t)},_=async(e,a)=>{if(!a&&!e)return;const t={},n=(0,i.iH)(s.db,`bases/${a}/accounts/${e.accountId}`),o=await(await(0,r.U2)(n)).val();return o.balance-=e.amount,t[`bases/${a}/accounts/${e.accountId}`]=o,(0,r.Vx)((0,i.iH)(s.db),t)},w=async(e,a)=>{if(!a&&!e)return;const t={},n=(0,i.iH)(s.db,`bases/${a}/accounts/${e.accountId}`),o=await(await(0,r.U2)(n)).val();o.balance-=e.amount,t[`bases/${a}/accounts/${e.accountId}`]=o;const l=(0,i.iH)(s.db,`bases/${a}/accounts/${e.categoryId}`),c=await(await(0,r.U2)(l)).val();return c.balance+=e.amount,t[`bases/${a}/accounts/${e.categoryId}`]=c,(0,r.Vx)((0,i.iH)(s.db),t)},h=()=>{try{const{baseId:a}=(0,n.Jk)((0,c.m)()),o=(0,i.iH)(s.db,`bases/${a.value}/transactions/`);(0,r.jM)(o,(async a=>{a.exists()?e.value=a.val():t.value<5?setTimeout((()=>{t.value++,h()}),100*(t.value+1)):(e.value=[],console.error("Не существует пути до ТРАНЗАКЦИЙ"))}))}catch(a){console.error(a)}};return{transactions:d,selectedTransactionId:a,selectedTransaction:p,transactionDate:u,transactionsSortedByDate:m,outcomeTransactionsInThisMonth:v,pushNewTransaction:y,subscribeToTransactions:h,getNewDate:b}}))},8834:function(e,a,t){t.d(a,{I:function(){return s},db:function(){return r}});var n=t(7795),o=t(4672),l=t(2114);const c={apiKey:"AIzaSyDYNJW9zQZPj0XGCU_jinDaqUWB4-c3Xa8",authDomain:"money-catcher-65750.firebaseapp.com",projectId:"money-catcher-65750",storageBucket:"money-catcher-65750.appspot.com",messagingSenderId:"413859778767",appId:"1:413859778767:web:ba8898f1e968b6e68d27ba",measurementId:"G-SPDWJ2B7P9",databaseURL:"https://money-catcher-65750-default-rtdb.europe-west1.firebasedatabase.app/"},i=(0,n.ZF)(c),s=(0,o.v0)(i),r=(0,l.N8)(i)}},a={};function t(n){var o=a[n];if(void 0!==o)return o.exports;var l=a[n]={exports:{}};return e[n].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(a,n,o,l){if(!n){var c=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],l=e[u][2];for(var i=!0,s=0;s<n.length;s++)(!1&l||c>=l)&&Object.keys(t.O).every((function(e){return t.O[e](n[s])}))?n.splice(s--,1):(i=!1,l<c&&(c=l));if(i){e.splice(u--,1);var r=o();void 0!==r&&(a=r)}}return a}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,o,l]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(a,n){return t.f[n](e,a),a}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{58:"f7bf6000",252:"1c61d83a",347:"786ac9a2",437:"bdbf2170",471:"8e92c91a",478:"58eb45ef",531:"3432f250",578:"dc341f5d",944:"6cd36164"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+"."+{347:"da574a68",437:"00cf9cdb",478:"b197f489",531:"1d4ba553",578:"87a18ea4"}[e]+".css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="money-catcher:";t.l=function(n,o,l,c){if(e[n])e[n].push(o);else{var i,s;if(void 0!==l)for(var r=document.getElementsByTagName("script"),u=0;u<r.length;u++){var d=r[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==a+l){i=d;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,t.nc&&i.setAttribute("nonce",t.nc),i.setAttribute("data-webpack",a+l),i.src=n),e[n]=[o];var m=function(a,t){i.onerror=i.onload=null,clearTimeout(v);var o=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(t)})),a)return a(t)},v=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),s&&document.head.appendChild(i)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,a,t,n,o){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css";var c=function(t){if(l.onerror=l.onload=null,"load"===t.type)n();else{var c=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.href||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=c,s.request=i,l.parentNode&&l.parentNode.removeChild(l),o(s)}};return l.onerror=l.onload=c,l.href=a,t?t.parentNode.insertBefore(l,t.nextSibling):document.head.appendChild(l),l},a=function(e,a){for(var t=document.getElementsByTagName("link"),n=0;n<t.length;n++){var o=t[n],l=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(l===e||l===a))return o}var c=document.getElementsByTagName("style");for(n=0;n<c.length;n++){o=c[n],l=o.getAttribute("data-href");if(l===e||l===a)return o}},n=function(n){return new Promise((function(o,l){var c=t.miniCssF(n),i=t.p+c;if(a(c,i))return o();e(n,i,null,o,l)}))},o={143:0};t.f.miniCss=function(e,a){var t={347:1,437:1,478:1,531:1,578:1};o[e]?a.push(o[e]):0!==o[e]&&t[e]&&a.push(o[e]=n(e).then((function(){o[e]=0}),(function(a){throw delete o[e],a})))}}}(),function(){var e={143:0};t.f.j=function(a,n){var o=t.o(e,a)?e[a]:void 0;if(0!==o)if(o)n.push(o[2]);else{var l=new Promise((function(t,n){o=e[a]=[t,n]}));n.push(o[2]=l);var c=t.p+t.u(a),i=new Error,s=function(n){if(t.o(e,a)&&(o=e[a],0!==o&&(e[a]=void 0),o)){var l=n&&("load"===n.type?"missing":n.type),c=n&&n.target&&n.target.src;i.message="Loading chunk "+a+" failed.\n("+l+": "+c+")",i.name="ChunkLoadError",i.type=l,i.request=c,o[1](i)}};t.l(c,s,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,n){var o,l,c=n[0],i=n[1],s=n[2],r=0;if(c.some((function(a){return 0!==e[a]}))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(s)var u=s(t)}for(a&&a(n);r<c.length;r++)l=c[r],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},n=self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(2535)}));n=t.O(n)})();
//# sourceMappingURL=app.d669947c.js.map