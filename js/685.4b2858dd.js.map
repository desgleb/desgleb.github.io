{"version":3,"file":"js/685.4b2858dd.js","mappings":"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","sources":["webpack://money-catcher/./src/components/MonthSelectComponent.vue?d0d8","webpack://money-catcher/./src/components/MonthSelectComponent.vue","webpack://money-catcher/./src/components/MonthSelectComponent.vue?e854","webpack://money-catcher/./src/components/YearSelectComponent.vue?ca55","webpack://money-catcher/./src/components/YearSelectComponent.vue","webpack://money-catcher/./src/components/YearSelectComponent.vue?1c0b","webpack://money-catcher/./src/components/CalendarDayCardComponent.vue?03a3","webpack://money-catcher/./src/components/CalendarDayCardComponent.vue","webpack://money-catcher/./src/components/CalendarDayCardComponent.vue?7a92","webpack://money-catcher/./src/components/CalendarGridComponent.vue?9817","webpack://money-catcher/./src/components/CalendarGridComponent.vue","webpack://money-catcher/./src/components/CalendarGridComponent.vue?d8e0","webpack://money-catcher/./src/views/CalendarView.vue?ce2d","webpack://money-catcher/./src/views/CalendarView.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, isRef as _isRef, vModelSelect as _vModelSelect, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"input-field\" }\nconst _hoisted_2 = {\n  key: 0,\n  selected: \"\",\n  value: \"12\"\n}\nconst _hoisted_3 = [\"value\"]\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Фильтрация по месяцам\", -1)\n\nimport { onMounted, ref } from 'vue';\r\nimport { useTransactionsStore } from '@/stores/transactions';\r\nimport { storeToRefs } from 'pinia';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'MonthSelectComponent',\n  props: {\n    showAll: { type: Boolean }\n  },\n  setup(__props: any) {\n\r\n\r\n\r\nconst { transactionsMonthFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst monthSelect = ref();\r\nconst monthSelectInstance = ref();\r\n\r\nconst monthsArray: string[] = [ 'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь' ];\r\n\r\nonMounted(() => {\r\n  monthSelectInstance.value = M.FormSelect.init(monthSelect.value);\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"select\", {\n      ref_key: \"monthSelect\",\n      ref: monthSelect,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(transactionsMonthFilter) ? (transactionsMonthFilter).value = $event : null))\n    }, [\n      (_ctx.$props.showAll)\n        ? (_openBlock(), _createElementBlock(\"option\", _hoisted_2, \"Показать всё\"))\n        : _createCommentVNode(\"\", true),\n      (_openBlock(), _createElementBlock(_Fragment, null, _renderList(monthsArray, (month, index) => {\n        return _createElementVNode(\"option\", {\n          key: index,\n          value: index\n        }, _toDisplayString(month), 9, _hoisted_3)\n      }), 64))\n    ], 512), [\n      [\n        _vModelSelect,\n        _unref(transactionsMonthFilter),\n        void 0,\n        { number: true }\n      ]\n    ]),\n    _hoisted_4\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"input-field\">\r\n    <select ref=\"monthSelect\" v-model.number=\"transactionsMonthFilter\">\r\n      <option v-if=\"$props.showAll\" selected value=\"12\">Показать всё</option>\r\n      <option v-for=\"(month, index) in monthsArray\" :key=\"index\" :value=\"index\">{{ month }}</option>\r\n    </select>\r\n    <label>Фильтрация по месяцам</label>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { onMounted, ref } from 'vue';\r\nimport { useTransactionsStore } from '@/stores/transactions';\r\nimport { storeToRefs } from 'pinia';\r\n\r\ndefineProps<{\r\n  showAll: boolean\r\n}>();\r\n\r\nconst { transactionsMonthFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst monthSelect = ref();\r\nconst monthSelectInstance = ref();\r\n\r\nconst monthsArray: string[] = [ 'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь' ];\r\n\r\nonMounted(() => {\r\n  monthSelectInstance.value = M.FormSelect.init(monthSelect.value);\r\n});\r\n</script>","import script from \"./MonthSelectComponent.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./MonthSelectComponent.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, isRef as _isRef, vModelSelect as _vModelSelect, createElementVNode as _createElementVNode, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"input-field\" }\nconst _hoisted_2 = [\"value\"]\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Фильтрация по годам\", -1)\n\nimport { computed, ComputedRef, onMounted, ref } from 'vue';\r\nimport { Transaction, useTransactionsStore } from '@/stores/transactions';\r\nimport { storeToRefs } from 'pinia';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'YearSelectComponent',\n  setup(__props) {\n\r\nconst { transactionsSortedByDate, transactionsYearFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst yearSelect = ref();\r\nconst yearSelectInstance = ref();\r\n\r\nconst yearsSet: ComputedRef<Set<number>> = computed((): Set<number> => {\r\n  const years: Set<number> = new Set();\r\n  years.add(new Date().getFullYear());\r\n  if (!!transactionsSortedByDate.value) {\r\n    transactionsSortedByDate.value.forEach((tr: Transaction) => {\r\n      const trYear: number = new Date(tr.date).getFullYear();\r\n      years.add(trYear);\r\n    });\r\n    const yearsArr: number[] = Array.from(years);\r\n    const maxYear: number = Math.max.apply(null, yearsArr) + 1;\r\n    years.add(maxYear);\r\n    return years;\r\n  } else {\r\n    return years;\r\n  }\r\n});\r\n\r\nonMounted(() => {\r\n  yearSelectInstance.value = M.FormSelect.init(yearSelect.value);\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"select\", {\n      ref_key: \"yearSelect\",\n      ref: yearSelect,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(transactionsYearFilter) ? (transactionsYearFilter).value = $event : null))\n    }, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(yearsSet.value, (year) => {\n        return (_openBlock(), _createElementBlock(\"option\", {\n          key: year,\n          value: year\n        }, _toDisplayString(year), 9, _hoisted_2))\n      }), 128))\n    ], 512), [\n      [\n        _vModelSelect,\n        _unref(transactionsYearFilter),\n        void 0,\n        { number: true }\n      ]\n    ]),\n    _hoisted_3\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"input-field\">\r\n    <select ref=\"yearSelect\" v-model.number=\"transactionsYearFilter\">\r\n      <option v-for=\"year in yearsSet\" :key=\"year\" :value=\"year\">{{ year }}</option>\r\n    </select>\r\n    <label>Фильтрация по годам</label>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, ComputedRef, onMounted, ref } from 'vue';\r\nimport { Transaction, useTransactionsStore } from '@/stores/transactions';\r\nimport { storeToRefs } from 'pinia';\r\n\r\nconst { transactionsSortedByDate, transactionsYearFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst yearSelect = ref();\r\nconst yearSelectInstance = ref();\r\n\r\nconst yearsSet: ComputedRef<Set<number>> = computed((): Set<number> => {\r\n  const years: Set<number> = new Set();\r\n  years.add(new Date().getFullYear());\r\n  if (!!transactionsSortedByDate.value) {\r\n    transactionsSortedByDate.value.forEach((tr: Transaction) => {\r\n      const trYear: number = new Date(tr.date).getFullYear();\r\n      years.add(trYear);\r\n    });\r\n    const yearsArr: number[] = Array.from(years);\r\n    const maxYear: number = Math.max.apply(null, yearsArr) + 1;\r\n    years.add(maxYear);\r\n    return years;\r\n  } else {\r\n    return years;\r\n  }\r\n});\r\n\r\nonMounted(() => {\r\n  yearSelectInstance.value = M.FormSelect.init(yearSelect.value);\r\n});\r\n</script>","import script from \"./YearSelectComponent.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./YearSelectComponent.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-19b988bc\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"day-card__header\" }\nconst _hoisted_2 = { class: \"row valign-wrapper\" }\nconst _hoisted_3 = { class: \"col s12\" }\nconst _hoisted_4 = { class: \"center-align day-card__date\" }\nconst _hoisted_5 = { class: \"row valign-center blue lighten-3\" }\nconst _hoisted_6 = { class: \"col s12\" }\nconst _hoisted_7 = { class: \"center-align day-card__balance\" }\nconst _hoisted_8 = {\n  key: 0,\n  class: \"valign-center\"\n}\nconst _hoisted_9 = { class: \"col s12 red white-text\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"center-align day-card__overspending\" }, \"Не учтено \", -1))\nconst _hoisted_11 = { class: \"center-align day-card__overspending\" }\nconst _hoisted_12 = { class: \"day-card__section day-card__section-income green lighten-4\" }\nconst _hoisted_13 = { class: \"center-align day-card__income-list-item\" }\nconst _hoisted_14 = { class: \"day-card__section day-card__section-outcome orange lighten-4\" }\nconst _hoisted_15 = { class: \"center-align day-card__income-list-item\" }\nconst _hoisted_16 = { class: \"center-align day-card__income-list\" }\nconst _hoisted_17 = { class: \"day-card__section day-card__section-outcome red lighten-3\" }\nconst _hoisted_18 = { class: \"center-align day-card__income-list-item\" }\nconst _hoisted_19 = { class: \"center-align day-card__income-list\" }\nconst _hoisted_20 = { class: \"day-card__footer\" }\nconst _hoisted_21 = { class: \"valign-center\" }\nconst _hoisted_22 = { class: \"col s12\" }\n\nimport { useFiltersStore } from '@/stores/filters';\r\nimport { Transaction, useTransactionsStore } from '@/stores/transactions';\r\nimport { NewCategory, useCategoriesStore } from '@/stores/categories';\r\nimport { usePlanningStore } from '@/stores/limits';\r\nimport { useAccountsStore } from '@/stores/accounts';\r\nimport { DayCard } from '@/components/CalendarGridComponent.vue';\r\nimport { computed, ComputedRef } from 'vue';\r\nimport { storeToRefs } from 'pinia';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CalendarDayCardComponent',\n  props: {\n    day: {}\n  },\n  setup(__props: any) {\n\r\nconst props = __props;\r\n\r\nconst { dateFilter, currencyFilter } = useFiltersStore();\r\nconst { transactions, transactionsSortedByDate } = storeToRefs(useTransactionsStore());\r\nconst { categoriesAvailableForLimitation } = storeToRefs(useCategoriesStore());\r\nconst { limits } = storeToRefs(usePlanningStore());\r\nconst { accounts } = storeToRefs(useAccountsStore());\r\n\r\nconst todayFilter: number = new Date(props.day.year, props.day.month, props.day.day).getTime(); // 00:00:00 today\r\nconst tomorrowFilter: number = new Date(props.day.year, props.day.month, props.day.day + 1).getTime(); // 00:00:00 tomorrow\r\nconst prevMonthLastDate: number = new Date(props.day.year, props.day.month, 0).getDate();\r\nconst prevMonthFilter: number = new Date(props.day.year, props.day.month - 1, prevMonthLastDate).getTime();\r\n\r\nconst balanceTillToday: ComputedRef<number> = computed(() => {\r\n  return accounts.value.map((acc) => {\r\n    const transferSumTillToday: number = transactions.value\r\n      .filter((rec) => rec.type === 'transfer')\r\n      .filter((rec) => rec.date < todayFilter)\r\n      .reduce((total, record) => {\r\n        if (record.accountId === acc.id) {\r\n          // source account -\r\n          return Number((total - record.amount).toFixed(2));\r\n        } else if (record.categoryId === acc.id) {\r\n          // destination account +\r\n          return Number((total + record.amount).toFixed(2));\r\n        } else {\r\n          return Number(total.toFixed(2));\r\n        }\r\n      }, 0);\r\n\r\n    const incomeSumTillToday: number = transactions.value\r\n      .filter((rec) => rec.accountId === acc.id)\r\n      .filter((rec) => rec.type === 'income')\r\n      .filter((rec) => rec.date < todayFilter)\r\n      .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0);\r\n\r\n    const outcomeSumTillToday: number = transactions.value\r\n      .filter((rec) => rec.accountId === acc.id)\r\n      .filter((rec) => rec.type === 'outcome')\r\n      .filter((rec) => rec.date < todayFilter)\r\n      .reduce((total, record) => Number((total - record.amount).toFixed(2)), 0);\r\n\r\n    let resultSumTillToday: number;\r\n    if (acc.isCountable) {\r\n      resultSumTillToday = acc.initialBalance + transferSumTillToday + incomeSumTillToday + outcomeSumTillToday;\r\n    } else {\r\n      resultSumTillToday = 0;\r\n    }\r\n\r\n    return {\r\n      ...acc,\r\n      resultSumTillToday\r\n    };\r\n  })\r\n    .reduce((total, acc) => Number((total + acc.resultSumTillToday).toFixed(2)), 0);\r\n});\r\n\r\nconst notCountableTransfers: ComputedRef<number> = computed(() => {\r\n  return accounts.value.map((acc) => {\r\n    const transfersToday = transactionsSortedByDate.value\r\n      .filter((rec) => rec.type === 'transfer')\r\n      .filter((rec) => rec.date === todayFilter)\r\n      .reduce((total, rec) => {\r\n        if (rec.accountId === acc.id && !acc.isCountable) {\r\n          return Number((total + rec.amount).toFixed(2));\r\n        } else if (rec.categoryId === acc.id && !acc.isCountable) {\r\n          return Number((total - rec.amount).toFixed(2));\r\n        } else {\r\n          return Number(total.toFixed(2));\r\n        }\r\n      }, 0);\r\n\r\n    return {\r\n      ...acc,\r\n      transfersToday\r\n    };\r\n  })\r\n    .reduce((total, account) => Number((total + account.transfersToday).toFixed(2)), 0);\r\n});\r\n\r\nconst balanceAtTheEndOfTheDay: ComputedRef<number> = computed(() => Number((balanceTillToday.value + allIncomeRecordsSum.value - allOutcomeRecordsSum.value - allNotPlannedRecordsSum.value)));\r\n\r\nconst allCategoriesOverspendSumTillToday: ComputedRef<number> = computed(() =>\r\n  categoriesAvailableForLimitation.value.map((cat) => {\r\n    const spendTillToday: number = transactionsSortedByDate.value\r\n      .filter((tr) => tr.date >= todayFilter)\r\n      .filter((tr) => tr.date < tomorrowFilter)\r\n      .filter((tr) => !tr.isNotPlanned)\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0);\r\n\r\n    const limit: number = <number>limits.value.find((lim) => lim.categoryId === cat.id)?.limit || 0;\r\n\r\n    const overspend: number = (limit > 0) && (spendTillToday - limit) > 0 ? Number((spendTillToday - limit).toFixed(2)) : 0;\r\n\r\n    return {\r\n      ...cat,\r\n      overspend\r\n    };\r\n  })\r\n    .filter((cat) => cat.overspend > 0)\r\n    .reduce((total, cat) => Number((total + cat.overspend).toFixed(2)), 0));\r\n\r\nconst allTodayRecords: ComputedRef<Transaction[]> = computed(() =>\r\n  transactionsSortedByDate.value\r\n    .filter((tr) => tr.type !== 'transfer')\r\n    .filter((tr) => tr.date < tomorrowFilter)\r\n    .filter((tr) => tr.date >= todayFilter));\r\n\r\nconst allIncomeRecordsSum: ComputedRef<number> = computed(() => {\r\n  const income: number = allTodayRecords.value\r\n    .filter((rec) => rec.type === 'income')\r\n    .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0);\r\n\r\n  const total: number = notCountableTransfers.value > 0 ? income + notCountableTransfers.value : income;\r\n\r\n  return Number(total.toFixed(2));\r\n});\r\n\r\nconst allOutcomeRecords: ComputedRef<Transaction[]> = computed(() => allTodayRecords.value\r\n  .filter((rec) => rec.type === 'outcome')\r\n  .filter((rec) => !rec.isNotPlanned));\r\n\r\nconst allOutcomeRecordsSum: ComputedRef<number> = computed(() => {\r\n  const outcome: number = allOutcomeRecords.value\r\n    .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0);\r\n\r\n  const total: number = notCountableTransfers.value < 0 ? outcome + Math.abs(notCountableTransfers.value) : outcome;\r\n\r\n  return Number(total.toFixed(2));\r\n});\r\n\r\nconst allNotPlannedRecordsSum: ComputedRef<number> = computed(() =>\r\n  allTodayRecords.value\r\n    .filter((rec) => rec.type === 'outcome')\r\n    .filter((tr) => tr.isNotPlanned)\r\n    .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0));\r\n\r\nconst notPlannedRecordsSumTillToday: ComputedRef<number> = computed(() =>\r\n  transactionsSortedByDate.value\r\n    .filter((tr) => tr.isNotPlanned)\r\n    .filter((tr) => tr.date > prevMonthFilter)\r\n    .filter((tr) => tr.date <= todayFilter)\r\n    .reduce((total, record) => {\r\n      return Number((total + record.amount).toFixed(2));\r\n    }, 0));\r\n\r\nconst outcomeCategoriesWithSum: ComputedRef<NewCategory[]> = computed(() =>\r\n  categoriesAvailableForLimitation.value.map((cat) => {\r\n    const total: number = allTodayRecords.value\r\n      .filter((tr) => !tr.isNotPlanned)\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .reduce((total, record) => {\r\n        return Number((total + record.amount).toFixed(2));\r\n      }, 0);\r\n\r\n    const forecastTransaction: Transaction | undefined = allTodayRecords.value\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .filter((tr) => tr.type === 'outcome')\r\n      .find((tr) => tr.isForecast);\r\n\r\n    const hasForecast: boolean = forecastTransaction ? forecastTransaction.isForecast : false;\r\n\r\n    return {\r\n      ...cat,\r\n      total,\r\n      hasForecast\r\n    };\r\n  })\r\n    .filter((cat) => cat.total !== 0));\r\n\r\nconst notPlannedCategoriesWithSum: ComputedRef<NewCategory[]> = computed(() =>\r\n  categoriesAvailableForLimitation.value.map((cat) => {\r\n    const total: number = allTodayRecords.value\r\n      .filter((tr) => tr.isNotPlanned)\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .reduce((total, record) => {\r\n        return Number((total + record.amount).toFixed(2));\r\n      }, 0);\r\n\r\n    return {\r\n      ...cat,\r\n      total\r\n    };\r\n  })\r\n    .filter((cat) => cat.total !== 0));\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"article\", {\n    class: _normalizeClass([{'border-red': balanceAtTheEndOfTheDay.value < 0}, \"card-panel grey lighten-2 calendar-list__card day-card\"])\n  }, [\n    _createElementVNode(\"header\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_unref(dateFilter)(_unref(todayFilter))), 1)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"div\", _hoisted_6, [\n          _createElementVNode(\"div\", _hoisted_7, [\n            _createElementVNode(\"strong\", null, \"Утром \" + _toDisplayString(_unref(currencyFilter)(balanceTillToday.value)), 1)\n          ])\n        ])\n      ]),\n      ((notPlannedRecordsSumTillToday.value + allCategoriesOverspendSumTillToday.value) > 0)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n            _createElementVNode(\"div\", _hoisted_9, [\n              _hoisted_10,\n              _createElementVNode(\"div\", _hoisted_11, _toDisplayString(_unref(currencyFilter)(notPlannedRecordsSumTillToday.value + allCategoriesOverspendSumTillToday.value)), 1)\n            ])\n          ]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createElementVNode(\"section\", _hoisted_12, [\n      _createElementVNode(\"div\", _hoisted_13, [\n        _createElementVNode(\"strong\", null, \"Доход \" + _toDisplayString(_unref(currencyFilter)(allIncomeRecordsSum.value)), 1)\n      ])\n    ]),\n    _createElementVNode(\"section\", _hoisted_14, [\n      _createElementVNode(\"div\", _hoisted_15, [\n        _createElementVNode(\"strong\", null, \"Расход \" + _toDisplayString(_unref(currencyFilter)(allOutcomeRecordsSum.value)), 1)\n      ]),\n      _createElementVNode(\"ul\", _hoisted_16, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(outcomeCategoriesWithSum.value, (cat) => {\n          return (_openBlock(), _createElementBlock(\"li\", {\n            key: cat.id,\n            class: _normalizeClass([{'grey-text': cat['hasForecast']}, \"day-card__income-list-item\"])\n          }, _toDisplayString(cat.name) + \" - \" + _toDisplayString(_unref(currencyFilter)(cat['total'])), 3))\n        }), 128))\n      ])\n    ]),\n    _createElementVNode(\"section\", _hoisted_17, [\n      _createElementVNode(\"div\", _hoisted_18, [\n        _createElementVNode(\"strong\", null, \"Вне плана \" + _toDisplayString(_unref(currencyFilter)(allNotPlannedRecordsSum.value)), 1)\n      ]),\n      _createElementVNode(\"ul\", _hoisted_19, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(notPlannedCategoriesWithSum.value, (cat) => {\n          return (_openBlock(), _createElementBlock(\"li\", {\n            key: cat.id,\n            class: \"day-card__income-list-item\"\n          }, _toDisplayString(cat.name) + \" - \" + _toDisplayString(_unref(currencyFilter)(cat['total'])), 1))\n        }), 128))\n      ])\n    ]),\n    _createElementVNode(\"footer\", _hoisted_20, [\n      _createElementVNode(\"div\", _hoisted_21, [\n        _createElementVNode(\"div\", _hoisted_22, [\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([{'red lighten-4': balanceAtTheEndOfTheDay.value < 0, 'green': balanceAtTheEndOfTheDay.value >= 0}, \"center-align day-card__balance\"])\n          }, [\n            _createElementVNode(\"strong\", null, \"Вечером \" + _toDisplayString(_unref(currencyFilter)(balanceAtTheEndOfTheDay.value)), 1)\n          ], 2)\n        ])\n      ])\n    ])\n  ], 2))\n}\n}\n\n})","<template>\r\n  <article\r\n    :class=\"{'border-red': balanceAtTheEndOfTheDay < 0}\"\r\n    class=\"card-panel grey lighten-2 calendar-list__card day-card\">\r\n    <header class=\"day-card__header\">\r\n      <div class=\"row valign-wrapper\">\r\n        <div class=\"col s12\">\r\n          <div class=\"center-align day-card__date\">{{ dateFilter(todayFilter) }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"row valign-center blue lighten-3\">\r\n        <div class=\"col s12\">\r\n          <div class=\"center-align day-card__balance\"><strong>Утром {{ currencyFilter(balanceTillToday) }}</strong>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"(notPlannedRecordsSumTillToday + allCategoriesOverspendSumTillToday) > 0\" class=\"valign-center\">\r\n        <div class=\"col s12 red white-text\">\r\n          <div class=\"center-align day-card__overspending\">Не учтено\r\n          </div>\r\n          <div class=\"center-align day-card__overspending\">\r\n            {{ currencyFilter(notPlannedRecordsSumTillToday + allCategoriesOverspendSumTillToday) }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n    <section class=\"day-card__section day-card__section-income green lighten-4\">\r\n      <div class=\"center-align day-card__income-list-item\"><strong>Доход {{\r\n          currencyFilter(allIncomeRecordsSum)\r\n        }}</strong></div>\r\n    </section>\r\n    <section class=\"day-card__section day-card__section-outcome orange lighten-4\">\r\n      <div class=\"center-align day-card__income-list-item\"><strong>Расход {{\r\n          currencyFilter(allOutcomeRecordsSum)\r\n        }}</strong></div>\r\n      <ul class=\"center-align day-card__income-list\">\r\n        <li\r\n          v-for=\"cat in outcomeCategoriesWithSum\"\r\n          :key=\"cat.id\"\r\n          :class=\"{'grey-text': cat['hasForecast']}\"\r\n          class=\"day-card__income-list-item\">\r\n          {{ cat.name }} - {{ currencyFilter(cat['total']) }}\r\n        </li>\r\n      </ul>\r\n    </section>\r\n    <section class=\"day-card__section day-card__section-outcome red lighten-3\">\r\n      <div class=\"center-align day-card__income-list-item\"><strong>Вне плана {{\r\n          currencyFilter(allNotPlannedRecordsSum)\r\n        }}</strong></div>\r\n      <ul class=\"center-align day-card__income-list\">\r\n        <li\r\n          v-for=\"cat in notPlannedCategoriesWithSum\"\r\n          :key=\"cat.id\"\r\n          class=\"day-card__income-list-item\">\r\n          {{ cat.name }} - {{ currencyFilter(cat['total']) }}\r\n        </li>\r\n      </ul>\r\n    </section>\r\n    <footer class=\"day-card__footer\">\r\n      <div class=\"valign-center\">\r\n        <div class=\"col s12\">\r\n          <div\r\n            :class=\"{'red lighten-4': balanceAtTheEndOfTheDay < 0, 'green': balanceAtTheEndOfTheDay >= 0}\"\r\n            class=\"center-align day-card__balance\"><strong>Вечером {{\r\n              currencyFilter(balanceAtTheEndOfTheDay)\r\n            }}</strong></div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  </article>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { useFiltersStore } from '@/stores/filters';\r\nimport { Transaction, useTransactionsStore } from '@/stores/transactions';\r\nimport { NewCategory, useCategoriesStore } from '@/stores/categories';\r\nimport { usePlanningStore } from '@/stores/limits';\r\nimport { useAccountsStore } from '@/stores/accounts';\r\nimport { DayCard } from '@/components/CalendarGridComponent.vue';\r\nimport { computed, ComputedRef } from 'vue';\r\nimport { storeToRefs } from 'pinia';\r\n\r\nconst props = defineProps<{\r\n  day: DayCard\r\n}>();\r\n\r\nconst { dateFilter, currencyFilter } = useFiltersStore();\r\nconst { transactions, transactionsSortedByDate } = storeToRefs(useTransactionsStore());\r\nconst { categoriesAvailableForLimitation } = storeToRefs(useCategoriesStore());\r\nconst { limits } = storeToRefs(usePlanningStore());\r\nconst { accounts } = storeToRefs(useAccountsStore());\r\n\r\nconst todayFilter: number = new Date(props.day.year, props.day.month, props.day.day).getTime(); // 00:00:00 today\r\nconst tomorrowFilter: number = new Date(props.day.year, props.day.month, props.day.day + 1).getTime(); // 00:00:00 tomorrow\r\nconst prevMonthLastDate: number = new Date(props.day.year, props.day.month, 0).getDate();\r\nconst prevMonthFilter: number = new Date(props.day.year, props.day.month - 1, prevMonthLastDate).getTime();\r\n\r\nconst balanceTillToday: ComputedRef<number> = computed(() => {\r\n  return accounts.value.map((acc) => {\r\n    const transferSumTillToday: number = transactions.value\r\n      .filter((rec) => rec.type === 'transfer')\r\n      .filter((rec) => rec.date < todayFilter)\r\n      .reduce((total, record) => {\r\n        if (record.accountId === acc.id) {\r\n          // source account -\r\n          return Number((total - record.amount).toFixed(2));\r\n        } else if (record.categoryId === acc.id) {\r\n          // destination account +\r\n          return Number((total + record.amount).toFixed(2));\r\n        } else {\r\n          return Number(total.toFixed(2));\r\n        }\r\n      }, 0);\r\n\r\n    const incomeSumTillToday: number = transactions.value\r\n      .filter((rec) => rec.accountId === acc.id)\r\n      .filter((rec) => rec.type === 'income')\r\n      .filter((rec) => rec.date < todayFilter)\r\n      .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0);\r\n\r\n    const outcomeSumTillToday: number = transactions.value\r\n      .filter((rec) => rec.accountId === acc.id)\r\n      .filter((rec) => rec.type === 'outcome')\r\n      .filter((rec) => rec.date < todayFilter)\r\n      .reduce((total, record) => Number((total - record.amount).toFixed(2)), 0);\r\n\r\n    let resultSumTillToday: number;\r\n    if (acc.isCountable) {\r\n      resultSumTillToday = acc.initialBalance + transferSumTillToday + incomeSumTillToday + outcomeSumTillToday;\r\n    } else {\r\n      resultSumTillToday = 0;\r\n    }\r\n\r\n    return {\r\n      ...acc,\r\n      resultSumTillToday\r\n    };\r\n  })\r\n    .reduce((total, acc) => Number((total + acc.resultSumTillToday).toFixed(2)), 0);\r\n});\r\n\r\nconst notCountableTransfers: ComputedRef<number> = computed(() => {\r\n  return accounts.value.map((acc) => {\r\n    const transfersToday = transactionsSortedByDate.value\r\n      .filter((rec) => rec.type === 'transfer')\r\n      .filter((rec) => rec.date === todayFilter)\r\n      .reduce((total, rec) => {\r\n        if (rec.accountId === acc.id && !acc.isCountable) {\r\n          return Number((total + rec.amount).toFixed(2));\r\n        } else if (rec.categoryId === acc.id && !acc.isCountable) {\r\n          return Number((total - rec.amount).toFixed(2));\r\n        } else {\r\n          return Number(total.toFixed(2));\r\n        }\r\n      }, 0);\r\n\r\n    return {\r\n      ...acc,\r\n      transfersToday\r\n    };\r\n  })\r\n    .reduce((total, account) => Number((total + account.transfersToday).toFixed(2)), 0);\r\n});\r\n\r\nconst balanceAtTheEndOfTheDay: ComputedRef<number> = computed(() => Number((balanceTillToday.value + allIncomeRecordsSum.value - allOutcomeRecordsSum.value - allNotPlannedRecordsSum.value)));\r\n\r\nconst allCategoriesOverspendSumTillToday: ComputedRef<number> = computed(() =>\r\n  categoriesAvailableForLimitation.value.map((cat) => {\r\n    const spendTillToday: number = transactionsSortedByDate.value\r\n      .filter((tr) => tr.date >= todayFilter)\r\n      .filter((tr) => tr.date < tomorrowFilter)\r\n      .filter((tr) => !tr.isNotPlanned)\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0);\r\n\r\n    const limit: number = <number>limits.value.find((lim) => lim.categoryId === cat.id)?.limit || 0;\r\n\r\n    const overspend: number = (limit > 0) && (spendTillToday - limit) > 0 ? Number((spendTillToday - limit).toFixed(2)) : 0;\r\n\r\n    return {\r\n      ...cat,\r\n      overspend\r\n    };\r\n  })\r\n    .filter((cat) => cat.overspend > 0)\r\n    .reduce((total, cat) => Number((total + cat.overspend).toFixed(2)), 0));\r\n\r\nconst allTodayRecords: ComputedRef<Transaction[]> = computed(() =>\r\n  transactionsSortedByDate.value\r\n    .filter((tr) => tr.type !== 'transfer')\r\n    .filter((tr) => tr.date < tomorrowFilter)\r\n    .filter((tr) => tr.date >= todayFilter));\r\n\r\nconst allIncomeRecordsSum: ComputedRef<number> = computed(() => {\r\n  const income: number = allTodayRecords.value\r\n    .filter((rec) => rec.type === 'income')\r\n    .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0);\r\n\r\n  const total: number = notCountableTransfers.value > 0 ? income + notCountableTransfers.value : income;\r\n\r\n  return Number(total.toFixed(2));\r\n});\r\n\r\nconst allOutcomeRecords: ComputedRef<Transaction[]> = computed(() => allTodayRecords.value\r\n  .filter((rec) => rec.type === 'outcome')\r\n  .filter((rec) => !rec.isNotPlanned));\r\n\r\nconst allOutcomeRecordsSum: ComputedRef<number> = computed(() => {\r\n  const outcome: number = allOutcomeRecords.value\r\n    .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0);\r\n\r\n  const total: number = notCountableTransfers.value < 0 ? outcome + Math.abs(notCountableTransfers.value) : outcome;\r\n\r\n  return Number(total.toFixed(2));\r\n});\r\n\r\nconst allNotPlannedRecordsSum: ComputedRef<number> = computed(() =>\r\n  allTodayRecords.value\r\n    .filter((rec) => rec.type === 'outcome')\r\n    .filter((tr) => tr.isNotPlanned)\r\n    .reduce((total, record) => Number((total + record.amount).toFixed(2)), 0));\r\n\r\nconst notPlannedRecordsSumTillToday: ComputedRef<number> = computed(() =>\r\n  transactionsSortedByDate.value\r\n    .filter((tr) => tr.isNotPlanned)\r\n    .filter((tr) => tr.date > prevMonthFilter)\r\n    .filter((tr) => tr.date <= todayFilter)\r\n    .reduce((total, record) => {\r\n      return Number((total + record.amount).toFixed(2));\r\n    }, 0));\r\n\r\nconst outcomeCategoriesWithSum: ComputedRef<NewCategory[]> = computed(() =>\r\n  categoriesAvailableForLimitation.value.map((cat) => {\r\n    const total: number = allTodayRecords.value\r\n      .filter((tr) => !tr.isNotPlanned)\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .reduce((total, record) => {\r\n        return Number((total + record.amount).toFixed(2));\r\n      }, 0);\r\n\r\n    const forecastTransaction: Transaction | undefined = allTodayRecords.value\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .filter((tr) => tr.type === 'outcome')\r\n      .find((tr) => tr.isForecast);\r\n\r\n    const hasForecast: boolean = forecastTransaction ? forecastTransaction.isForecast : false;\r\n\r\n    return {\r\n      ...cat,\r\n      total,\r\n      hasForecast\r\n    };\r\n  })\r\n    .filter((cat) => cat.total !== 0));\r\n\r\nconst notPlannedCategoriesWithSum: ComputedRef<NewCategory[]> = computed(() =>\r\n  categoriesAvailableForLimitation.value.map((cat) => {\r\n    const total: number = allTodayRecords.value\r\n      .filter((tr) => tr.isNotPlanned)\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .reduce((total, record) => {\r\n        return Number((total + record.amount).toFixed(2));\r\n      }, 0);\r\n\r\n    return {\r\n      ...cat,\r\n      total\r\n    };\r\n  })\r\n    .filter((cat) => cat.total !== 0));\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.day-card {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n\r\n  &.card-panel {\r\n    margin: 0;\r\n    padding: 12px 6px;\r\n    height: 100%;\r\n  }\r\n\r\n  &.border-red {\r\n    border: 2px solid red;\r\n    border-radius: 4px;\r\n  }\r\n\r\n  & .row {\r\n    margin-bottom: 10px;\r\n\r\n    & .col {\r\n      padding: 0;\r\n    }\r\n  }\r\n\r\n  &__header {\r\n    margin-bottom: 20px;\r\n    min-height: 80px;\r\n  }\r\n\r\n  &__date {\r\n    font-weight: bold;\r\n  }\r\n\r\n  &__section {\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  &__footer {\r\n    justify-self: flex-end;\r\n    margin-top: auto;\r\n  }\r\n}\r\n</style>","import script from \"./CalendarDayCardComponent.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./CalendarDayCardComponent.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./CalendarDayCardComponent.vue?vue&type=style&index=0&id=19b988bc&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-19b988bc\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-717b28f5\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"calendar-list\" }\n\nimport CalendarDayCardComponent from '@/components/CalendarDayCardComponent.vue';\r\nimport { storeToRefs } from 'pinia';\r\nimport { computed, ComputedRef } from 'vue';\r\nimport { useTransactionsStore } from '@/stores/transactions';\r\n\r\nexport interface DayCard {\r\n  day: number,\r\n  month: number,\r\n  year: number,\r\n  week: number,\r\n  weekday: number,\r\n  weekdayName: string,\r\n  id: number\r\n}\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CalendarGridComponent',\n  setup(__props) {\n\r\nconst { transactionsMonthFilter, transactionsYearFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst weekdays: string[] = [ 'Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa' ];\r\n\r\nconst lastDate: ComputedRef<number> = computed(() => new Date(transactionsYearFilter.value, transactionsMonthFilter.value + 1, 0).getDate());\r\n\r\nconst daysOfMonth: ComputedRef<DayCard[]> = computed(() => {\r\n  const days: DayCard[] = [];\r\n  let weekCounter: number = 1;\r\n  for (let i = 1; i <= lastDate.value; i++) {\r\n    const day: DayCard = { id: 0, week: 0, day: 0, month: 0, weekday: 0, weekdayName: '', year: 0 };\r\n    day.day = i;\r\n    day.month = transactionsMonthFilter.value;\r\n    day.year = transactionsYearFilter.value;\r\n    day.weekday = new Date(transactionsYearFilter.value, transactionsMonthFilter.value, i).getDay();\r\n    day.weekdayName = weekdays[day.weekday];\r\n    day.week = weekCounter;\r\n    day.id = new Date(day.year, day.month, day.day).getTime();\r\n    days.push(day);\r\n    if (day.weekday === 0) weekCounter++;\r\n  }\r\n  return days;\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"ul\", _hoisted_1, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(daysOfMonth.value, (day) => {\n      return (_openBlock(), _createElementBlock(\"li\", {\n        key: day.id,\n        style: _normalizeStyle({ 'grid-area': day.weekdayName, 'grid-row': day.week }),\n        class: \"calendar-list__item\"\n      }, [\n        _createVNode(CalendarDayCardComponent, { day: day }, null, 8, [\"day\"])\n      ], 4))\n    }), 128))\n  ]))\n}\n}\n\n})","<template>\r\n  <ul class=\"calendar-list\">\r\n    <li\r\n      v-for=\"day in daysOfMonth\"\r\n      :key=\"day.id\"\r\n      :style=\"{ 'grid-area': day.weekdayName, 'grid-row': day.week }\"\r\n      class=\"calendar-list__item\">\r\n      <CalendarDayCardComponent :day=\"day\"/>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport CalendarDayCardComponent from '@/components/CalendarDayCardComponent.vue';\r\nimport { storeToRefs } from 'pinia';\r\nimport { computed, ComputedRef } from 'vue';\r\nimport { useTransactionsStore } from '@/stores/transactions';\r\n\r\nconst { transactionsMonthFilter, transactionsYearFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst weekdays: string[] = [ 'Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa' ];\r\n\r\nconst lastDate: ComputedRef<number> = computed(() => new Date(transactionsYearFilter.value, transactionsMonthFilter.value + 1, 0).getDate());\r\n\r\nexport interface DayCard {\r\n  day: number,\r\n  month: number,\r\n  year: number,\r\n  week: number,\r\n  weekday: number,\r\n  weekdayName: string,\r\n  id: number\r\n}\r\n\r\nconst daysOfMonth: ComputedRef<DayCard[]> = computed(() => {\r\n  const days: DayCard[] = [];\r\n  let weekCounter: number = 1;\r\n  for (let i = 1; i <= lastDate.value; i++) {\r\n    const day: DayCard = { id: 0, week: 0, day: 0, month: 0, weekday: 0, weekdayName: '', year: 0 };\r\n    day.day = i;\r\n    day.month = transactionsMonthFilter.value;\r\n    day.year = transactionsYearFilter.value;\r\n    day.weekday = new Date(transactionsYearFilter.value, transactionsMonthFilter.value, i).getDay();\r\n    day.weekdayName = weekdays[day.weekday];\r\n    day.week = weekCounter;\r\n    day.id = new Date(day.year, day.month, day.day).getTime();\r\n    days.push(day);\r\n    if (day.weekday === 0) weekCounter++;\r\n  }\r\n  return days;\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.calendar-list {\r\n  display: grid;\r\n  grid-gap: 20px;\r\n  grid-template-areas:\r\n    \"Mo Tu We Th Fr Sa Su\";\r\n  align-items: stretch;\r\n\r\n  @media (max-width: 1280px) {\r\n    grid-gap: 16px;\r\n  }\r\n\r\n  @media (max-width: 1200px) {\r\n    grid-template-areas: unset;\r\n    grid-template-columns: repeat(5, 1fr);\r\n    grid-gap: 12px;\r\n  }\r\n\r\n  @media (max-width: 998px) {\r\n    grid-template-columns: repeat(4, 1fr);\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    grid-template-columns: repeat(3, 1fr);\r\n    grid-gap: 10px;\r\n  }\r\n\r\n  @media (max-width: 600px) {\r\n    grid-template-columns: repeat(2, 1fr);\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  &__item {\r\n    @media (max-width: 1200px) {\r\n      grid-area: unset !important;\r\n    }\r\n  }\r\n}\r\n</style>","import script from \"./CalendarGridComponent.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./CalendarGridComponent.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./CalendarGridComponent.vue?vue&type=style&index=0&id=717b28f5&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-717b28f5\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"container\" }, [\n  /*#__PURE__*/_createElementVNode(\"h3\", null, \"Календарь\")\n], -1)\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1)\nconst _hoisted_3 = { class: \"row\" }\nconst _hoisted_4 = { class: \"col s12 m2 offset-m7\" }\nconst _hoisted_5 = { class: \"col s12 m3\" }\n\nimport CalendarGridComponent from '@/components/CalendarGridComponent.vue';\r\nimport MonthSelectComponent from '@/components/MonthSelectComponent.vue';\r\nimport YearSelectComponent from '@/components/YearSelectComponent.vue';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CalendarView',\n  setup(__props) {\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _hoisted_1,\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(YearSelectComponent)\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createVNode(MonthSelectComponent, { \"show-all\": false })\n      ])\n    ]),\n    _createVNode(CalendarGridComponent)\n  ], 64))\n}\n}\n\n})","import script from \"./CalendarView.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./CalendarView.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","key","selected","value","_hoisted_3","_hoisted_4","_createElementVNode","_defineComponent","__name","props","showAll","type","Boolean","setup","__props","transactionsMonthFilter","storeToRefs","useTransactionsStore","monthSelect","ref","monthSelectInstance","monthsArray","onMounted","M","FormSelect","init","_ctx","_cache","_openBlock","_createElementBlock","_withDirectives","ref_key","$event","_isRef","$props","_createCommentVNode","_Fragment","_renderList","month","index","_toDisplayString","_vModelSelect","_unref","number","__exports__","transactionsSortedByDate","transactionsYearFilter","yearSelect","yearSelectInstance","yearsSet","computed","years","Set","add","Date","getFullYear","forEach","tr","trYear","date","yearsArr","Array","from","maxYear","Math","max","apply","year","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","day","dateFilter","currencyFilter","useFiltersStore","transactions","categoriesAvailableForLimitation","useCategoriesStore","limits","usePlanningStore","accounts","useAccountsStore","todayFilter","getTime","tomorrowFilter","prevMonthLastDate","getDate","prevMonthFilter","balanceTillToday","map","acc","transferSumTillToday","filter","rec","reduce","total","record","accountId","id","Number","amount","toFixed","categoryId","incomeSumTillToday","outcomeSumTillToday","resultSumTillToday","isCountable","initialBalance","notCountableTransfers","transfersToday","account","balanceAtTheEndOfTheDay","allIncomeRecordsSum","allOutcomeRecordsSum","allNotPlannedRecordsSum","allCategoriesOverspendSumTillToday","cat","spendTillToday","isNotPlanned","limit","find","lim","overspend","allTodayRecords","income","allOutcomeRecords","outcome","abs","notPlannedRecordsSumTillToday","outcomeCategoriesWithSum","forecastTransaction","isForecast","hasForecast","notPlannedCategoriesWithSum","_normalizeClass","name","weekdays","lastDate","daysOfMonth","days","weekCounter","i","week","weekday","weekdayName","getDay","push","style","_normalizeStyle","_createVNode","CalendarDayCardComponent","YearSelectComponent","MonthSelectComponent","CalendarGridComponent"],"sourceRoot":""}