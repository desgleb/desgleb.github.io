{"version":3,"file":"js/177.bfa2911f.js","mappings":"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","sources":["webpack://money-catcher/./src/views/ProfileView.vue?78e2","webpack://money-catcher/./src/views/ProfileView.vue","webpack://money-catcher/./src/views/ProfileView.vue?3e49"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-db7108fe\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_2 = { class: \"row\" }\nconst _hoisted_3 = { class: \"col s12\" }\nconst _hoisted_4 = { class: \"card-panel\" }\nconst _hoisted_5 = { class: \"row\" }\nconst _hoisted_6 = { class: \"col s12 m6\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, [\n  /*#__PURE__*/_createElementVNode(\"strong\", null, \"Ваш ID\")\n], -1))\nconst _hoisted_8 = {\n  key: 0,\n  class: \"col s12 m6\"\n}\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, [\n  /*#__PURE__*/_createElementVNode(\"strong\", null, \"ID Вашей базы записей\")\n], -1))\nconst _hoisted_10 = { class: \"row\" }\nconst _hoisted_11 = { class: \"col s12 m6\" }\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, [\n  /*#__PURE__*/_createElementVNode(\"strong\", null, \"Ваше имя\")\n], -1))\nconst _hoisted_13 = { class: \"col s12 m6\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, [\n  /*#__PURE__*/_createElementVNode(\"strong\", null, \"Ваша фамилия\")\n], -1))\nconst _hoisted_15 = { class: \"row\" }\nconst _hoisted_16 = { class: \"col s12 m6\" }\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, [\n  /*#__PURE__*/_createElementVNode(\"strong\", null, \"Ваш адрес электронной почты\")\n], -1))\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"material-icons right\" }, \"power_settings_new\", -1))\nconst _hoisted_19 = {\n  key: 0,\n  class: \"row\"\n}\nconst _hoisted_20 = { class: \"col s12\" }\nconst _hoisted_21 = { class: \"card-panel\" }\nconst _hoisted_22 = [\"onSubmit\"]\nconst _hoisted_23 = { class: \"row\" }\nconst _hoisted_24 = { class: \"input-field col s6\" }\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"records_id\" }, \"Введите ID прикрепляемой базы записей\", -1))\nconst _hoisted_26 = {\n  key: 0,\n  class: \"helper-text red-text\"\n}\nconst _hoisted_27 = {\n  key: 1,\n  class: \"helper-text red-text\"\n}\nconst _hoisted_28 = { class: \"row\" }\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn col s12 m3 green darken-1\",\n  name: \"action\",\n  type: \"submit\"\n}, [\n  /*#__PURE__*/_createTextVNode(\"Прикрепить базу записей \"),\n  /*#__PURE__*/_createElementVNode(\"i\", { class: \"material-icons right\" }, \"cloud_download\")\n], -1))\nconst _hoisted_30 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"material-icons right\" }, \"add_circle_outline\", -1))\n\nimport { useAuthStore } from '@/stores/auth';\r\nimport { useDbStore } from '@/stores/database';\r\nimport { useVuelidate } from '@vuelidate/core';\r\nimport { required, minLength, helpers } from '@vuelidate/validators';\r\nimport { computed, reactive, ref } from 'vue';\r\nimport { storeToRefs } from 'pinia';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ProfileView',\n  setup(__props) {\n\r\nconst { userInfo, recordsIdAttach, userFullName } = storeToRefs(useDbStore());\r\nconst { attachUserBase, createNewUserBase } = useDbStore();\r\n\r\nconst { logout } = useAuthStore();\r\n\r\nconst minRecordsIdLength = ref(20);\r\nconst state = reactive({\r\n  recordsId: ''\r\n});\r\nconst rules = {\r\n  recordsId: {\r\n    required: helpers.withMessage(\r\n      'Поле ID является обязательным.',\r\n      required\r\n    ),\r\n    minLength: helpers.withMessage(\r\n      ({ $params }) =>\r\n        `Длина ID базы записей должна быть не менее, чем ${ $params.min } символов.`,\r\n      minLength(minRecordsIdLength)\r\n    )\r\n  }\r\n};\r\nconst isRecordsIdRequiredInvalid = computed(() => {\r\n  return v$.value.recordsId.$dirty && v$.value.recordsId.required.$invalid;\r\n});\r\nconst isRecordsIdMinLengthInvalid = computed(() => {\r\n  return v$.value.recordsId.$dirty && v$.value.recordsId.minLength.$invalid;\r\n});\r\nconst v$ = useVuelidate(rules, state);\r\n\r\nconst attachBase = async () => {\r\n  if (v$.value.$invalid) {\r\n    v$.value.$touch();\r\n    return;\r\n  }\r\n  recordsIdAttach.value = state.recordsId;\r\n\r\n  await attachUserBase();\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"h3\", null, \"Профиль \" + _toDisplayString(_unref(userFullName)), 1),\n    _hoisted_1,\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _createElementVNode(\"div\", _hoisted_6, [\n              _hoisted_7,\n              _createElementVNode(\"p\", null, _toDisplayString(_unref(userInfo).id), 1)\n            ]),\n            (_unref(userInfo).recordsId !== '')\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                  _hoisted_9,\n                  _createElementVNode(\"p\", null, _toDisplayString(_unref(userInfo).recordsId), 1)\n                ]))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _createElementVNode(\"div\", _hoisted_10, [\n            _createElementVNode(\"div\", _hoisted_11, [\n              _hoisted_12,\n              _createElementVNode(\"p\", null, _toDisplayString(_unref(userInfo).firstName), 1)\n            ]),\n            _createElementVNode(\"div\", _hoisted_13, [\n              _hoisted_14,\n              _createElementVNode(\"p\", null, _toDisplayString(_unref(userInfo).lastName), 1)\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_15, [\n            _createElementVNode(\"div\", _hoisted_16, [\n              _hoisted_17,\n              _createElementVNode(\"p\", null, _toDisplayString(_unref(userInfo).email), 1)\n            ]),\n            _createElementVNode(\"button\", {\n              class: \"btn col s12 m3 l2 red darken-4\",\n              name: \"action\",\n              onClick: _cache[0] || (_cache[0] = _withModifiers(\n//@ts-ignore\n(...args) => (_unref(logout) && _unref(logout)(...args)), [\"prevent\"]))\n            }, [\n              _createTextVNode(\"Выйти \"),\n              _hoisted_18\n            ])\n          ])\n        ])\n      ])\n    ]),\n    (_unref(userInfo).recordsId === '')\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [\n          _createElementVNode(\"div\", _hoisted_20, [\n            _createElementVNode(\"div\", _hoisted_21, [\n              _createElementVNode(\"form\", {\n                onSubmit: _withModifiers(attachBase, [\"prevent\"])\n              }, [\n                _createElementVNode(\"div\", _hoisted_23, [\n                  _createElementVNode(\"div\", _hoisted_24, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      id: \"records_id\",\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((state.recordsId) = $event)),\n                      class: _normalizeClass({ invalid: isRecordsIdRequiredInvalid.value || isRecordsIdMinLengthInvalid.value }),\n                      type: \"text\"\n                    }, null, 2), [\n                      [\n                        _vModelText,\n                        state.recordsId,\n                        void 0,\n                        { trim: true }\n                      ]\n                    ]),\n                    _hoisted_25,\n                    (isRecordsIdRequiredInvalid.value)\n                      ? (_openBlock(), _createElementBlock(\"small\", _hoisted_26, _toDisplayString(_unref(v$).recordsId.required.$message), 1))\n                      : (isRecordsIdMinLengthInvalid.value)\n                        ? (_openBlock(), _createElementBlock(\"small\", _hoisted_27, _toDisplayString(_unref(v$).recordsId.minLength.$message), 1))\n                        : _createCommentVNode(\"\", true)\n                  ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_28, [\n                  _hoisted_29,\n                  _createElementVNode(\"button\", {\n                    class: \"btn col s12 m3 offset-m6 green darken-4\",\n                    name: \"action\",\n                    onClick: _cache[2] || (_cache[2] = _withModifiers(\n//@ts-ignore\n(...args) => (_unref(createNewUserBase) && _unref(createNewUserBase)(...args)), [\"prevent\"]))\n                  }, [\n                    _createTextVNode(\"Создать новую базу записей \"),\n                    _hoisted_30\n                  ])\n                ])\n              ], 40, _hoisted_22)\n            ])\n          ])\n        ]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","<template>\r\n  <h3>Профиль {{ userFullName }}</h3>\r\n  <hr>\r\n  <div class=\"row\">\r\n    <div class=\"col s12\">\r\n      <div class=\"card-panel\">\r\n        <div class=\"row\">\r\n          <div class=\"col s12 m6\">\r\n            <p><strong>Ваш ID</strong></p>\r\n            <p>{{ userInfo.id }}</p>\r\n          </div>\r\n          <div v-if=\"userInfo.recordsId !== ''\" class=\"col s12 m6\">\r\n            <p><strong>ID Вашей базы записей</strong></p>\r\n            <p>{{ userInfo.recordsId }}</p>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col s12 m6\">\r\n            <p><strong>Ваше имя</strong></p>\r\n            <p>{{ userInfo.firstName }}</p>\r\n          </div>\r\n          <div class=\"col s12 m6\">\r\n            <p><strong>Ваша фамилия</strong></p>\r\n            <p>{{ userInfo.lastName }}</p>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col s12 m6\">\r\n            <p><strong>Ваш адрес электронной почты</strong></p>\r\n            <p>{{ userInfo.email }}</p>\r\n          </div>\r\n          <button class=\"btn col s12 m3 l2 red darken-4\"\r\n                  name=\"action\"\r\n                  @click.prevent=\"logout\">Выйти\r\n            <i class=\"material-icons right\">power_settings_new</i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div v-if=\"userInfo.recordsId === ''\" class=\"row\">\r\n    <div class=\"col s12\">\r\n      <div class=\"card-panel\">\r\n        <form @submit.prevent=\"attachBase\">\r\n          <div class=\"row\">\r\n            <div class=\"input-field col s6\">\r\n              <input id=\"records_id\" v-model.trim=\"state.recordsId\"\r\n                     :class=\"{ invalid: isRecordsIdRequiredInvalid || isRecordsIdMinLengthInvalid }\" type=\"text\">\r\n              <label for=\"records_id\">Введите ID прикрепляемой базы записей</label>\r\n              <!--suppress TypeScriptUnresolvedReference, JSUnresolvedReference -->\r\n              <small\r\n                v-if=\"isRecordsIdRequiredInvalid\"\r\n                class=\"helper-text red-text\"\r\n              >{{ v$.recordsId.required.$message }}</small>\r\n              <!--suppress TypeScriptUnresolvedReference, JSUnresolvedReference -->\r\n              <small\r\n                v-else-if=\"isRecordsIdMinLengthInvalid\"\r\n                class=\"helper-text red-text\"\r\n              >{{ v$.recordsId.minLength.$message }}</small>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <button class=\"btn col s12 m3 green darken-1\" name=\"action\" type=\"submit\">Прикрепить базу записей\r\n              <i class=\"material-icons right\">cloud_download</i>\r\n            </button>\r\n            <button class=\"btn col s12 m3 offset-m6 green darken-4\"\r\n                    name=\"action\"\r\n                    @click.prevent=\"createNewUserBase\"\r\n            >Создать новую базу записей\r\n              <i class=\"material-icons right\">add_circle_outline</i>\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { useAuthStore } from '@/stores/auth';\r\nimport { useDbStore } from '@/stores/database';\r\nimport { useVuelidate } from '@vuelidate/core';\r\nimport { required, minLength, helpers } from '@vuelidate/validators';\r\nimport { computed, reactive, ref } from 'vue';\r\nimport { storeToRefs } from 'pinia';\r\n\r\nconst { userInfo, recordsIdAttach, userFullName } = storeToRefs(useDbStore());\r\nconst { attachUserBase, createNewUserBase } = useDbStore();\r\n\r\nconst { logout } = useAuthStore();\r\n\r\nconst minRecordsIdLength = ref(20);\r\nconst state = reactive({\r\n  recordsId: ''\r\n});\r\nconst rules = {\r\n  recordsId: {\r\n    required: helpers.withMessage(\r\n      'Поле ID является обязательным.',\r\n      required\r\n    ),\r\n    minLength: helpers.withMessage(\r\n      ({ $params }) =>\r\n        `Длина ID базы записей должна быть не менее, чем ${ $params.min } символов.`,\r\n      minLength(minRecordsIdLength)\r\n    )\r\n  }\r\n};\r\nconst isRecordsIdRequiredInvalid = computed(() => {\r\n  return v$.value.recordsId.$dirty && v$.value.recordsId.required.$invalid;\r\n});\r\nconst isRecordsIdMinLengthInvalid = computed(() => {\r\n  return v$.value.recordsId.$dirty && v$.value.recordsId.minLength.$invalid;\r\n});\r\nconst v$ = useVuelidate(rules, state);\r\n\r\nconst attachBase = async () => {\r\n  if (v$.value.$invalid) {\r\n    v$.value.$touch();\r\n    return;\r\n  }\r\n  recordsIdAttach.value = state.recordsId;\r\n\r\n  await attachUserBase();\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.mc-form-profile {\r\n  padding: 32px;\r\n}\r\n</style>","import script from \"./ProfileView.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ProfileView.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./ProfileView.vue?vue&type=style&index=0&id=db7108fe&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-db7108fe\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","_createElementVNode","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","key","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","for","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","name","type","_createTextVNode","_hoisted_30","_defineComponent","__name","setup","__props","userInfo","recordsIdAttach","userFullName","storeToRefs","useDbStore","attachUserBase","createNewUserBase","logout","useAuthStore","minRecordsIdLength","ref","state","reactive","recordsId","rules","required","helpers","withMessage","minLength","$params","min","isRecordsIdRequiredInvalid","computed","v$","value","$dirty","$invalid","isRecordsIdMinLengthInvalid","useVuelidate","attachBase","async","$touch","_ctx","_cache","_openBlock","_createElementBlock","_Fragment","_toDisplayString","_unref","id","_createCommentVNode","firstName","lastName","email","onClick","_withModifiers","args","onSubmit","_withDirectives","$event","_normalizeClass","invalid","_vModelText","trim","$message","__exports__"],"sourceRoot":""}