"use strict";(self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[]).push([[745],{5632:function(e,a,t){t.d(a,{Z:function(){return y}});var l=t(3396),n=t(4870),r=t(7139),i=t(9242),d=t(9545),o=t(1020);const c={class:"input-field"},s={key:0,selected:"",value:"12"},u=["value"],v=(0,l._)("label",null,"Фильтрация по месяцам",-1);var _=(0,l.aZ)({__name:"MonthSelectComponent",props:{showAll:{type:Boolean}},setup(e){const{transactionsMonthFilter:a}=(0,o.Jk)((0,d.C)()),t=(0,n.iH)(),_=(0,n.iH)(),m=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];return(0,l.bv)((()=>{_.value=M.FormSelect.init(t.value)})),(e,d)=>((0,l.wg)(),(0,l.iD)("div",c,[(0,l.wy)((0,l._)("select",{ref_key:"monthSelect",ref:t,"onUpdate:modelValue":d[0]||(d[0]=e=>(0,n.dq)(a)?a.value=e:null)},[e.$props.showAll?((0,l.wg)(),(0,l.iD)("option",s,"Показать всё")):(0,l.kq)("",!0),((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(m,((e,a)=>(0,l._)("option",{key:a,value:a},(0,r.zw)(e),9,u))),64))],512),[[i.bM,(0,n.SU)(a),void 0,{number:!0}]]),v]))}});const m=_;var y=m},6838:function(e,a,t){t.d(a,{Z:function(){return m}});var l=t(3396),n=t(4870),r=t(7139),i=t(9242),d=t(9545),o=t(1020);const c={class:"input-field"},s=["value"],u=(0,l._)("label",null,"Фильтрация по годам",-1);var v=(0,l.aZ)({__name:"YearSelectComponent",setup(e){const{transactionsSortedByDate:a,transactionsYearFilter:t}=(0,o.Jk)((0,d.C)()),v=(0,n.iH)(),_=(0,n.iH)(),m=(0,l.Fl)((()=>{const e=new Set;if(e.add((new Date).getFullYear()),a.value){a.value.forEach((a=>{const t=new Date(a.date).getFullYear();e.add(t)}));const t=Array.from(e),l=Math.max.apply(null,t)+1;return e.add(l),e}return e}));return(0,l.bv)((()=>{_.value=M.FormSelect.init(v.value)})),(e,a)=>((0,l.wg)(),(0,l.iD)("div",c,[(0,l.wy)((0,l._)("select",{ref_key:"yearSelect",ref:v,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.dq)(t)?t.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m.value,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,r.zw)(e),9,s)))),128))],512),[[i.bM,(0,n.SU)(t),void 0,{number:!0}]]),u]))}});const _=v;var m=_},8745:function(e,a,t){t.r(a),t.d(a,{default:function(){return ee}});var l=t(3396),n=(t(560),t(7139)),r=t(4870),i=t(3256),d=t(9545),o=t(1520),c=t(6135),s=t(8263),u=t(1020);const v=e=>((0,l.dD)("data-v-5d8c0c5a"),e=e(),(0,l.Cn)(),e),_={class:"card-panel grey lighten-2 calendar-list__card day-card"},m={class:"day-card__header"},y={class:"row valign-wrapper"},g={class:"col s12"},w={class:"center-align day-card__date"},f={class:"row valign-center blue lighten-3"},p={class:"col s12"},F={class:"center-align day-card__balance"},h={key:0,class:"valign-center"},k={class:"col s12 red white-text"},D=v((()=>(0,l._)("div",{class:"center-align day-card__overspending"},"Не учтено ",-1))),b={class:"center-align day-card__overspending"},S={class:"day-card__section day-card__section-income green lighten-4"},N={class:"center-align day-card__income-list-item"},x={class:"day-card__section day-card__section-outcome orange lighten-4"},C={class:"center-align day-card__income-list-item"},U={class:"center-align day-card__income-list"},z={class:"day-card__section day-card__section-outcome red lighten-3"},Y={class:"center-align day-card__income-list-item"},Z={class:"center-align day-card__income-list"},H={class:"day-card__footer"},M={class:"valign-center"},T={class:"col s12"},I={class:"center-align day-card__balance green"};var J=(0,l.aZ)({__name:"CalendarDayCardComponent",props:{day:{}},setup(e){const a=e,{dateFilter:t,currencyFilter:v}=(0,i.y)(),{transactionsSortedByDate:J}=(0,u.Jk)((0,d.C)()),{categoriesAvailableForLimitation:P}=(0,u.Jk)((0,o.x)()),{limits:K}=(0,u.Jk)((0,c.L)()),{accounts:W}=(0,u.Jk)((0,s.o)()),q=new Date(a.day.year,a.day.month,a.day.day).getTime(),A=new Date(a.day.year,a.day.month,0).getDate(),B=new Date(a.day.year,a.day.month-1,A).getTime(),V=(0,l.Fl)((()=>W.value.map((e=>{const a=J.value.filter((a=>a.accountId===e.id)).filter((e=>"income"===e.type)).filter((e=>e.date<q)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0),t=J.value.filter((a=>a.accountId===e.id)).filter((e=>"outcome"===e.type)).filter((e=>e.date<q)).reduce(((e,a)=>Number((e-a.amount).toFixed(2))),0),l=e.initialBalance+a+t;return{...e,resultSumTillToday:l}})).reduce(((e,a)=>Number((e+a.resultSumTillToday).toFixed(2))),0))),L=(0,l.Fl)((()=>Number(V.value+G.value-O.value-Q.value))),j=(0,l.Fl)((()=>P.value.map((e=>{const a=J.value.filter((e=>e.date>B)).filter((e=>e.date<=q)).filter((e=>!e.isNotPlanned)).filter((a=>a.categoryId===e.id)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0),t=K.value.find((a=>a.categoryId===e.id))?.limit;console.log(a,t,a-t>0,e.name);const l=a-t>0?Number((a-t).toFixed(2)):0;return{...e,overspend:l}})).filter((e=>e.overspend>0)).reduce(((e,a)=>Number((e+a.overspend).toFixed(2))),0))),E=(0,l.Fl)((()=>J.value.filter((e=>"transfer"!==e.type)).filter((e=>e.date===q)))),G=(0,l.Fl)((()=>E.value.filter((e=>"income"===e.type)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),$=(0,l.Fl)((()=>E.value.filter((e=>"outcome"===e.type)).filter((e=>!e.isNotPlanned)))),O=(0,l.Fl)((()=>$.value.reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),Q=(0,l.Fl)((()=>E.value.filter((e=>"outcome"===e.type)).filter((e=>e.isNotPlanned)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),R=(0,l.Fl)((()=>J.value.filter((e=>e.isNotPlanned)).filter((e=>e.date>B)).filter((e=>e.date<=q)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),X=(0,l.Fl)((()=>P.value.map((e=>{const a=E.value.filter((e=>!e.isNotPlanned)).filter((a=>a.categoryId===e.id)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0);return{...e,total:a}})).filter((e=>0!==e.total)))),ee=(0,l.Fl)((()=>P.value.map((e=>{const a=E.value.filter((e=>e.isNotPlanned)).filter((a=>a.categoryId===e.id)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0);return{...e,total:a}})).filter((e=>0!==e.total))));return(e,a)=>((0,l.wg)(),(0,l.iD)("article",_,[(0,l._)("header",m,[(0,l._)("div",y,[(0,l._)("div",g,[(0,l._)("div",w,(0,n.zw)((0,r.SU)(t)((0,r.SU)(q))),1)])]),(0,l._)("div",f,[(0,l._)("div",p,[(0,l._)("div",F,[(0,l._)("strong",null,"Утром "+(0,n.zw)((0,r.SU)(v)(V.value)),1)])])]),R.value+j.value>0?((0,l.wg)(),(0,l.iD)("div",h,[(0,l._)("div",k,[D,(0,l._)("div",b,(0,n.zw)((0,r.SU)(v)(R.value+j.value)),1)])])):(0,l.kq)("",!0)]),(0,l._)("section",S,[(0,l._)("div",N,[(0,l._)("strong",null,"Доход "+(0,n.zw)((0,r.SU)(v)(G.value)),1)])]),(0,l._)("section",x,[(0,l._)("div",C,[(0,l._)("strong",null,"Расход "+(0,n.zw)((0,r.SU)(v)(O.value)),1)]),(0,l._)("ul",U,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(X.value,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,class:"day-card__income-list-item"},(0,n.zw)(e.name)+" - "+(0,n.zw)((0,r.SU)(v)(e["total"])),1)))),128))])]),(0,l._)("section",z,[(0,l._)("div",Y,[(0,l._)("strong",null,"Вне плана "+(0,n.zw)((0,r.SU)(v)(Q.value)),1)]),(0,l._)("ul",Z,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ee.value,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,class:"day-card__income-list-item"},(0,n.zw)(e.name)+" - "+(0,n.zw)((0,r.SU)(v)(e["total"])),1)))),128))])]),(0,l._)("footer",H,[(0,l._)("div",M,[(0,l._)("div",T,[(0,l._)("div",I,[(0,l._)("strong",null,"Вечером "+(0,n.zw)((0,r.SU)(v)(L.value)),1)])])])])]))}}),P=t(89);const K=(0,P.Z)(J,[["__scopeId","data-v-5d8c0c5a"]]);var W=K;const q={class:"calendar-list"};var A=(0,l.aZ)({__name:"CalendarGridComponent",setup(e){const{transactionsMonthFilter:a,transactionsYearFilter:t}=(0,u.Jk)((0,d.C)()),r=["Su","Mo","Tu","We","Th","Fr","Sa"],i=(0,l.Fl)((()=>new Date(t.value,a.value+1,0).getDate())),o=(0,l.Fl)((()=>{const e=[];let l=1;for(let n=1;n<=i.value;n++){const i={id:0,week:0,day:0,month:0,weekday:0,weekdayName:"",year:0};i.day=n,i.month=a.value,i.year=t.value,i.weekday=new Date(t.value,a.value,n).getDay(),i.weekdayName=r[i.weekday],i.week=l,i.id=new Date(i.year,i.month,i.day).getTime(),e.push(i),0===i.weekday&&l++}return e}));return(e,a)=>((0,l.wg)(),(0,l.iD)("ul",q,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.value,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,style:(0,n.j5)({"grid-area":e.weekdayName,"grid-row":e.week}),class:"calendar-list__item"},[(0,l.Wm)(W,{day:e},null,8,["day"])],4)))),128))]))}});const B=(0,P.Z)(A,[["__scopeId","data-v-717b28f5"]]);var V=B,L=t(5632),j=t(6838);const E=(0,l._)("div",{class:"container"},[(0,l._)("h3",null,"Календарь")],-1),G=(0,l._)("hr",null,null,-1),$={class:"row"},O={class:"col s12 m2 offset-m7"},Q={class:"col s12 m3"};var R=(0,l.aZ)({__name:"CalendarView",setup(e){return(e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[E,G,(0,l._)("div",$,[(0,l._)("div",O,[(0,l.Wm)(j.Z)]),(0,l._)("div",Q,[(0,l.Wm)(L.Z,{"show-all":!1})])]),(0,l.Wm)(V)],64))}});const X=R;var ee=X}}]);
//# sourceMappingURL=745.12371503.js.map