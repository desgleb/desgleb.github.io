{"version":3,"file":"js/791.3d3dac55.js","mappings":"6LAESA,MAAM,c,GACTC,EAAAA,EAAAA,GAAqB,UAAjB,gBAAY,G,SAOgBD,MAAM,U,aAc/BA,MAAM,Y,qHAvBjBE,EAAAA,EAAAA,IAgCM,aA/BJD,EAAAA,EAAAA,GAIM,MAJNE,EAIM,CAHJC,GAEAH,EAAAA,EAAAA,GAAiD,WAAAI,EAAAA,EAAAA,IAA1CC,EAAAC,SAASC,eAAeF,EAAAG,KAAKC,OAAI,KAG5BJ,EAAAK,UAAO,WAArBC,EAAAA,EAAAA,IAAyBC,EAAA,CAAAC,IAAA,KAEVR,EAAAS,WAAWC,S,WAM1Bd,EAAAA,EAAAA,IAgBU,UAAAe,EAAA,gBAfRf,EAAAA,EAAAA,IAcMgB,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAdab,EAAAS,YAAPK,K,WAAZlB,EAAAA,EAAAA,IAcM,OAd0BY,IAAKM,EAAIC,I,EAEvCpB,EAAAA,EAAAA,GAII,WAHFA,EAAAA,EAAAA,GAAgC,eAAAI,EAAAA,EAAAA,IAArBe,EAAIE,OAAK,YAAY,KAChCjB,EAAAA,EAAAA,IAAGC,EAAAC,SAASC,eAAeY,EAAIG,QAAS,QACxClB,EAAAA,EAAAA,IAAGC,EAAAC,SAASC,eAAeY,EAAII,QAAK,2BAEtCtB,EAAAA,EAAAA,IAMM,MANNuB,EAMM,EALJxB,EAAAA,EAAAA,GAIO,OAHJD,OAAK0B,EAAAA,EAAAA,IAAA,EAAGN,EAAIO,eACP,gBACLC,OAAKC,EAAAA,EAAAA,IAAA,CAAAC,MAAWV,EAAIW,gBAAkB,O,eAJVX,EAAIY,gB,WAdT,WAAhC9B,EAAAA,EAAAA,IAII,IAJJ+B,EAII,EAHFC,EAAAA,EAAAA,IAEcC,EAAA,CAFDC,GAAG,eAAa,C,kBAAC,IAE9B,UAF8B,wC,0CA8BpC,GACEC,KAAM,WACNC,WAAY,CAAEC,OAAMA,EAAAA,GACpBC,KAAMA,KAAA,CACJ7B,SAAS,EACTI,WAAY,KAEd0B,SAAU,KACLC,EAAAA,EAAAA,IAAW,CAAC,UAEjB,aAAMC,GACJ,MAAMC,QAAgBC,KAAKC,OAAOC,SAAS,gBACrChC,QAAmB8B,KAAKC,OAAOC,SAAS,mBAE9CF,KAAK9B,WAAaA,EAAWiC,KAAK5B,IAChC,MAAMG,EAAQqB,EACXK,QAAQC,GAAQA,EAAIC,aAAe/B,EAAIC,KACvC4B,QAAQC,GAAqB,YAAbA,EAAIE,OACpBC,QAAO,CAACC,EAAOC,IAEND,IAAUC,EAAOC,QACxB,GAECC,EAAW,IAAMlC,EAASH,EAAII,MAC9BO,EAAkB0B,EAAU,IAAM,IAAMA,EACxC9B,EACJ8B,EAAU,GAAK,QAAUA,EAAU,IAAM,SAAW,MAEhDC,EAAetC,EAAII,MAAQD,EAC3BS,EAAW,GACf0B,EAAe,EAAI,gBAAkB,eACnClD,EAAAA,EAAAA,GAAemD,KAAKC,IAAIF,MAE5B,MAAO,IACFtC,EACHW,kBACAJ,gBACAJ,QACAS,UACD,IAGHa,KAAKlC,SAAU,CACjB,G,QC/EF,MAAMkD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://vue-cash/./src/views/Planning.vue","webpack://vue-cash/./src/views/Planning.vue?4d61"],"sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <h3>Планирование</h3>\n      <!--suppress JSUnresolvedReference -->\n      <h4>{{ $filters.currencyFilter(info.bill) }}</h4>\n    </div>\n\n    <Loader v-if=\"loading\" />\n\n    <p v-else-if=\"!categories.length\" class=\"center\">\n      <router-link to=\"/categories\">\n        Добавьте хотя бы одну категорию\n      </router-link>\n    </p>\n\n    <section v-else>\n      <div v-for=\"cat in categories\" :key=\"cat.id\">\n        <!--suppress JSUnresolvedReference -->\n        <p>\n          <strong>{{ cat.title }}</strong>\n          {{ $filters.currencyFilter(cat.spend) }} из\n          {{ $filters.currencyFilter(cat.limit) }}\n        </p>\n        <div class=\"progress\" v-tooltip=\"cat.tooltip\">\n          <div\n            :class=\"[cat.progressColor]\"\n            class=\"determinate\"\n            :style=\"{ width: cat.progressPercent + '%' }\"\n          ></div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport Loader from \"@/components/app/Loader.vue\";\nimport { mapGetters } from \"vuex\";\nimport currencyFilter from \"@/filters/currency.filter\";\n\nexport default {\n  name: \"Planning\",\n  components: { Loader },\n  data: () => ({\n    loading: true,\n    categories: [],\n  }),\n  computed: {\n    ...mapGetters([\"info\"]),\n  },\n  async mounted() {\n    const records = await this.$store.dispatch(\"fetchRecords\");\n    const categories = await this.$store.dispatch(\"fetchCategories\");\n\n    this.categories = categories.map((cat) => {\n      const spend = records\n        .filter((rec) => rec.categoryId === cat.id)\n        .filter((rec) => rec.type === \"outcome\")\n        .reduce((total, record) => {\n          // noinspection JSUnusedAssignment\n          return (total += +record.amount);\n        }, 0);\n\n      const percent = (100 * spend) / cat.limit;\n      const progressPercent = percent > 100 ? 100 : percent;\n      const progressColor =\n        percent < 60 ? \"green\" : percent < 100 ? \"yellow\" : \"red\";\n\n      const tooltipValue = cat.limit - spend;\n      const tooltip = `${\n        tooltipValue < 0 ? \"Превышение на\" : \"Осталось\"\n      } ${currencyFilter(Math.abs(tooltipValue))}`;\n\n      return {\n        ...cat,\n        progressPercent,\n        progressColor,\n        spend,\n        tooltip,\n      };\n    });\n\n    this.loading = false;\n  },\n};\n</script>\n\n<style scoped lang=\"scss\"></style>\n","import { render } from \"./Planning.vue?vue&type=template&id=0cc20e9b\"\nimport script from \"./Planning.vue?vue&type=script&lang=js\"\nexport * from \"./Planning.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","_ctx","$filters","currencyFilter","info","bill","loading","_createBlock","_component_Loader","key","categories","length","_hoisted_4","_Fragment","_renderList","cat","id","title","spend","limit","_hoisted_5","_normalizeClass","progressColor","style","_normalizeStyle","width","progressPercent","tooltip","_hoisted_3","_createVNode","_component_router_link","to","name","components","Loader","data","computed","mapGetters","mounted","records","this","$store","dispatch","map","filter","rec","categoryId","type","reduce","total","record","amount","percent","tooltipValue","Math","abs","__exports__","render"],"sourceRoot":""}