{"version":3,"file":"js/573.593320ff.js","mappings":"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","sources":["webpack://money-catcher/./src/components/MonthSelectComponent.vue?d0d8","webpack://money-catcher/./src/components/MonthSelectComponent.vue","webpack://money-catcher/./src/components/MonthSelectComponent.vue?e854","webpack://money-catcher/./src/components/YearSelectComponent.vue?ca55","webpack://money-catcher/./src/components/YearSelectComponent.vue","webpack://money-catcher/./src/components/YearSelectComponent.vue?1c0b","webpack://money-catcher/./src/views/PlanningView.vue?8a4b","webpack://money-catcher/./src/views/PlanningView.vue","webpack://money-catcher/./src/views/PlanningView.vue?9fd6"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, isRef as _isRef, vModelSelect as _vModelSelect, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"input-field\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"option\", {\n  selected: \"\",\n  value: \"12\"\n}, \"Показать всё\", -1)\nconst _hoisted_3 = [\"value\"]\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Фильтрация по месяцам\", -1)\n\nimport { onMounted, ref } from 'vue';\r\nimport { useTransactionsStore } from '@/stores/transactions';\r\nimport { storeToRefs } from 'pinia';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'MonthSelectComponent',\n  setup(__props) {\n\r\nconst { transactionsMonthFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst monthSelect = ref();\r\nconst monthSelectInstance = ref();\r\n\r\nconst monthsArray: string[] = [ 'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь' ];\r\n\r\nonMounted(() => {\r\n  monthSelectInstance.value = M.FormSelect.init(monthSelect.value);\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"select\", {\n      ref_key: \"monthSelect\",\n      ref: monthSelect,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(transactionsMonthFilter) ? (transactionsMonthFilter).value = $event : null))\n    }, [\n      _hoisted_2,\n      (_openBlock(), _createElementBlock(_Fragment, null, _renderList(monthsArray, (month, index) => {\n        return _createElementVNode(\"option\", {\n          key: index,\n          value: index\n        }, _toDisplayString(month), 9, _hoisted_3)\n      }), 64))\n    ], 512), [\n      [\n        _vModelSelect,\n        _unref(transactionsMonthFilter),\n        void 0,\n        { number: true }\n      ]\n    ]),\n    _hoisted_4\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"input-field\">\r\n    <select ref=\"monthSelect\" v-model.number=\"transactionsMonthFilter\">\r\n      <option selected value=\"12\">Показать всё</option>\r\n      <option v-for=\"(month, index) in monthsArray\" :key=\"index\" :value=\"index\">{{ month }}</option>\r\n    </select>\r\n    <label>Фильтрация по месяцам</label>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { onMounted, ref } from 'vue';\r\nimport { useTransactionsStore } from '@/stores/transactions';\r\nimport { storeToRefs } from 'pinia';\r\n\r\nconst { transactionsMonthFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst monthSelect = ref();\r\nconst monthSelectInstance = ref();\r\n\r\nconst monthsArray: string[] = [ 'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь' ];\r\n\r\nonMounted(() => {\r\n  monthSelectInstance.value = M.FormSelect.init(monthSelect.value);\r\n});\r\n</script>","import script from \"./MonthSelectComponent.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./MonthSelectComponent.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, isRef as _isRef, vModelSelect as _vModelSelect, createElementVNode as _createElementVNode, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"input-field\" }\nconst _hoisted_2 = [\"value\"]\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Фильтрация по годам\", -1)\n\nimport { computed, ComputedRef, onMounted, ref } from 'vue';\r\nimport { Transaction, useTransactionsStore } from '@/stores/transactions';\r\nimport { storeToRefs } from 'pinia';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'YearSelectComponent',\n  setup(__props) {\n\r\nconst { transactionsSortedByDate, transactionsYearFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst yearSelect = ref();\r\nconst yearSelectInstance = ref();\r\n\r\nconst yearsSet: ComputedRef<Set<number>> = computed((): Set<number> => {\r\n  const years: Set<number> = new Set();\r\n  years.add(new Date().getFullYear());\r\n  if (!!transactionsSortedByDate.value) {\r\n    transactionsSortedByDate.value.forEach((tr: Transaction) => {\r\n      const trYear: number = new Date(tr.date).getFullYear();\r\n      years.add(trYear);\r\n    });\r\n    const yearsArr: number[] = Array.from(years);\r\n    const maxYear: number = Math.max.apply(null, yearsArr) + 1;\r\n    years.add(maxYear);\r\n    return years;\r\n  } else {\r\n    return years;\r\n  }\r\n});\r\n\r\nonMounted(() => {\r\n  yearSelectInstance.value = M.FormSelect.init(yearSelect.value);\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"select\", {\n      ref_key: \"yearSelect\",\n      ref: yearSelect,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(transactionsYearFilter) ? (transactionsYearFilter).value = $event : null))\n    }, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(yearsSet.value, (year) => {\n        return (_openBlock(), _createElementBlock(\"option\", {\n          key: year,\n          value: year\n        }, _toDisplayString(year), 9, _hoisted_2))\n      }), 128))\n    ], 512), [\n      [\n        _vModelSelect,\n        _unref(transactionsYearFilter),\n        void 0,\n        { number: true }\n      ]\n    ]),\n    _hoisted_3\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"input-field\">\r\n    <select ref=\"yearSelect\" v-model.number=\"transactionsYearFilter\">\r\n      <option v-for=\"year in yearsSet\" :key=\"year\" :value=\"year\">{{ year }}</option>\r\n    </select>\r\n    <label>Фильтрация по годам</label>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, ComputedRef, onMounted, ref } from 'vue';\r\nimport { Transaction, useTransactionsStore } from '@/stores/transactions';\r\nimport { storeToRefs } from 'pinia';\r\n\r\nconst { transactionsSortedByDate, transactionsYearFilter } = storeToRefs(useTransactionsStore());\r\n\r\nconst yearSelect = ref();\r\nconst yearSelectInstance = ref();\r\n\r\nconst yearsSet: ComputedRef<Set<number>> = computed((): Set<number> => {\r\n  const years: Set<number> = new Set();\r\n  years.add(new Date().getFullYear());\r\n  if (!!transactionsSortedByDate.value) {\r\n    transactionsSortedByDate.value.forEach((tr: Transaction) => {\r\n      const trYear: number = new Date(tr.date).getFullYear();\r\n      years.add(trYear);\r\n    });\r\n    const yearsArr: number[] = Array.from(years);\r\n    const maxYear: number = Math.max.apply(null, yearsArr) + 1;\r\n    years.add(maxYear);\r\n    return years;\r\n  } else {\r\n    return years;\r\n  }\r\n});\r\n\r\nonMounted(() => {\r\n  yearSelectInstance.value = M.FormSelect.init(yearSelect.value);\r\n});\r\n</script>","import script from \"./YearSelectComponent.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./YearSelectComponent.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-44d77133\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Планирование\", -1))\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_3 = {\n  key: 0,\n  class: \"row\"\n}\nconst _hoisted_4 = { class: \"col\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"У Вас нет ни одной расходной категории.\", -1))\nconst _hoisted_6 = {\n  key: 1,\n  class: \"row\"\n}\nconst _hoisted_7 = {\n  key: 0,\n  class: \"red-text\"\n}\nconst _hoisted_8 = { key: 2 }\nconst _hoisted_9 = { class: \"row valign-wrapper\" }\nconst _hoisted_10 = { class: \"col s12 m4\" }\nconst _hoisted_11 = [\"disabled\"]\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"material-icons right\" }, \"calculate\", -1))\nconst _hoisted_13 = { class: \"col s12 m2 offset-m3\" }\nconst _hoisted_14 = { class: \"col s12 m3\" }\nconst _hoisted_15 = { key: 0 }\nconst _hoisted_16 = {\n  key: 0,\n  class: \"red-text\"\n}\nconst _hoisted_17 = { class: \"progress\" }\nconst _hoisted_18 = { class: \"highlight centered responsive-table\" }\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [\n  /*#__PURE__*/_createElementVNode(\"tr\", null, [\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Дата\"),\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Счёт\"),\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Сумма\"),\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Комментарий\"),\n    /*#__PURE__*/_createElementVNode(\"th\", null, \"Действия\")\n  ])\n], -1))\nconst _hoisted_20 = { class: \"row mb-0 flex-center\" }\nconst _hoisted_21 = { class: \"col\" }\nconst _hoisted_22 = [\"id\"]\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"material-icons\" }, \"done_all\", -1))\nconst _hoisted_24 = [\n  _hoisted_23\n]\nconst _hoisted_25 = { class: \"col\" }\nconst _hoisted_26 = [\"id\", \"data-target\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"material-icons\" }, \"edit\", -1))\nconst _hoisted_28 = [\n  _hoisted_27\n]\nconst _hoisted_29 = { class: \"col\" }\nconst _hoisted_30 = [\"id\"]\nconst _hoisted_31 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"material-icons\" }, \"delete\", -1))\nconst _hoisted_32 = [\n  _hoisted_31\n]\n\nimport MonthSelectComponent from '@/components/MonthSelectComponent.vue';\r\nimport YearSelectComponent from '@/components/YearSelectComponent.vue';\r\nimport { storeToRefs } from 'pinia';\r\nimport { useCategoriesStore } from '@/stores/categories';\r\nimport { useTransactionsStore } from '@/stores/transactions';\r\nimport { usePlanningStore } from '@/stores/limits';\r\nimport { useFiltersStore } from '@/stores/filters';\r\nimport { computed, ComputedRef } from 'vue';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PlanningView',\n  setup(__props) {\n\r\nconst { categoriesAvailableForLimitation } = storeToRefs(useCategoriesStore());\r\nconst {\r\n  selectedTransactionId,\r\n  outcomeTransactions,\r\n  transactionsMonthFilter\r\n} = storeToRefs(useTransactionsStore());\r\nconst { changeTransactionToRegular } = useTransactionsStore();\r\nconst { limits } = storeToRefs(usePlanningStore());\r\nconst { currencyFilter, dateFilter } = useFiltersStore();\r\n\r\nconst limitCategories = computed(() => {\r\n  return categoriesAvailableForLimitation.value.map((cat) => {\r\n    const records = outcomeTransactions.value\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .filter((tr) => tr.isForecast) || [];\r\n\r\n    const spend: number = outcomeTransactions.value\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .filter((tr) => !tr.isForecast).reduce((total, record): number => {\r\n        // noinspection JSUnusedAssignment\r\n        return Number((total += +record.amount).toFixed(2));\r\n      }, 0);\r\n\r\n    const limitInfo = limits.value.find((lim) => lim.categoryId === cat.id);\r\n\r\n    let limit: number;\r\n    if (!!limitInfo) {\r\n      limit = limitInfo.limit;\r\n    } else {\r\n      limit = 0;\r\n    }\r\n\r\n    const overspend: number = (spend - limit) > 0 ? Number((spend - limit).toFixed(2)) : 0;\r\n\r\n    const percent: number = limit > 0 ? (100 * spend) / limit : limit;\r\n    const progressPercent: number = percent > 100 ? 100 : percent;\r\n\r\n    const progressColor: string = percent < 80 ? 'green' : percent < 100 ? 'yellow' : 'red';\r\n\r\n    return {\r\n      ...cat,\r\n      records,\r\n      spend,\r\n      limit,\r\n      overspend,\r\n      progressPercent,\r\n      progressColor\r\n    };\r\n  });\r\n});\r\n\r\nconst limitTotal: ComputedRef<number> = computed((): number => {\r\n  if (transactionsMonthFilter.value === 12) {\r\n    let limit = limitCategories.value.reduce((total, cat) => {\r\n      return Number((total + cat.limit).toFixed(2));\r\n    }, 0);\r\n    limit = limit * transactionsMonthFilter.value;\r\n    return limit;\r\n  } else {\r\n    return limitCategories.value.reduce((total, cat) => {\r\n      return Number((total + cat.limit).toFixed(2));\r\n    }, 0);\r\n  }\r\n});\r\n\r\nconst spendTotal: ComputedRef<number> = computed((): number => {\r\n  return limitCategories.value.reduce((total, cat) => {\r\n    return Number((total + cat.spend).toFixed(2));\r\n  }, 0);\r\n});\r\n\r\nconst overspendTotal: ComputedRef<number> = computed((): number => {\r\n  return limitCategories.value.reduce((total, cat) => {\r\n    return Number((total + cat.overspend).toFixed(2));\r\n  }, 0);\r\n});\r\n\r\n// May be\r\n// const notPlannedTotal: ComputedRef<number> = computed((): number => {\r\n//   return outcomeTransactions.value\r\n//     .filter((tr) => tr.isNotPlanned)\r\n//     .reduce((total, tr) => {\r\n//       return Number((total + tr.amount).toFixed(2));\r\n//     }, 0);\r\n// });\r\n\r\nconst setTransactionId = (event: any) => {\r\n  let el: HTMLButtonElement;\r\n  if (event.target.tagName === 'BUTTON') {\r\n    el = event.target;\r\n  } else {\r\n    el = event.target.parentElement;\r\n  }\r\n  selectedTransactionId.value = el.id;\r\n};\r\n\r\nconst setRegular = async (event: any) => {\r\n  setTransactionId(event);\r\n  if (!selectedTransactionId.value) return;\r\n  await changeTransactionToRegular();\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _hoisted_1,\n    _hoisted_2,\n    (_unref(categoriesAvailableForLimitation).length === 0)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, [\n            _hoisted_5,\n            _createElementVNode(\"p\", null, [\n              _createTextVNode(\"Добавьте хотя бы одну расходную \"),\n              _createVNode(_component_router_link, { to: \"/categories\" }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"категорию\")\n                ]),\n                _: 1\n              })\n            ])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n          _createElementVNode(\"h5\", null, [\n            _createTextVNode(\" Запланировано: \" + _toDisplayString(_unref(currencyFilter)(limitTotal.value)) + \". Израсходовано: \" + _toDisplayString(_unref(currencyFilter)(spendTotal.value)) + \". \", 1),\n            (overspendTotal.value > 0)\n              ? (_openBlock(), _createElementBlock(\"small\", _hoisted_7, \" Перерасход: \" + _toDisplayString(_unref(currencyFilter)(overspendTotal.value)), 1))\n              : _createCommentVNode(\"\", true)\n          ])\n        ])),\n    (limitCategories.value.length > 0)\n      ? (_openBlock(), _createElementBlock(\"section\", _hoisted_8, [\n          _createElementVNode(\"div\", _hoisted_9, [\n            _createElementVNode(\"div\", _hoisted_10, [\n              _createElementVNode(\"button\", {\n                disabled: _unref(categoriesAvailableForLimitation).length === 0,\n                class: \"btn modal-trigger\",\n                \"data-target\": \"modalSetLimit\"\n              }, [\n                _hoisted_12,\n                _createTextVNode(\" Установить лимит \")\n              ], 8, _hoisted_11)\n            ]),\n            _createElementVNode(\"div\", _hoisted_13, [\n              _createVNode(YearSelectComponent)\n            ]),\n            _createElementVNode(\"div\", _hoisted_14, [\n              _createVNode(MonthSelectComponent)\n            ])\n          ]),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(limitCategories.value, (cat) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: cat.id!,\n              class: \"row\"\n            }, [\n              (!!cat)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                    _createElementVNode(\"p\", null, [\n                      _createElementVNode(\"strong\", null, _toDisplayString(cat.name), 1),\n                      _createTextVNode(\" \" + _toDisplayString(_unref(currencyFilter)(cat.spend)) + \" из \" + _toDisplayString(_unref(currencyFilter)(cat.limit)) + \" \", 1),\n                      (cat.overspend > 0)\n                        ? (_openBlock(), _createElementBlock(\"small\", _hoisted_16, \"Перерасход на \" + _toDisplayString(_unref(currencyFilter)(cat.overspend)), 1))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_17, [\n                      _createElementVNode(\"div\", {\n                        class: _normalizeClass([[cat.progressColor], \"determinate\"]),\n                        style: _normalizeStyle({ width: cat.progressPercent + '%' })\n                      }, null, 6)\n                    ]),\n                    _createElementVNode(\"table\", _hoisted_18, [\n                      _hoisted_19,\n                      _createElementVNode(\"tbody\", null, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cat.records, (rec) => {\n                          return (_openBlock(), _createElementBlock(\"tr\", {\n                            key: rec.id\n                          }, [\n                            _createElementVNode(\"td\", null, _toDisplayString(_unref(dateFilter)(rec['date'])), 1),\n                            _createElementVNode(\"td\", null, _toDisplayString(rec['account']), 1),\n                            _createElementVNode(\"td\", null, _toDisplayString(_unref(currencyFilter)(rec['amount'])), 1),\n                            _createElementVNode(\"td\", null, _toDisplayString(rec['description']), 1),\n                            _createElementVNode(\"td\", null, [\n                              _createElementVNode(\"div\", _hoisted_20, [\n                                _createElementVNode(\"div\", _hoisted_21, [\n                                  _createElementVNode(\"button\", {\n                                    id: rec.id,\n                                    class: \"green btn\",\n                                    onClick: setRegular\n                                  }, _hoisted_24, 8, _hoisted_22)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_25, [\n                                  _createElementVNode(\"button\", {\n                                    id: rec.id,\n                                    \"data-target\": rec.type === 'transfer' ? 'modalEditTransfer' : 'modalEditTransaction',\n                                    class: \"yellow btn modal-trigger black-text\",\n                                    onClick: setTransactionId\n                                  }, _hoisted_28, 8, _hoisted_26)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_29, [\n                                  _createElementVNode(\"button\", {\n                                    id: rec.id,\n                                    class: \"red btn modal-trigger\",\n                                    \"data-target\": \"modalDeleteTransaction\",\n                                    onClick: setTransactionId\n                                  }, _hoisted_32, 8, _hoisted_30)\n                                ])\n                              ])\n                            ])\n                          ]))\n                        }), 128))\n                      ])\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]))\n          }), 128))\n        ]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","<template>\r\n  <h3>Планирование</h3>\r\n  <hr>\r\n  <div v-if=\"categoriesAvailableForLimitation.length === 0\" class=\"row\">\r\n    <div class=\"col\">\r\n      <p>У Вас нет ни одной расходной категории.</p>\r\n      <p>Добавьте хотя бы одну расходную\r\n        <router-link to=\"/categories\">категорию</router-link>\r\n      </p>\r\n    </div>\r\n  </div>\r\n  <div v-else class=\"row\">\r\n    <h5>\r\n      Запланировано: {{ currencyFilter(limitTotal) }}. Израсходовано: {{ currencyFilter(spendTotal) }}.\r\n      <small\r\n        v-if=\"overspendTotal > 0\"\r\n        class=\"red-text\">\r\n        Перерасход: {{ currencyFilter(overspendTotal) }}\r\n      </small>\r\n    </h5>\r\n  </div>\r\n\r\n\r\n  <section v-if=\"limitCategories.length > 0\">\r\n    <div class=\"row valign-wrapper\">\r\n      <div class=\"col s12 m4\">\r\n        <button\r\n          :disabled=\"categoriesAvailableForLimitation.length === 0\"\r\n          class=\"btn modal-trigger\"\r\n          data-target=\"modalSetLimit\">\r\n          <i class=\"material-icons right\">calculate</i>\r\n          Установить лимит\r\n        </button>\r\n      </div>\r\n      <div class=\"col s12 m2 offset-m3\">\r\n        <YearSelectComponent/>\r\n      </div>\r\n      <div class=\"col s12 m3\">\r\n        <MonthSelectComponent/>\r\n      </div>\r\n    </div>\r\n    <div v-for=\"cat in limitCategories\" :key=\"cat.id!\" class=\"row\">\r\n      <div v-if=\"!!cat\">\r\n        <p>\r\n          <strong>{{ cat.name }}</strong>\r\n          {{ currencyFilter(cat.spend) }} из {{ currencyFilter(cat.limit) }}\r\n          <small v-if=\"cat.overspend > 0\" class=\"red-text\">Перерасход на {{ currencyFilter(cat.overspend) }}</small>\r\n        </p>\r\n        <div class=\"progress\">\r\n          <div\r\n            :class=\"[cat.progressColor]\"\r\n            :style=\"{ width: cat.progressPercent + '%' }\"\r\n            class=\"determinate\"></div>\r\n        </div>\r\n        <table class=\"highlight centered responsive-table\">\r\n          <thead>\r\n          <tr>\r\n            <th>Дата</th>\r\n            <th>Счёт</th>\r\n            <th>Сумма</th>\r\n            <th>Комментарий</th>\r\n            <th>Действия</th>\r\n          </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n          <tr v-for=\"rec in cat.records\" :key=\"rec.id\">\r\n            <td>{{ dateFilter(rec['date']) }}</td>\r\n            <td>{{ rec['account'] }}</td>\r\n            <td>{{ currencyFilter(rec['amount']) }}</td>\r\n            <td>{{ rec['description'] }}</td>\r\n            <td>\r\n              <div class=\"row mb-0 flex-center\">\r\n                <div class=\"col\">\r\n                  <button\r\n                    :id=\"rec.id\"\r\n                    class=\"green btn\"\r\n                    @click=\"setRegular\">\r\n                    <i class=\"material-icons\">done_all</i>\r\n                  </button>\r\n                </div>\r\n                <div class=\"col\">\r\n                  <button\r\n                    :id=\"rec.id\"\r\n                    :data-target=\"rec.type === 'transfer' ? 'modalEditTransfer' : 'modalEditTransaction'\"\r\n                    class=\"yellow btn modal-trigger black-text\"\r\n                    @click=\"setTransactionId\">\r\n                    <i class=\"material-icons\">edit</i>\r\n                  </button>\r\n                </div>\r\n                <div class=\"col\">\r\n                  <button\r\n                    :id=\"rec.id\"\r\n                    class=\"red btn modal-trigger\"\r\n                    data-target=\"modalDeleteTransaction\"\r\n                    @click=\"setTransactionId\">\r\n                    <i class=\"material-icons\">delete</i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </section>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport MonthSelectComponent from '@/components/MonthSelectComponent.vue';\r\nimport YearSelectComponent from '@/components/YearSelectComponent.vue';\r\nimport { storeToRefs } from 'pinia';\r\nimport { useCategoriesStore } from '@/stores/categories';\r\nimport { useTransactionsStore } from '@/stores/transactions';\r\nimport { usePlanningStore } from '@/stores/limits';\r\nimport { useFiltersStore } from '@/stores/filters';\r\nimport { computed, ComputedRef } from 'vue';\r\n\r\nconst { categoriesAvailableForLimitation } = storeToRefs(useCategoriesStore());\r\nconst {\r\n  selectedTransactionId,\r\n  outcomeTransactions,\r\n  transactionsMonthFilter\r\n} = storeToRefs(useTransactionsStore());\r\nconst { changeTransactionToRegular } = useTransactionsStore();\r\nconst { limits } = storeToRefs(usePlanningStore());\r\nconst { currencyFilter, dateFilter } = useFiltersStore();\r\n\r\nconst limitCategories = computed(() => {\r\n  return categoriesAvailableForLimitation.value.map((cat) => {\r\n    const records = outcomeTransactions.value\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .filter((tr) => tr.isForecast) || [];\r\n\r\n    const spend: number = outcomeTransactions.value\r\n      .filter((tr) => tr.categoryId === cat.id)\r\n      .filter((tr) => !tr.isForecast).reduce((total, record): number => {\r\n        // noinspection JSUnusedAssignment\r\n        return Number((total += +record.amount).toFixed(2));\r\n      }, 0);\r\n\r\n    const limitInfo = limits.value.find((lim) => lim.categoryId === cat.id);\r\n\r\n    let limit: number;\r\n    if (!!limitInfo) {\r\n      limit = limitInfo.limit;\r\n    } else {\r\n      limit = 0;\r\n    }\r\n\r\n    const overspend: number = (spend - limit) > 0 ? Number((spend - limit).toFixed(2)) : 0;\r\n\r\n    const percent: number = limit > 0 ? (100 * spend) / limit : limit;\r\n    const progressPercent: number = percent > 100 ? 100 : percent;\r\n\r\n    const progressColor: string = percent < 80 ? 'green' : percent < 100 ? 'yellow' : 'red';\r\n\r\n    return {\r\n      ...cat,\r\n      records,\r\n      spend,\r\n      limit,\r\n      overspend,\r\n      progressPercent,\r\n      progressColor\r\n    };\r\n  });\r\n});\r\n\r\nconst limitTotal: ComputedRef<number> = computed((): number => {\r\n  if (transactionsMonthFilter.value === 12) {\r\n    let limit = limitCategories.value.reduce((total, cat) => {\r\n      return Number((total + cat.limit).toFixed(2));\r\n    }, 0);\r\n    limit = limit * transactionsMonthFilter.value;\r\n    return limit;\r\n  } else {\r\n    return limitCategories.value.reduce((total, cat) => {\r\n      return Number((total + cat.limit).toFixed(2));\r\n    }, 0);\r\n  }\r\n});\r\n\r\nconst spendTotal: ComputedRef<number> = computed((): number => {\r\n  return limitCategories.value.reduce((total, cat) => {\r\n    return Number((total + cat.spend).toFixed(2));\r\n  }, 0);\r\n});\r\n\r\nconst overspendTotal: ComputedRef<number> = computed((): number => {\r\n  return limitCategories.value.reduce((total, cat) => {\r\n    return Number((total + cat.overspend).toFixed(2));\r\n  }, 0);\r\n});\r\n\r\n// May be\r\n// const notPlannedTotal: ComputedRef<number> = computed((): number => {\r\n//   return outcomeTransactions.value\r\n//     .filter((tr) => tr.isNotPlanned)\r\n//     .reduce((total, tr) => {\r\n//       return Number((total + tr.amount).toFixed(2));\r\n//     }, 0);\r\n// });\r\n\r\nconst setTransactionId = (event: any) => {\r\n  let el: HTMLButtonElement;\r\n  if (event.target.tagName === 'BUTTON') {\r\n    el = event.target;\r\n  } else {\r\n    el = event.target.parentElement;\r\n  }\r\n  selectedTransactionId.value = el.id;\r\n};\r\n\r\nconst setRegular = async (event: any) => {\r\n  setTransactionId(event);\r\n  if (!selectedTransactionId.value) return;\r\n  await changeTransactionToRegular();\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.row.mb-0 {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.flex-center {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  & .ml-0 {\r\n    margin-left: unset;\r\n  }\r\n}\r\n</style>","import script from \"./PlanningView.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./PlanningView.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./PlanningView.vue?vue&type=style&index=0&id=44d77133&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-44d77133\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_createElementVNode","selected","value","_hoisted_3","_hoisted_4","_defineComponent","__name","setup","__props","transactionsMonthFilter","storeToRefs","useTransactionsStore","monthSelect","ref","monthSelectInstance","monthsArray","onMounted","M","FormSelect","init","_ctx","_cache","_openBlock","_createElementBlock","_withDirectives","ref_key","$event","_isRef","_Fragment","_renderList","month","index","key","_toDisplayString","_vModelSelect","_unref","number","__exports__","transactionsSortedByDate","transactionsYearFilter","yearSelect","yearSelectInstance","yearsSet","computed","years","Set","add","Date","getFullYear","forEach","tr","trYear","date","yearsArr","Array","from","maxYear","Math","max","apply","year","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","categoriesAvailableForLimitation","useCategoriesStore","selectedTransactionId","outcomeTransactions","changeTransactionToRegular","limits","usePlanningStore","currencyFilter","dateFilter","useFiltersStore","limitCategories","map","cat","records","filter","categoryId","id","isForecast","spend","reduce","total","record","Number","amount","toFixed","limitInfo","find","lim","limit","overspend","percent","progressPercent","progressColor","limitTotal","spendTotal","overspendTotal","setTransactionId","event","el","target","tagName","parentElement","setRegular","async","_component_router_link","_resolveComponent","length","_createTextVNode","_createVNode","to","default","_withCtx","_","_createCommentVNode","disabled","YearSelectComponent","MonthSelectComponent","name","_normalizeClass","style","_normalizeStyle","width","rec","onClick","type"],"sourceRoot":""}