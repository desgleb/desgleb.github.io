"use strict";(self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[]).push([[584],{5632:function(e,a,t){t.d(a,{Z:function(){return m}});var l=t(3396),n=t(4870),r=t(7139),i=t(9242),o=t(9545),d=t(1020);const c={class:"input-field"},s={key:0,selected:"",value:"12"},u=["value"],v=(0,l._)("label",null,"Фильтрация по месяцам",-1);var _=(0,l.aZ)({__name:"MonthSelectComponent",props:{showAll:{type:Boolean}},setup(e){const{transactionsMonthFilter:a}=(0,d.Jk)((0,o.C)()),t=(0,n.iH)(),_=(0,n.iH)(),y=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];return(0,l.bv)((()=>{_.value=M.FormSelect.init(t.value)})),(e,o)=>((0,l.wg)(),(0,l.iD)("div",c,[(0,l.wy)((0,l._)("select",{ref_key:"monthSelect",ref:t,"onUpdate:modelValue":o[0]||(o[0]=e=>(0,n.dq)(a)?a.value=e:null)},[e.$props.showAll?((0,l.wg)(),(0,l.iD)("option",s,"Показать всё")):(0,l.kq)("",!0),((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(y,((e,a)=>(0,l._)("option",{key:a,value:a},(0,r.zw)(e),9,u))),64))],512),[[i.bM,(0,n.SU)(a),void 0,{number:!0}]]),v]))}});const y=_;var m=y},6838:function(e,a,t){t.d(a,{Z:function(){return y}});var l=t(3396),n=t(4870),r=t(7139),i=t(9242),o=t(9545),d=t(1020);const c={class:"input-field"},s=["value"],u=(0,l._)("label",null,"Фильтрация по годам",-1);var v=(0,l.aZ)({__name:"YearSelectComponent",setup(e){const{transactionsSortedByDate:a,transactionsYearFilter:t}=(0,d.Jk)((0,o.C)()),v=(0,n.iH)(),_=(0,n.iH)(),y=(0,l.Fl)((()=>{const e=new Set;if(e.add((new Date).getFullYear()),a.value){a.value.forEach((a=>{const t=new Date(a.date).getFullYear();e.add(t)}));const t=Array.from(e),l=Math.max.apply(null,t)+1;return e.add(l),e}return e}));return(0,l.bv)((()=>{_.value=M.FormSelect.init(v.value)})),(e,a)=>((0,l.wg)(),(0,l.iD)("div",c,[(0,l.wy)((0,l._)("select",{ref_key:"yearSelect",ref:v,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.dq)(t)?t.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.value,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,r.zw)(e),9,s)))),128))],512),[[i.bM,(0,n.SU)(t),void 0,{number:!0}]]),u]))}});const _=v;var y=_},5584:function(e,a,t){t.r(a),t.d(a,{default:function(){return j}});var l=t(3396),n=(t(560),t(7139)),r=t(4870),i=t(3256),o=t(9545),d=t(1520),c=t(6135),s=t(1020);const u=e=>((0,l.dD)("data-v-d8f2f57c"),e=e(),(0,l.Cn)(),e),v={class:"card-panel grey lighten-2 calendar-list__card day-card"},_={class:"day-card__header"},y={class:"row valign-wrapper"},m={class:"col s12"},w={class:"center-align day-card__date"},g={key:0,class:"valign-center"},f={class:"col s12 red white-text"},p=u((()=>(0,l._)("div",{class:"center-align day-card__overspending"},"Перерасход ",-1))),F={class:"center-align day-card__overspending"},D={class:"day-card__section day-card__section-income green lighten-4"},h={class:"center-align day-card__income-list-item"},k={class:"day-card__section day-card__section-outcome orange lighten-4"},S={class:"center-align day-card__income-list-item"},b={class:"center-align day-card__income-list"},N={class:"day-card__footer red lighten-3"},C={class:"center-align day-card__income-list-item"},x={class:"center-align day-card__income-list"};var U=(0,l.aZ)({__name:"CalendarDayCardComponent",props:{day:{}},setup(e){const a=e,{dateFilter:t,currencyFilter:u}=(0,i.y)(),{getDateNumber:U}=(0,o.C)(),{transactionsSortedByDate:z}=(0,s.Jk)((0,o.C)()),{categoriesAvailableForLimitation:Y}=(0,s.Jk)((0,d.x)()),{limits:Z}=(0,s.Jk)((0,c.L)()),H=new Date(a.day.year,a.day.month,a.day.day).toDateString(),M=U(new Date(a.day.year,a.day.month,a.day.day)),I=new Date(a.day.year,a.day.month,0).getDate(),J=U(new Date(a.day.year,a.day.month-1,I)),K=(0,l.Fl)((()=>Y.value.map((e=>{const a=z.value.filter((e=>!e.isNotPlanned)).filter((a=>a.categoryId===e.id)).filter((e=>e.dateForSort>J)).filter((e=>e.dateForSort<=M)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0),t=Z.value.find((a=>a.categoryId===e.id))?.limit,l=a-t>0?Number((a-t).toFixed(2)):0;return{...e,overspend:l}})).filter((e=>e.overspend>0)).reduce(((e,a)=>Number((e+a.overspend).toFixed(2))),0))),P=(0,l.Fl)((()=>z.value.filter((e=>"transfer"!==e.type)).filter((e=>e.dateForSort===M)))),W=(0,l.Fl)((()=>P.value.filter((e=>"income"===e.type)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),q=(0,l.Fl)((()=>P.value.filter((e=>"outcome"===e.type)))),A=(0,l.Fl)((()=>q.value.reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),B=(0,l.Fl)((()=>q.value.filter((e=>e.isNotPlanned)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),V=(0,l.Fl)((()=>z.value.filter((e=>e.isNotPlanned)).filter((e=>e.dateForSort>J)).filter((e=>e.dateForSort<=M)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),L=(0,l.Fl)((()=>Y.value.map((e=>{const a=P.value.filter((e=>!e.isNotPlanned)).filter((a=>a.categoryId===e.id)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0);return{...e,total:a}})).filter((e=>0!==e.total)))),T=(0,l.Fl)((()=>Y.value.map((e=>{const a=P.value.filter((e=>e.isNotPlanned)).filter((a=>a.categoryId===e.id)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0);return{...e,total:a}})).filter((e=>0!==e.total))));return(e,a)=>((0,l.wg)(),(0,l.iD)("article",v,[(0,l._)("header",_,[(0,l._)("div",y,[(0,l._)("div",m,[(0,l._)("div",w,(0,n.zw)((0,r.SU)(t)((0,r.SU)(H))),1)])]),V.value+K.value>0?((0,l.wg)(),(0,l.iD)("div",g,[(0,l._)("div",f,[p,(0,l._)("div",F,(0,n.zw)((0,r.SU)(u)(V.value+K.value)),1)])])):(0,l.kq)("",!0)]),(0,l._)("section",D,[(0,l._)("div",h,[(0,l._)("strong",null,"Доход "+(0,n.zw)((0,r.SU)(u)(W.value)),1)])]),(0,l._)("section",k,[(0,l._)("div",S,[(0,l._)("strong",null,"Расход "+(0,n.zw)((0,r.SU)(u)(A.value)),1)]),(0,l._)("ul",b,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(L.value,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,class:"day-card__income-list-item"},(0,n.zw)(e.name)+" - "+(0,n.zw)((0,r.SU)(u)(e["total"])),1)))),128))])]),(0,l._)("footer",N,[(0,l._)("div",C,[(0,l._)("strong",null,"Вне плана "+(0,n.zw)((0,r.SU)(u)(B.value)),1)]),(0,l._)("ul",x,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(T.value,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,class:"day-card__income-list-item"},(0,n.zw)(e.name)+" - "+(0,n.zw)((0,r.SU)(u)(e["total"])),1)))),128))])])]))}}),z=t(89);const Y=(0,z.Z)(U,[["__scopeId","data-v-d8f2f57c"]]);var Z=Y;const H={class:"calendar-list"};var M=(0,l.aZ)({__name:"CalendarGridComponent",setup(e){const{transactionsMonthFilter:a,transactionsYearFilter:t}=(0,s.Jk)((0,o.C)()),{getDateNumber:r}=(0,o.C)(),i=["Su","Mo","Tu","We","Th","Fr","Sa"],d=(0,l.Fl)((()=>new Date(t.value,a.value+1,0).getDate())),c=(0,l.Fl)((()=>{const e=[];let l=1;for(let n=1;n<=d.value;n++){const o={week:0,day:0,month:0,weekday:0,weekdayName:"",year:0};o.day=n,o.month=a.value,o.year=t.value,o.weekday=new Date(t.value,a.value,n).getDay(),o.weekdayName=i[o.weekday],o.week=l,o.id=r(new Date(o.year,o.month,o.day)),e.push(o),0===o.weekday&&l++}return e}));return(e,a)=>((0,l.wg)(),(0,l.iD)("ul",H,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.value,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,style:(0,n.j5)({"grid-area":e.weekdayName,"grid-row":e.week}),class:"calendar-list__item"},[(0,l.Wm)(Z,{day:e},null,8,["day"])],4)))),128))]))}});const I=(0,z.Z)(M,[["__scopeId","data-v-5788e842"]]);var J=I,K=t(5632),P=t(6838);const W=(0,l._)("div",{class:"container"},[(0,l._)("h3",null,"Календарь")],-1),q=(0,l._)("hr",null,null,-1),A={class:"row"},B={class:"col s12 m2 offset-m7"},V={class:"col s12 m3"};var L=(0,l.aZ)({__name:"CalendarView",setup(e){return(e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[W,q,(0,l._)("div",A,[(0,l._)("div",B,[(0,l.Wm)(P.Z)]),(0,l._)("div",V,[(0,l.Wm)(K.Z,{"show-all":!1})])]),(0,l.Wm)(J)],64))}});const T=L;var j=T}}]);
//# sourceMappingURL=584.5b93b5b8.js.map