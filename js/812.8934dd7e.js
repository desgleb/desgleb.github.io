"use strict";(self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[]).push([[812],{3812:function(e,a,t){t.r(a),t.d(a,{default:function(){return Fe}});var l=t(6768),o=t(144),c=t(4232),s=t(5130),i=t(5741),r=t.n(i),n=t(7760),u=t(9428),d=t(8078);const y={class:"mc-card-category card-panel col s12"},m={class:"mc-form-category"},p={class:"row"},g={class:"input-field col s12"},v=(0,l.Lk)("i",{class:"material-icons prefix"},"mode_edit",-1),k=(0,l.Lk)("label",{for:"categoryName"},"Название категории",-1),L={key:0,class:"helper-text red-text"},b={key:1,class:"helper-text red-text"},h={class:"row"},C={class:"input-field col s12"},f=(0,l.Lk)("i",{class:"material-icons prefix"},"mode_edit",-1),x=(0,l.Lk)("label",{for:"categoryDescription"},"Описание категории",-1),N={class:"row"},_={class:"col s3"},w={class:"black-text"},$=(0,l.Lk)("span",null,"Расход",-1),E={class:"col s3"},D={class:"black-text"},X=(0,l.Lk)("span",null,"Доход",-1),R={class:"row"},T={class:"col center-align"},V=["disabled"],F=(0,l.Lk)("i",{class:"material-icons right"},"add_circle_outline",-1);var K=(0,l.pM)({__name:"AddCategoryComponent",setup(e){const a=(0,o.KR)(!1),t=(0,o.KR)("outcome"),{pushNewCategory:i}=(0,d.d)(),K=(0,o.KR)(3),U=(0,o.Kh)({categoryName:"",categoryDescription:""}),W={categoryName:{required:u._$.withMessage("Поле НАЗВАНИЕ КАТЕГОРИИ является обязательным.",u.mw),minLength:u._$.withMessage((({$params:e})=>`Длина названия категории должна быть не менее, чем ${e.min} символа.`),(0,u.Bp)(K))}},M=(0,n.fG)(W,U),q=(0,l.EW)((()=>M.value.categoryName.$dirty&&M.value.categoryName.required.$invalid)),J=(0,l.EW)((()=>M.value.categoryName.$dirty&&M.value.categoryName.minLength.$invalid)),Q=async()=>{if(M.value.$invalid)return void M.value.$touch();a.value=!0;const e={categoryName:U.categoryName,categoryType:t.value,categoryDescription:U.categoryDescription};try{await i(e)}catch(l){}finally{U.categoryName="",U.categoryDescription="",a.value=!1}};return(0,l.sV)((()=>{r().updateTextFields()})),(e,i)=>((0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("form",m,[(0,l.Lk)("div",p,[(0,l.Lk)("div",g,[v,(0,l.bo)((0,l.Lk)("input",{id:"categoryName","onUpdate:modelValue":i[0]||(i[0]=e=>U.categoryName=e),class:(0,c.C4)({invalid:q.value||J.value}),type:"text"},null,2),[[s.Jo,U.categoryName,void 0,{trim:!0}]]),k,q.value?((0,l.uX)(),(0,l.CE)("small",L,(0,c.v_)((0,o.R1)(M).categoryName.required.$message),1)):J.value?((0,l.uX)(),(0,l.CE)("small",b,(0,c.v_)((0,o.R1)(M).categoryName.minLength.$message),1)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",h,[(0,l.Lk)("div",C,[f,(0,l.bo)((0,l.Lk)("textarea",{id:"categoryDescription","onUpdate:modelValue":i[1]||(i[1]=e=>U.categoryDescription=e),class:"materialize-textarea",type:"text"},null,512),[[s.Jo,U.categoryDescription,void 0,{trim:!0}]]),x])]),(0,l.Lk)("div",N,[(0,l.Lk)("div",_,[(0,l.Lk)("p",null,[(0,l.Lk)("label",w,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":i[2]||(i[2]=e=>t.value=e),class:"with-gap",name:"category",type:"radio",value:"outcome"},null,512),[[s.XL,t.value]]),$])])]),(0,l.Lk)("div",E,[(0,l.Lk)("p",null,[(0,l.Lk)("label",D,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":i[3]||(i[3]=e=>t.value=e),class:"with-gap",name:"category",type:"radio",value:"income"},null,512),[[s.XL,t.value]]),X])])])]),(0,l.Lk)("div",R,[(0,l.Lk)("div",T,[(0,l.Lk)("button",{disabled:a.value,class:"mc-button-submit btn light-green darken-4",name:"action",type:"submit",onClick:(0,s.D$)(Q,["prevent"])},[(0,l.eW)(" Добавить категорию "),F],8,V)])])])]))}});const U=K;var W=U,M=t(3367);const q={class:"mc-card-category card-panel col s12"},J={class:"row"},Q={class:"input-field col s12"},I=["value"],S=(0,l.Lk)("label",null,"Выберите категорию",-1),A={class:"row"},P={class:"input-field col s12"},z=(0,l.Lk)("i",{class:"material-icons prefix"},"mode_edit",-1),B=(0,l.Lk)("label",{for:"categoryName"},"Название категории",-1),G={key:0,class:"helper-text red-text"},j={key:1,class:"helper-text red-text"},H={class:"row"},O={class:"input-field col s12"},Y=(0,l.Lk)("i",{class:"material-icons prefix"},"mode_edit",-1),Z=(0,l.Lk)("label",{for:"categoryDescription"},"Описание категории",-1),ee={class:"row"},ae={class:"col s3"},te={class:"black-text"},le=(0,l.Lk)("span",null,"Расход",-1),oe={class:"col s3"},ce={class:"black-text"},se=(0,l.Lk)("span",null,"Доход",-1),ie=(0,l.Lk)("div",{class:"row"},[(0,l.Lk)("div",{class:"col center-align"},[(0,l.Lk)("button",{class:"mc-button-submit btn light-green darken-4",name:"action",type:"submit"},[(0,l.eW)("Изменить категорию "),(0,l.Lk)("i",{class:"material-icons right"},"refresh")])])],-1),re={key:0,class:"row"},ne={class:"col"},ue={class:"input-field col s12"},de=(0,l.Lk)("label",{for:"categoryDelete"},"Чтобы удалить категорию, введите слово УДАЛИТЬ",-1),ye=["disabled"],me=(0,l.Lk)("i",{class:"material-icons right"},"delete",-1);var pe=(0,l.pM)({__name:"ChangeCategoryComponent",setup(e){const a=(0,o.KR)(""),t=(0,o.KR)(),i=(0,o.KR)(),{categories:y,selectedCategoryId:m,selectedCategory:p}=(0,M.bP)((0,d.d)()),{changeCategory:g,deleteCategory:v}=(0,d.d)(),k=(0,o.KR)(3),L=(0,o.Kh)({categoryName:"",categoryDescription:"",categoryType:""}),b={categoryName:{required:u._$.withMessage("Поле НАЗВАНИЕ КАТЕГОРИИ является обязательным.",u.mw),minLength:u._$.withMessage((({$params:e})=>`Длина названия категории должна быть не менее, чем ${e.min} символа.`),(0,u.Bp)(k))}},h=(0,n.fG)(b,L),C=(0,l.EW)((()=>h.value.categoryName.$dirty&&h.value.categoryName.required.$invalid)),f=(0,l.EW)((()=>h.value.categoryName.$dirty&&h.value.categoryName.minLength.$invalid)),x=()=>{L.categoryName=p.value?.name,L.categoryDescription=p.value?.description,L.categoryType=p.value?.type},N=async()=>{if(h.value.$invalid)return void h.value.$touch();const e={categoryName:L.categoryName,categoryType:L.categoryType,categoryDescription:L.categoryDescription,categoryId:m.value,categoryAuthor:""};try{await g(e)}catch(a){}finally{L.categoryName="",L.categoryDescription="",L.categoryType=""}};return(0,l.$u)((()=>{i.value=r().FormSelect.init(t.value),r().updateTextFields()})),(0,l.sV)((()=>{i.value=r().FormSelect.init(t.value),r().updateTextFields()})),(0,l.xo)((()=>{i.value&&i.value.destroy&&i.value.destroy()})),(e,i)=>((0,l.uX)(),(0,l.CE)("div",q,[(0,l.Lk)("form",{class:"mc-form-category",onSubmit:(0,s.D$)(N,["prevent"])},[(0,l.Lk)("div",J,[(0,l.Lk)("div",Q,[(0,l.bo)((0,l.Lk)("select",{ref_key:"categorySelect",ref:t,"onUpdate:modelValue":i[0]||(i[0]=e=>(0,o.i9)(m)?m.value=e:null),onChange:x},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,o.R1)(y),(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,c.v_)(e["name"]),9,I)))),128))],544),[[s.u1,(0,o.R1)(m)]]),S])]),(0,l.Lk)("div",A,[(0,l.Lk)("div",P,[z,(0,l.bo)((0,l.Lk)("input",{id:"categoryName","onUpdate:modelValue":i[1]||(i[1]=e=>L.categoryName=e),class:(0,c.C4)({invalid:C.value||f.value}),type:"text"},null,2),[[s.Jo,L.categoryName,void 0,{trim:!0}]]),B,C.value?((0,l.uX)(),(0,l.CE)("small",G,(0,c.v_)((0,o.R1)(h).categoryName.required.$message),1)):f.value?((0,l.uX)(),(0,l.CE)("small",j,(0,c.v_)((0,o.R1)(h).categoryName.minLength.$message),1)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",H,[(0,l.Lk)("div",O,[Y,(0,l.bo)((0,l.Lk)("textarea",{id:"categoryDescription","onUpdate:modelValue":i[2]||(i[2]=e=>L.categoryDescription=e),class:"materialize-textarea",type:"text"},null,512),[[s.Jo,L.categoryDescription,void 0,{trim:!0}]]),Z])]),(0,l.Lk)("div",ee,[(0,l.Lk)("div",ae,[(0,l.Lk)("p",null,[(0,l.Lk)("label",te,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":i[3]||(i[3]=e=>L.categoryType=e),class:"with-gap",name:"category",type:"radio",value:"outcome"},null,512),[[s.XL,L.categoryType]]),le])])]),(0,l.Lk)("div",oe,[(0,l.Lk)("p",null,[(0,l.Lk)("label",ce,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>L.categoryType=e),class:"with-gap",name:"category",type:"radio",value:"income"},null,512),[[s.XL,L.categoryType]]),se])])])]),ie,(0,o.R1)(m)?((0,l.uX)(),(0,l.CE)("div",re,[(0,l.Lk)("div",ne,[(0,l.Lk)("div",ue,[(0,l.bo)((0,l.Lk)("input",{id:"categoryDelete","onUpdate:modelValue":i[5]||(i[5]=e=>a.value=e),type:"text"},null,512),[[s.Jo,a.value,void 0,{trim:!0}]]),de]),(0,l.Lk)("button",{disabled:!("УДАЛИТЬ"===a.value),class:"mc-button-submit btn red darken-4",name:"action",type:"button",onClick:i[6]||(i[6]=(0,s.D$)(((...e)=>(0,o.R1)(v)&&(0,o.R1)(v)(...e)),["prevent"]))},[(0,l.eW)("Удалить категорию "),me],8,ye)])])):(0,l.Q3)("",!0)],32)]))}});const ge=pe;var ve=ge;const ke={class:"highlight centered responsive-table"},Le=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Наименование"),(0,l.Lk)("th",null,"Тип категории"),(0,l.Lk)("th",null,"Описание категории"),(0,l.Lk)("th",null,"Автор категории")])],-1);var be=(0,l.pM)({__name:"CategoriesListTable",setup(e){const{categories:a}=(0,M.bP)((0,d.d)());return(e,t)=>((0,l.uX)(),(0,l.CE)("table",ke,[Le,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,o.R1)(a),(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,c.v_)(e["name"]),1),(0,l.Lk)("td",{class:(0,c.C4)({"red-text":"outcome"===e.type,"green-text":"income"===e.type})},(0,c.v_)("outcome"===e["type"]?"Расход":"Доход"),3),(0,l.Lk)("td",null,(0,c.v_)(e["description"]),1),(0,l.Lk)("td",null,(0,c.v_)(e["author"]),1)])))),128))])]))}});const he=be;var Ce=he,fe=t(2132);const xe=(0,l.Lk)("h3",null,"Ваши категории",-1),Ne=(0,l.Lk)("hr",null,null,-1),_e={key:0,class:"row"},we={class:"col"},$e=(0,l.Lk)("p",null,"У Вас пока нет добавленных счетов",-1),Ee={key:1,class:"row"},De={class:"col s12 m6"},Xe={key:0,class:"col s12 m6"},Re={key:2,class:"row"};var Te=(0,l.pM)({__name:"CategoriesView",setup(e){const{isAccountExist:a,isCategoryExist:t}=(0,M.bP)((0,fe.X)());return(e,c)=>{const s=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[xe,Ne,(0,o.R1)(a)?((0,l.uX)(),(0,l.CE)("div",Ee,[(0,l.Lk)("div",De,[(0,l.bF)(W)]),(0,o.R1)(t)?((0,l.uX)(),(0,l.CE)("div",Xe,[(0,l.bF)(ve)])):(0,l.Q3)("",!0)])):((0,l.uX)(),(0,l.CE)("div",_e,[(0,l.Lk)("div",we,[$e,(0,l.Lk)("p",null,[(0,l.eW)("Добавьте хотя бы один "),(0,l.bF)(s,{to:"/accounts"},{default:(0,l.k6)((()=>[(0,l.eW)("счёт")])),_:1})])])])),(0,o.R1)(t)?((0,l.uX)(),(0,l.CE)("div",Re,[(0,l.bF)(Ce)])):(0,l.Q3)("",!0)],64)}}});const Ve=Te;var Fe=Ve}}]);