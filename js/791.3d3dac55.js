"use strict";(self["webpackChunkvue_cash"]=self["webpackChunkvue_cash"]||[]).push([[791],{1791:function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var r=i(3396),s=i(7139);const o={class:"page-title"},n=(0,r._)("h3",null,"Планирование",-1),l={key:1,class:"center"},c={key:2},a={class:"progress"};function u(e,t,i,u,d,g){const p=(0,r.up)("Loader"),w=(0,r.up)("router-link"),h=(0,r.Q2)("tooltip");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",o,[n,(0,r._)("h4",null,(0,s.zw)(e.$filters.currencyFilter(e.info.bill)),1)]),e.loading?((0,r.wg)(),(0,r.j4)(p,{key:0})):e.categories.length?((0,r.wg)(),(0,r.iD)("section",c,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.categories,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.id},[(0,r._)("p",null,[(0,r._)("strong",null,(0,s.zw)(t.title),1),(0,r.Uk)(" "+(0,s.zw)(e.$filters.currencyFilter(t.spend))+" из "+(0,s.zw)(e.$filters.currencyFilter(t.limit)),1)]),(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",{class:(0,s.C_)([[t.progressColor],"determinate"]),style:(0,s.j5)({width:t.progressPercent+"%"})},null,6)])),[[h,t.tooltip]])])))),128))])):((0,r.wg)(),(0,r.iD)("p",l,[(0,r.Wm)(w,{to:"/categories"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Добавьте хотя бы одну категорию ")])),_:1})]))])}var d=i(8412),g=i(65),p=i(379),w={name:"Planning",components:{Loader:d.Z},data:()=>({loading:!0,categories:[]}),computed:{...(0,g.Se)(["info"])},async mounted(){const e=await this.$store.dispatch("fetchRecords"),t=await this.$store.dispatch("fetchCategories");this.categories=t.map((t=>{const i=e.filter((e=>e.categoryId===t.id)).filter((e=>"outcome"===e.type)).reduce(((e,t)=>e+ +t.amount),0),r=100*i/t.limit,s=r>100?100:r,o=r<60?"green":r<100?"yellow":"red",n=t.limit-i,l=`${n<0?"Превышение на":"Осталось"} ${(0,p.Z)(Math.abs(n))}`;return{...t,progressPercent:s,progressColor:o,spend:i,tooltip:l}})),this.loading=!1}},h=i(89);const f=(0,h.Z)(w,[["render",u]]);var y=f}}]);
//# sourceMappingURL=791.3d3dac55.js.map