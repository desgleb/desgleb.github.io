"use strict";(self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[]).push([[662],{5632:function(e,a,t){t.d(a,{Z:function(){return y}});var l=t(3396),r=t(4870),n=t(7139),i=t(9242),d=t(9545),o=t(1020);const c={class:"input-field"},u={key:0,selected:"",value:"12"},s=["value"],v=(0,l._)("label",null,"Фильтрация по месяцам",-1);var m=(0,l.aZ)({__name:"MonthSelectComponent",props:{showAll:{type:Boolean}},setup(e){const{transactionsMonthFilter:a}=(0,o.Jk)((0,d.C)()),t=(0,r.iH)(),m=(0,r.iH)(),_=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];return(0,l.bv)((()=>{m.value=M.FormSelect.init(t.value)})),(e,d)=>((0,l.wg)(),(0,l.iD)("div",c,[(0,l.wy)((0,l._)("select",{ref_key:"monthSelect",ref:t,"onUpdate:modelValue":d[0]||(d[0]=e=>(0,r.dq)(a)?a.value=e:null)},[e.$props.showAll?((0,l.wg)(),(0,l.iD)("option",u,"Показать всё")):(0,l.kq)("",!0),((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(_,((e,a)=>(0,l._)("option",{key:a,value:a},(0,n.zw)(e),9,s))),64))],512),[[i.bM,(0,r.SU)(a),void 0,{number:!0}]]),v]))}});const _=m;var y=_},6838:function(e,a,t){t.d(a,{Z:function(){return _}});var l=t(3396),r=t(4870),n=t(7139),i=t(9242),d=t(9545),o=t(1020);const c={class:"input-field"},u=["value"],s=(0,l._)("label",null,"Фильтрация по годам",-1);var v=(0,l.aZ)({__name:"YearSelectComponent",setup(e){const{transactionsSortedByDate:a,transactionsYearFilter:t}=(0,o.Jk)((0,d.C)()),v=(0,r.iH)(),m=(0,r.iH)(),_=(0,l.Fl)((()=>{const e=new Set;if(e.add((new Date).getFullYear()),a.value){a.value.forEach((a=>{const t=new Date(a.date).getFullYear();e.add(t)}));const t=Array.from(e),l=Math.max.apply(null,t)+1;return e.add(l),e}return e}));return(0,l.bv)((()=>{m.value=M.FormSelect.init(v.value)})),(e,a)=>((0,l.wg)(),(0,l.iD)("div",c,[(0,l.wy)((0,l._)("select",{ref_key:"yearSelect",ref:v,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,r.dq)(t)?t.value=e:null)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_.value,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,n.zw)(e),9,u)))),128))],512),[[i.bM,(0,r.SU)(t),void 0,{number:!0}]]),s]))}});const m=v;var _=m},9662:function(e,a,t){t.r(a),t.d(a,{default:function(){return R}});var l=t(3396),r=(t(560),t(7139)),n=t(4870),i=t(3256),d=t(9545),o=t(1520),c=t(6135),u=t(8263),s=t(1020);const v=e=>((0,l.dD)("data-v-cfa4eeee"),e=e(),(0,l.Cn)(),e),m={class:"day-card__header"},_={class:"row valign-wrapper"},y={class:"col s12"},g={class:"center-align day-card__date"},f={class:"row valign-center blue lighten-3"},w={class:"col s12"},p={class:"center-align day-card__balance"},F={key:0,class:"valign-center"},b={class:"col s12 red white-text"},h=v((()=>(0,l._)("div",{class:"center-align day-card__overspending"},"Не учтено ",-1))),k={class:"center-align day-card__overspending"},D={class:"day-card__section day-card__section-income green lighten-4"},N={class:"center-align day-card__income-list-item"},S={class:"day-card__section day-card__section-outcome orange lighten-4"},x={class:"center-align day-card__income-list-item"},C={class:"center-align day-card__income-list"},U={class:"day-card__section day-card__section-outcome red lighten-3"},z={class:"center-align day-card__income-list-item"},I={class:"center-align day-card__income-list"},T={class:"day-card__footer"},Y={class:"valign-center"},Z={class:"col s12"};var H=(0,l.aZ)({__name:"CalendarDayCardComponent",props:{day:{}},setup(e){const a=e,{dateFilter:t,currencyFilter:v}=(0,i.y)(),{transactionsSortedByDate:H}=(0,s.Jk)((0,d.C)()),{categoriesAvailableForLimitation:M}=(0,s.Jk)((0,o.x)()),{limits:J}=(0,s.Jk)((0,c.L)()),{accounts:P}=(0,s.Jk)((0,u.o)()),K=new Date(a.day.year,a.day.month,a.day.day).getTime(),W=new Date(a.day.year,a.day.month,0).getDate(),q=new Date(a.day.year,a.day.month-1,W).getTime(),A=(0,l.Fl)((()=>P.value.map((e=>{const a=H.value.filter((e=>"transfer"===e.type)).filter((e=>e.date<K)).reduce(((a,t)=>t.accountId===e.id?Number((a-t.amount).toFixed(2)):t.categoryId===e.id?Number((a+t.amount).toFixed(2)):Number(a.toFixed(2))),0),t=H.value.filter((a=>a.accountId===e.id)).filter((e=>"income"===e.type)).filter((e=>e.date<K)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0),l=H.value.filter((a=>a.accountId===e.id)).filter((e=>"outcome"===e.type)).filter((e=>e.date<K)).reduce(((e,a)=>Number((e-a.amount).toFixed(2))),0);let r;return r=e.isCountable?e.initialBalance+a+t+l:0,{...e,resultSumTillToday:r}})).reduce(((e,a)=>Number((e+a.resultSumTillToday).toFixed(2))),0))),B=(0,l.Fl)((()=>P.value.map((e=>{const a=H.value.filter((e=>"transfer"===e.type)).filter((e=>e.date===K)).reduce(((a,t)=>t.accountId!==e.id||e.isCountable?t.categoryId!==e.id||e.isCountable?Number(a.toFixed(2)):Number((a-t.amount).toFixed(2)):Number((a+t.amount).toFixed(2))),0);return{...e,transfersToday:a}})).reduce(((e,a)=>Number((e+a.transfersToday).toFixed(2))),0))),V=(0,l.Fl)((()=>Number(A.value+E.value-$.value-O.value))),L=(0,l.Fl)((()=>M.value.map((e=>{const a=H.value.filter((e=>e.date>q)).filter((e=>e.date<=K)).filter((e=>!e.isNotPlanned)).filter((a=>a.categoryId===e.id)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0),t=J.value.find((a=>a.categoryId===e.id))?.limit,l=a-t>0?Number((a-t).toFixed(2)):0;return{...e,overspend:l}})).filter((e=>e.overspend>0)).reduce(((e,a)=>Number((e+a.overspend).toFixed(2))),0))),j=(0,l.Fl)((()=>H.value.filter((e=>"transfer"!==e.type)).filter((e=>e.date===K)))),E=(0,l.Fl)((()=>{const e=j.value.filter((e=>"income"===e.type)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0),a=B.value>0?e+B.value:e;return Number(a.toFixed(2))})),G=(0,l.Fl)((()=>j.value.filter((e=>"outcome"===e.type)).filter((e=>!e.isNotPlanned)))),$=(0,l.Fl)((()=>{const e=G.value.reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0),a=B.value<0?e+Math.abs(B.value):e;return Number(a.toFixed(2))})),O=(0,l.Fl)((()=>j.value.filter((e=>"outcome"===e.type)).filter((e=>e.isNotPlanned)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),Q=(0,l.Fl)((()=>H.value.filter((e=>e.isNotPlanned)).filter((e=>e.date>q)).filter((e=>e.date<=K)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0))),R=(0,l.Fl)((()=>M.value.map((e=>{const a=j.value.filter((e=>!e.isNotPlanned)).filter((a=>a.categoryId===e.id)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0);return{...e,total:a}})).filter((e=>0!==e.total)))),X=(0,l.Fl)((()=>M.value.map((e=>{const a=j.value.filter((e=>e.isNotPlanned)).filter((a=>a.categoryId===e.id)).reduce(((e,a)=>Number((e+a.amount).toFixed(2))),0);return{...e,total:a}})).filter((e=>0!==e.total))));return(e,a)=>((0,l.wg)(),(0,l.iD)("article",{class:(0,r.C_)([{"border-red":V.value<0},"card-panel grey lighten-2 calendar-list__card day-card"])},[(0,l._)("header",m,[(0,l._)("div",_,[(0,l._)("div",y,[(0,l._)("div",g,(0,r.zw)((0,n.SU)(t)((0,n.SU)(K))),1)])]),(0,l._)("div",f,[(0,l._)("div",w,[(0,l._)("div",p,[(0,l._)("strong",null,"Утром "+(0,r.zw)((0,n.SU)(v)(A.value)),1)])])]),Q.value+L.value>0?((0,l.wg)(),(0,l.iD)("div",F,[(0,l._)("div",b,[h,(0,l._)("div",k,(0,r.zw)((0,n.SU)(v)(Q.value+L.value)),1)])])):(0,l.kq)("",!0)]),(0,l._)("section",D,[(0,l._)("div",N,[(0,l._)("strong",null,"Доход "+(0,r.zw)((0,n.SU)(v)(E.value)),1)])]),(0,l._)("section",S,[(0,l._)("div",x,[(0,l._)("strong",null,"Расход "+(0,r.zw)((0,n.SU)(v)($.value)),1)]),(0,l._)("ul",C,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(R.value,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,class:"day-card__income-list-item"},(0,r.zw)(e.name)+" - "+(0,r.zw)((0,n.SU)(v)(e["total"])),1)))),128))])]),(0,l._)("section",U,[(0,l._)("div",z,[(0,l._)("strong",null,"Вне плана "+(0,r.zw)((0,n.SU)(v)(O.value)),1)]),(0,l._)("ul",I,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(X.value,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,class:"day-card__income-list-item"},(0,r.zw)(e.name)+" - "+(0,r.zw)((0,n.SU)(v)(e["total"])),1)))),128))])]),(0,l._)("footer",T,[(0,l._)("div",Y,[(0,l._)("div",Z,[(0,l._)("div",{class:(0,r.C_)([{"red lighten-4":V.value<0,green:V.value>=0},"center-align day-card__balance"])},[(0,l._)("strong",null,"Вечером "+(0,r.zw)((0,n.SU)(v)(V.value)),1)],2)])])])],2))}}),M=t(89);const J=(0,M.Z)(H,[["__scopeId","data-v-cfa4eeee"]]);var P=J;const K={class:"calendar-list"};var W=(0,l.aZ)({__name:"CalendarGridComponent",setup(e){const{transactionsMonthFilter:a,transactionsYearFilter:t}=(0,s.Jk)((0,d.C)()),n=["Su","Mo","Tu","We","Th","Fr","Sa"],i=(0,l.Fl)((()=>new Date(t.value,a.value+1,0).getDate())),o=(0,l.Fl)((()=>{const e=[];let l=1;for(let r=1;r<=i.value;r++){const i={id:0,week:0,day:0,month:0,weekday:0,weekdayName:"",year:0};i.day=r,i.month=a.value,i.year=t.value,i.weekday=new Date(t.value,a.value,r).getDay(),i.weekdayName=n[i.weekday],i.week=l,i.id=new Date(i.year,i.month,i.day).getTime(),e.push(i),0===i.weekday&&l++}return e}));return(e,a)=>((0,l.wg)(),(0,l.iD)("ul",K,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.value,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,style:(0,r.j5)({"grid-area":e.weekdayName,"grid-row":e.week}),class:"calendar-list__item"},[(0,l.Wm)(P,{day:e},null,8,["day"])],4)))),128))]))}});const q=(0,M.Z)(W,[["__scopeId","data-v-717b28f5"]]);var A=q,B=t(5632),V=t(6838);const L=(0,l._)("div",{class:"container"},[(0,l._)("h3",null,"Календарь")],-1),j=(0,l._)("hr",null,null,-1),E={class:"row"},G={class:"col s12 m2 offset-m7"},$={class:"col s12 m3"};var O=(0,l.aZ)({__name:"CalendarView",setup(e){return(e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[L,j,(0,l._)("div",E,[(0,l._)("div",G,[(0,l.Wm)(V.Z)]),(0,l._)("div",$,[(0,l.Wm)(B.Z,{"show-all":!1})])]),(0,l.Wm)(A)],64))}});const Q=O;var R=Q}}]);
//# sourceMappingURL=662.d05635fb.js.map