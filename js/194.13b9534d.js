"use strict";(self["webpackChunkmoney_catcher"]=self["webpackChunkmoney_catcher"]||[]).push([[194],{5509:function(e,l,t){t.d(l,{$:function(){return a}});const a=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},24:function(e,l,t){t.d(l,{A:function(){return b}});var a=t(6768),n=t(144),r=t(4232),s=t(5130),o=t(6995),i=t(3367),u=t(5509),c=t(8078);const d={class:"input-field"},v={key:0,selected:"",value:"12"},k=["value"],m=(0,a.Lk)("label",null,"Фильтрация по месяцам",-1);var p=(0,a.pM)({__name:"MonthSelectComponent",props:{showAll:{type:Boolean}},setup(e){const{transactionsMonthFilter:l}=(0,i.bP)((0,o.G)()),{selectedCategoryId:t}=(0,i.bP)((0,c.d)()),p=(0,n.KR)(),L=(0,n.KR)();return(0,a.sV)((()=>{L.value=M.FormSelect.init(p.value)})),(0,a.$u)((()=>{t.value=""})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bo)((0,a.Lk)("select",{ref_key:"monthSelect",ref:p,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.i9)(l)?l.value=e:null)},[e.$props.showAll?((0,a.uX)(),(0,a.CE)("option",v,"Показать всё")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(u.$),((e,l)=>((0,a.uX)(),(0,a.CE)("option",{key:l,value:l},(0,r.v_)(e),9,k)))),128))],512),[[s.u1,(0,n.R1)(l),void 0,{number:!0}]]),m]))}});const L=p;var b=L},2122:function(e,l,t){t.d(l,{A:function(){return L}});t(4114);var a=t(6768),n=t(144),r=t(4232),s=t(5130),o=t(6995),i=t(3367),u=t(2132),c=t(8078);const d={class:"input-field"},v=["value"],k=(0,a.Lk)("label",null,"Фильтрация по годам",-1);var m=(0,a.pM)({__name:"YearSelectComponent",setup(e){const{transactions:l,transactionsYearFilter:t}=(0,i.bP)((0,o.G)()),{selectedCategoryId:m}=(0,i.bP)((0,c.d)()),{isGlobalLoading:p}=(0,i.bP)((0,u.X)());p.value=!0;const L=(0,n.KR)(),b=(0,n.KR)(),g=(0,a.EW)((()=>{const e=[],t=new Set;t.add((new Date).getFullYear()),l.value.forEach((e=>{const l=new Date(e.date).getFullYear();t.add(l)}));const a=Math.max.apply(null,Array.from(t))+1;t.add(a);const n=Array.from(t).sort(((e,l)=>e-l));return n.forEach((l=>{const t={year:l,id:Math.floor(1e6*Math.random())};e.push(t)})),p.value=!1,e}));return(0,a.sV)((()=>{b.value=M.FormSelect.init(L.value)})),(0,a.$u)((()=>{m.value="",b.value=M.FormSelect.init(L.value)})),(e,l)=>((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bo)((0,a.Lk)("select",{ref_key:"yearSelect",ref:L,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.i9)(t)?t.value=e:null)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.value,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.year},(0,r.v_)(e.year),9,v)))),128))],512),[[s.u1,(0,n.R1)(t),void 0,{number:!0}]]),k]))}});const p=m;var L=p},8194:function(e,l,t){t.r(l),t.d(l,{default:function(){return q}});var a=t(6768),n=t(144),r=t(4232),s=t(24),o=t(2122),i=t(3367),u=t(8078),c=t(6995),d=t(6459);const v=e=>((0,a.Qi)("data-v-480271aa"),e=e(),(0,a.jt)(),e),k=v((()=>(0,a.Lk)("h3",null,"Планирование",-1))),m=v((()=>(0,a.Lk)("hr",null,null,-1))),p={key:0,class:"row"},L={class:"col"},b=v((()=>(0,a.Lk)("p",null,"У Вас нет ни одной расходной категории.",-1))),g={key:1,class:"row"},h={key:0,class:"red-text"},f={key:2},y={class:"row valign-wrapper"},C={class:"col s12 m4"},E=["disabled"],_=v((()=>(0,a.Lk)("i",{class:"material-icons right"},"calculate",-1))),F={class:"col s12 m2 offset-m3"},w={class:"col s12 m3"},R={class:"row scrollable"},X={key:0,class:"row"},M={key:0,class:"red-text"},x={class:"progress"},A={class:"highlight centered responsive-table"},T=v((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Дата"),(0,a.Lk)("th",null,"Счёт"),(0,a.Lk)("th",null,"Сумма"),(0,a.Lk)("th",{class:"fixed-width"},"Комментарий"),(0,a.Lk)("th",{class:"fixed-width"},"Действия")])],-1))),K={class:"row mb-0 flex-center"},P={class:"col"},S=["id"],W=v((()=>(0,a.Lk)("i",{class:"material-icons"},"done_all",-1))),I=[W],N={class:"col"},Q=["id","data-target"],G=v((()=>(0,a.Lk)("i",{class:"material-icons"},"edit",-1))),V=[G],$={class:"col"},Y=["id"],D=v((()=>(0,a.Lk)("i",{class:"material-icons"},"delete",-1))),U=[D];var B=(0,a.pM)({__name:"PlanningView",setup(e){const{categoriesAvailableForLimitation:l,limitCategories:t}=(0,i.bP)((0,u.d)()),{selectedTransactionId:v,transactionsMonthFilter:W}=(0,i.bP)((0,c.G)()),{changeTransactionToRegular:G}=(0,c.G)(),{currencyFilter:D,dateFilter:B}=(0,d.c)(),j=(0,a.EW)((()=>{if(12===W.value){let e=t.value.reduce(((e,l)=>Number((e+l.limit).toFixed(2))),0);return e*=W.value,e}return t.value.reduce(((e,l)=>Number((e+l.limit).toFixed(2))),0)})),O=(0,a.EW)((()=>t.value.reduce(((e,l)=>Number((e+l.spend).toFixed(2))),0))),q=(0,a.EW)((()=>t.value.reduce(((e,l)=>Number((e+l.overspend).toFixed(2))),0))),z=e=>{let l;l="BUTTON"===e.target.tagName?e.target:e.target.parentElement,v.value=l.id};let H=0;const J=async e=>{const l=e;try{if(H++,z(l),!v.value)return;await G()}catch(t){console.log(t),H<5&&setTimeout((()=>J(l)),100)}};return(e,i)=>{const u=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[k,m,0===(0,n.R1)(l).length?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("div",L,[b,(0,a.Lk)("p",null,[(0,a.eW)("Добавьте хотя бы одну расходную "),(0,a.bF)(u,{to:"/categories"},{default:(0,a.k6)((()=>[(0,a.eW)("категорию")])),_:1})])])])):((0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("h5",null,[(0,a.eW)(" Запланировано: "+(0,r.v_)((0,n.R1)(D)(j.value))+". Израсходовано: "+(0,r.v_)((0,n.R1)(D)(O.value))+". ",1),q.value>0?((0,a.uX)(),(0,a.CE)("small",h," Перерасход: "+(0,r.v_)((0,n.R1)(D)(q.value)),1)):(0,a.Q3)("",!0)])])),(0,n.R1)(t).length>0?((0,a.uX)(),(0,a.CE)("section",f,[(0,a.Lk)("div",y,[(0,a.Lk)("div",C,[(0,a.Lk)("button",{disabled:0===(0,n.R1)(l).length,class:"btn modal-trigger","data-target":"modalSetLimit"},[_,(0,a.eW)(" Установить лимит ")],8,E)]),(0,a.Lk)("div",F,[(0,a.bF)(o.A)]),(0,a.Lk)("div",w,[(0,a.bF)(s.A,{"show-all":!0})])]),(0,a.Lk)("div",R,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(t),(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id},[e&&(e.limit>0||e.records.length>0||e.spend>0)?((0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,(0,r.v_)(e.name),1),(0,a.eW)(" "+(0,r.v_)((0,n.R1)(D)(e.spend))+" из "+(0,r.v_)((0,n.R1)(D)(e.limit))+" ",1),e.overspend>0?((0,a.uX)(),(0,a.CE)("small",M,"Перерасход на "+(0,r.v_)((0,n.R1)(D)(e.overspend)),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",x,[(0,a.Lk)("div",{class:(0,r.C4)([[e.progressColor],"determinate"]),style:(0,r.Tr)({width:e.progressPercent+"%"})},null,6)]),(0,a.Lk)("table",A,[T,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.records,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,r.v_)((0,n.R1)(B)(e["date"])),1),(0,a.Lk)("td",null,(0,r.v_)(e["account"]),1),(0,a.Lk)("td",null,(0,r.v_)((0,n.R1)(D)(e["amount"])),1),(0,a.Lk)("td",null,(0,r.v_)(e["description"]),1),(0,a.Lk)("td",null,[(0,a.Lk)("div",K,[(0,a.Lk)("div",P,[(0,a.Lk)("button",{id:e.id,class:"green btn",onClick:J},I,8,S)]),(0,a.Lk)("div",N,[(0,a.Lk)("button",{id:e.id,"data-target":"transfer"===e.type?"modalEditTransfer":"modalEditTransaction",class:"yellow btn modal-trigger black-text",onClick:z},V,8,Q)]),(0,a.Lk)("div",$,[(0,a.Lk)("button",{id:e.id,class:"red btn modal-trigger","data-target":"modalDeleteTransaction",onClick:z},U,8,Y)])])])])))),128))])])])):(0,a.Q3)("",!0)])))),128))])])):(0,a.Q3)("",!0)],64)}}}),j=t(1241);const O=(0,j.A)(B,[["__scopeId","data-v-480271aa"]]);var q=O}}]);